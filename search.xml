<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>WeightonlyGEMM:dequantize_s4_to_fp16x2ä»£ç è§£æ</title>
    <url>/2024/08/12/101_WeightonlyGEMM:%20dequantize_s4_to_fp16x2%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p>æœ¬æ–‡èšç„¦äºAWQçš„W4A16 (4-bit weight, 16-bit activation) CUDA
kernelçš„åé‡åŒ–ã€‚</p>
<span id="more"></span>
<h1 id="èƒŒæ™¯">èƒŒæ™¯</h1>
<p>åœ¨ ZZKå¤§ä½¬çš„æ–‡ç«  <a
href="https://zhuanlan.zhihu.com/p/675427125">å¯èƒ½æ˜¯è®²çš„æœ€æ¸…æ¥šçš„WeightonlyGEMMåšå®¢</a>
ä¸­å­¦åˆ°å¾ˆå¤šçŸ¥è¯†</p>
<hr />
<p>æœ€è¿‘åœ¨å­¦AWQçš„é‡åŒ–ï¼Œ<a
href="https://arxiv.org/pdf/2306.00978">AWQè®ºæ–‡</a></p>
<p>å…¶ä¸­æˆ‘æ¯”è¾ƒå…³æ³¨GPUçš„éƒ¨åˆ†ï¼Œå…¶ä¸­æ•°æ®æ’å¸ƒè¿™å—å¾ˆæœ‰æ„æ€ï¼š</p>
<p><img src="/images/101/1.jpeg" width="60%"></p>
<p>äºæ˜¯åˆ°<a href="https://arxiv.org/pdf/2211.10017">Who Says Elephants
Canâ€™t Run</a> è¿™ç¯‡è®ºæ–‡çœ‹äº†ä¸€ä¸‹ï¼Œ<strong>WeightOnly GEMM</strong>
æŠ€æœ¯å°±æ˜¯åœ¨è¿™é‡Œæå‡ºçš„ï¼Œå…¶ä¸­æƒé‡åé‡åŒ–æ˜¯è¿™ä¹ˆæ“ä½œçš„ï¼š</p>
<p><img src="/images/101/2.jpeg" width="60%"></p>
<p>è¿™ä¸ªè®ºæ–‡æå‡ºäº†ä¸€ç§ `IntToFloat
çš„å·§å¦™çš„æ–¹å¼ï¼Œå¯ä»¥å¤§å¤§æé€Ÿåé‡åŒ–é€Ÿåº¦ã€‚</p>
<p><img src="/images/101/3.jpeg" width="60%"></p>
<p>èƒŒæ™¯ä»‹ç»ç»“æŸï¼Œæ›´è¯¦ç»†çš„è®²è§£å¯ä»¥ç›´æ¥çœ‹ZZKå¤§ä½¬çš„æ–‡ç« ï¼Œæ¥ä¸‹æ¥è§£é‡Š
<code>dequantize_s4_to_fp16x2</code> ä»£ç ã€‚</p>
<h1 id="ä»£ç ">ä»£ç </h1>
<p>é¦–å…ˆæ”¾å‡ºå®Œæ•´ä»£ç ï¼ˆ80è¡Œï¼‰ï¼š <figure class="highlight c"><table><tr><td class="code"><pre><span class="line">__device__ uint4 <span class="title function_">dequantize_s4_to_fp16x2</span><span class="params">(<span class="type">uint32_t</span> <span class="type">const</span>&amp; source)</span> &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> defined(__CUDA_ARCH__) &amp;&amp; __CUDA_ARCH__ &lt; 750</span></span><br><span class="line">  assert(<span class="literal">false</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">  uint4 result;</span><br><span class="line"></span><br><span class="line">  <span class="type">uint32_t</span>* h = reinterpret_cast&lt;<span class="type">uint32_t</span>*&gt;(&amp;result);</span><br><span class="line">  <span class="type">uint32_t</span> <span class="type">const</span> i4s = reinterpret_cast&lt;<span class="type">uint32_t</span> <span class="type">const</span>&amp;&gt;(source);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// First, we extract the i4s and construct an intermediate fp16 number.</span></span><br><span class="line">  <span class="type">static</span> constexpr <span class="type">uint32_t</span> immLut = (<span class="number">0xf0</span> &amp; <span class="number">0xcc</span>) | <span class="number">0xaa</span>;</span><br><span class="line">  <span class="type">static</span> constexpr <span class="type">uint32_t</span> BOTTOM_MASK = <span class="number">0x000f000f</span>;</span><br><span class="line">  <span class="type">static</span> constexpr <span class="type">uint32_t</span> TOP_MASK = <span class="number">0x00f000f0</span>;</span><br><span class="line">  <span class="type">static</span> constexpr <span class="type">uint32_t</span> I4s_TO_F16s_MAGIC_NUM = <span class="number">0x64006400</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Note that the entire sequence only requires 1 shift instruction. This is</span></span><br><span class="line">  <span class="comment">// thanks to the register packing format and the fact that we force our</span></span><br><span class="line">  <span class="comment">// integers to be unsigned, and account for this in the fp16 subtractions. In</span></span><br><span class="line">  <span class="comment">// addition, I exploit the fact that sub and fma have the same throughput in</span></span><br><span class="line">  <span class="comment">// order to convert elt_23 and elt_67 to fp16 without having to shift them to</span></span><br><span class="line">  <span class="comment">// the bottom bits before hand.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Shift right by 8 to now consider elt_45 and elt_67. Issue first to hide RAW</span></span><br><span class="line">  <span class="comment">// dependency if we issue immediately before required.</span></span><br><span class="line">  <span class="type">const</span> <span class="type">uint32_t</span> top_i4s = i4s &gt;&gt; <span class="number">8</span>;</span><br><span class="line">  <span class="comment">// Extract elt_01 - (i4s &amp; 0x000f000f) | 0x64006400</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;lop3.b32 %0, %1, %2, %3, %4;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">0</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(i4s), <span class="string">&quot;n&quot;</span>(BOTTOM_MASK), <span class="string">&quot;n&quot;</span>(I4s_TO_F16s_MAGIC_NUM),</span></span><br><span class="line"><span class="params">                 <span class="string">&quot;n&quot;</span>(immLut))</span>;</span><br><span class="line">  <span class="comment">// Extract elt_23 (i4s &amp; 0x00f000f0) | 0x64006400</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;lop3.b32 %0, %1, %2, %3, %4;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">1</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(i4s), <span class="string">&quot;n&quot;</span>(TOP_MASK), <span class="string">&quot;n&quot;</span>(I4s_TO_F16s_MAGIC_NUM),</span></span><br><span class="line"><span class="params">                 <span class="string">&quot;n&quot;</span>(immLut))</span>;</span><br><span class="line">  <span class="comment">// Extract elt_45 (top_i4s &amp; 0x000f000f) | 0x64006400</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;lop3.b32 %0, %1, %2, %3, %4;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">2</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(top_i4s), <span class="string">&quot;n&quot;</span>(BOTTOM_MASK), <span class="string">&quot;n&quot;</span>(I4s_TO_F16s_MAGIC_NUM),</span></span><br><span class="line"><span class="params">                 <span class="string">&quot;n&quot;</span>(immLut))</span>;</span><br><span class="line">  <span class="comment">// Extract elt_67 (top_i4s &amp; 0x00f000f0) | 0x64006400</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;lop3.b32 %0, %1, %2, %3, %4;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">3</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(top_i4s), <span class="string">&quot;n&quot;</span>(TOP_MASK), <span class="string">&quot;n&quot;</span>(I4s_TO_F16s_MAGIC_NUM),</span></span><br><span class="line"><span class="params">                 <span class="string">&quot;n&quot;</span>(immLut))</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// I use inline PTX below because I am not sure if the compiler will emit</span></span><br><span class="line">  <span class="comment">// float2half instructions if I use the half2 ctor. In this case, I chose</span></span><br><span class="line">  <span class="comment">// performance reliability over code readability.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// This is the half2 &#123;1032, 1032&#125; represented as an integer.</span></span><br><span class="line">  <span class="comment">// static constexpr uint32_t FP16_TOP_MAGIC_NUM = 0x64086408;</span></span><br><span class="line">  <span class="comment">// Haotian: subtract &#123;1024, 1024&#125; instead, we do not need to map to [-8, 7]</span></span><br><span class="line">  <span class="type">static</span> constexpr <span class="type">uint32_t</span> FP16_TOP_MAGIC_NUM = <span class="number">0x64006400</span>;</span><br><span class="line">  <span class="comment">// This is the half2 &#123;1 / 16, 1 / 16&#125; represented as an integer.</span></span><br><span class="line">  <span class="type">static</span> constexpr <span class="type">uint32_t</span> ONE_SIXTEENTH = <span class="number">0x2c002c00</span>;</span><br><span class="line">  <span class="comment">// This is the half2 &#123;-72, -72&#125; represented as an integer.</span></span><br><span class="line">  <span class="comment">// static constexpr uint32_t NEG_72 = 0xd480d480;</span></span><br><span class="line">  <span class="comment">// Haotian: Let&#x27;s use &#123;-64, -64&#125;.</span></span><br><span class="line">  <span class="type">static</span> constexpr <span class="type">uint32_t</span> NEG_64 = <span class="number">0xd400d400</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Finally, we construct the output numbers.</span></span><br><span class="line">  <span class="comment">// Convert elt_01</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;sub.f16x2 %0, %1, %2;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">0</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(h[<span class="number">0</span>]), <span class="string">&quot;r&quot;</span>(FP16_TOP_MAGIC_NUM))</span>;</span><br><span class="line">  <span class="comment">// Convert elt_23</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;fma.rn.f16x2 %0, %1, %2, %3;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">1</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(h[<span class="number">1</span>]), <span class="string">&quot;r&quot;</span>(ONE_SIXTEENTH), <span class="string">&quot;r&quot;</span>(NEG_64))</span>;</span><br><span class="line">  <span class="comment">// Convert elt_45</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;sub.f16x2 %0, %1, %2;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">2</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(h[<span class="number">2</span>]), <span class="string">&quot;r&quot;</span>(FP16_TOP_MAGIC_NUM))</span>;</span><br><span class="line">  <span class="comment">// Convert elt_67</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;fma.rn.f16x2 %0, %1, %2, %3;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">3</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(h[<span class="number">3</span>]), <span class="string">&quot;r&quot;</span>(ONE_SIXTEENTH), <span class="string">&quot;r&quot;</span>(NEG_64))</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="ä»£ç è§£æ">ä»£ç è§£æ</h1>
<p>æ¥ä¸‹æ¥é€å¥åˆ†æï¼š <figure class="highlight c"><table><tr><td class="code"><pre><span class="line">__device__ uint4 <span class="title function_">dequantize_s4_to_fp16x2</span><span class="params">(<span class="type">uint32_t</span> <span class="type">const</span>&amp; source)</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™è¡Œä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>dequantize_s4_to_fp16x2</code>
çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª CUDA è®¾å¤‡å‡½æ•°
(<strong>device</strong>)ï¼Œå®ƒçš„è¾“å…¥æ˜¯ä¸€ä¸ªå¸¸é‡å¼•ç”¨ <code>uint32_t</code>
ç±»å‹çš„ <code>source</code>ï¼Œè¿”å›å€¼æ˜¯ <code>uint4</code> ç±»å‹ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> defined(__CUDA_ARCH__) &amp;&amp; __CUDA_ARCH__ &lt; 750</span></span><br><span class="line">  assert(<span class="literal">false</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µé¢„å¤„ç†æŒ‡ä»¤æ£€æŸ¥ CUDA æ¶æ„ç‰ˆæœ¬æ˜¯å¦å°äº
750ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è§¦å‘æ–­è¨€é”™è¯¯ï¼Œè¡¨æ˜è¯¥ä»£ç ä¸é€‚ç”¨äº CUDA 750
ä»¥ä¸‹çš„æ¶æ„ã€‚å¦åˆ™ï¼Œç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚ æ¯”å¦‚è¿™ä¸ªå‡½æ•°é‡Œé¢ç”¨åˆ°äº†
<code>lop3.b32</code> å‡½æ•°ï¼Œå¯ä»¥åœ¨ <a
href="https://docs.nvidia.com/cuda/parallel-thread-execution/">è¿™é‡Œ</a>
æŸ¥åˆ°</p>
<pre><code>Requires sm_50 or higher.
Qualifier .BoolOp requires sm_70 or higher.</code></pre>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">uint4 result;</span><br><span class="line"></span><br><span class="line"><span class="type">uint32_t</span>* h = reinterpret_cast&lt;<span class="type">uint32_t</span>*&gt;(&amp;result);</span><br><span class="line"><span class="type">uint32_t</span> <span class="type">const</span> i4s = reinterpret_cast&lt;<span class="type">uint32_t</span> <span class="type">const</span>&amp;&gt;(source);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª <code>uint4</code> ç±»å‹çš„å˜é‡
<code>result</code>ã€‚</p>
<p>æ¥ç€å°† <code>result</code> çš„åœ°å€è½¬æ¢ä¸º <code>uint32_t*</code>
ç±»å‹çš„æŒ‡é’ˆ <code>h</code>ï¼Œä»¥ä¾¿åç»­çš„ä½æ“ä½œã€‚</p>
<p>ç„¶åå°† <code>source</code> é‡æ–°è§£é‡Šä¸º <code>uint32_t</code>
ç±»å‹å¹¶èµ‹å€¼ç»™ <code>i4s</code>ã€‚</p>
<p>é€šè¿‡ç±»å‹è½¬æ¢å’ŒæŒ‡é’ˆæ“ä½œï¼Œä½¿å¾—å¯¹è¿™äº›æ•´æ•°çš„è®¿é—®å’Œæ“ä½œæ›´åŠ ä¾¿æ·ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> constexpr <span class="type">uint32_t</span> immLut = (<span class="number">0xf0</span> &amp; <span class="number">0xcc</span>) | <span class="number">0xaa</span>;</span><br><span class="line"><span class="type">static</span> constexpr <span class="type">uint32_t</span> BOTTOM_MASK = <span class="number">0x000f000f</span>;</span><br><span class="line"><span class="type">static</span> constexpr <span class="type">uint32_t</span> TOP_MASK = <span class="number">0x00f000f0</span>;</span><br><span class="line"><span class="type">static</span> constexpr <span class="type">uint32_t</span> I4s_TO_F16s_MAGIC_NUM = <span class="number">0x64006400</span>;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå®šä¹‰äº†ä¸€äº›ç”¨äºä½æ“ä½œçš„å¸¸é‡ï¼š</p>
<ul>
<li><p><code>immLut</code> æ˜¯ä¸€ä¸ªæŸ¥æ‰¾è¡¨çš„ç«‹å³æ•°ã€‚</p></li>
<li><p><code>BOTTOM_MASK</code> æ˜¯ç”¨äºæå–è¾ƒä½ä½çš„æ©ç ã€‚</p></li>
<li><p><code>TOP_MASK</code> æ˜¯ç”¨äºæå–è¾ƒé«˜ä½çš„æ©ç ã€‚</p></li>
<li><p><code>I4s_TO_F16s_MAGIC_NUM</code>
æ˜¯ç”¨äºæ•´æ•°è½¬æ¢ä¸ºåŠç²¾åº¦æµ®ç‚¹æ•°çš„é­”æ•°ã€‚</p></li>
</ul>
<p><img src="/images/101/4.jpeg" width="95%"></p>
<p>è¿™å‡ ä¸ªæ•°åœ¨å†…å­˜ä¸­æ˜¯è¿™ä¹ˆè¡¨ç¤ºçš„ï¼Œåé¢ç”¨åˆ°çš„æ—¶å€™ä¼šä»”ç»†è¯´ï¼Œé‚£æ—¶å€™ä¼šå‘ç°è¿™å‡ ä¸ªæ•°å¯çœŸå¦™å•Šã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">uint32_t</span> top_i4s = i4s &gt;&gt; <span class="number">8</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/images/101/5.jpeg" width="95%"></p>
<p>è¿™é‡Œæ˜¯å°† <code>i4s</code> å‘å³ç§»ä½8ä½ï¼Œä»¥ä¾¿å¤„ç† <code>elt_45</code>
å’Œ <code>elt_67</code>ã€‚æš‚æ—¶å…ˆä¸è¦ç®¡ä¸ºä»€ä¹ˆè¿™ä¹ˆåšã€‚
åˆ°è¿™é‡Œï¼Œé¢„å¤‡å·¥ä½œéƒ½åšå¥½äº†ï¼Œæ¥ä¸‹æ¥å¼€å§‹é‡å¤´æˆã€‚</p>
<h2 id="å¤„ç†e0-e1å…ƒç´ ">å¤„ç†e0 e1å…ƒç´ </h2>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Extract elt_01 - (i4s &amp; 0x000f000f) | 0x64006400</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;lop3.b32 %0, %1, %2, %3, %4;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">0</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(i4s), <span class="string">&quot;n&quot;</span>(BOTTOM_MASK), <span class="string">&quot;n&quot;</span>(I4s_TO_F16s_MAGIC_NUM),</span></span><br><span class="line"><span class="params">                 <span class="string">&quot;n&quot;</span>(immLut))</span>;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å†…è” PTX æŒ‡ä»¤ <code>lop3.b32</code> æ‰§è¡Œé€»è¾‘æ“ä½œï¼Œå°†
<code>i4s</code> çš„ä½ä½ï¼ˆ<code>BOTTOM_MASK</code> æ©ç ï¼‰ä¸
<code>I4s_TO_F16s_MAGIC_NUM</code> ç»“åˆå¹¶å­˜å‚¨åœ¨ <code>h[0]</code>
ä¸­ã€‚</p>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹ <code>lop3.b32</code> æ‰§è¡Œäº†ä»€ä¹ˆæ“ä½œï¼Œè¿™ä¸ª
<code>lop3.b32</code> æ˜¯ä¸€ç§CUDAæ±‡ç¼–æŒ‡ä»¤ï¼Œç”¨äºæ‰§è¡Œ
ä¸‰å…ƒé€»è¾‘è¿ç®—ã€‚å®ƒåˆ©ç”¨æŸ¥æ‰¾è¡¨ï¼ˆimmLutï¼‰æ¥ç®€åŒ–é€»è¾‘æ“ä½œã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥åœ¨<a
href="https://docs.nvidia.com/cuda/parallel-thread-execution/">è¿™é‡Œ</a>æŸ¥åˆ°.</p>
<pre><code>For a logical operation F(a, b, c) the value of immLut can be computed by applying the same operation to three predefined constant values as follows:

ta = 0xF0;
tb = 0xCC;
tc = 0xAA;

immLut = F(ta, tb, tc);</code></pre>
<p>æ¯”å¦‚ï¼š <figure class="highlight c"><table><tr><td class="code"><pre><span class="line">If F = (a &amp; b &amp; c);</span><br><span class="line">immLut = <span class="number">0xF0</span> &amp; <span class="number">0xCC</span> &amp; <span class="number">0xAA</span> = <span class="number">0x80</span></span><br><span class="line"></span><br><span class="line">If F = (a | b | c);</span><br><span class="line">immLut = <span class="number">0xF0</span> | <span class="number">0xCC</span> | <span class="number">0xAA</span> = <span class="number">0xFE</span></span><br><span class="line"></span><br><span class="line">If F = (a &amp; b &amp; ~c);</span><br><span class="line">immLut = <span class="number">0xF0</span> &amp; <span class="number">0xCC</span> &amp; (~<span class="number">0xAA</span>) = <span class="number">0x40</span></span><br><span class="line"></span><br><span class="line">If F = ((a &amp; b | c) ^ a);</span><br><span class="line">immLut = (<span class="number">0xF0</span> &amp; <span class="number">0xCC</span> | <span class="number">0xAA</span>) ^ <span class="number">0xF0</span> = <span class="number">0x1A</span></span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹åˆšæ‰å®šä¹‰çš„
<code>immLut = (0xf0 &amp; 0xcc) | 0xaa;</code> é‚£æˆ‘ä»¬å¾—åˆ°çš„æ“ä½œå°±æ˜¯
<code>(a &amp; b) | c</code>ï¼Œä¹Ÿå°±æ˜¯<code>( i4s &amp; BOTTOM_MASK) | I4s_TO_F16s_MAGIC_NUM</code>.</p>
<p>è¿™é‡Œå…ˆæ’ä¸€å¥ï¼Œè¿™ä¸ª<code>immLut</code>è®¾ç½®çš„å®åœ¨æ˜¯å¤ªå¦™äº†ï¼é¦–å…ˆï¼Œabcè¿™ä¸‰ä¸ªæ•°å¯ä»¥å½¢æˆä¸€ä¸ª
3 bit çš„ç¼–ç ï¼Œå¯ä»¥è¡¨ç¤º 8 ç§çŠ¶æ€ï¼Œ</p>
<p><img src="/images/101/6.jpeg" width="80%"></p>
<p>ç„¶åæ— è®ºabcè¿›è¡Œä»€ä¹ˆæ ·çš„ä¸‰å…ƒé€»è¾‘æ“ä½œï¼Œå¾—åˆ°çš„ç»“æœéƒ½æ˜¯å”¯ä¸€çš„ï¼Œè¿™ä¹Ÿå°±å½¢æˆäº†immLutçš„è¡¨ã€‚å®åœ¨æ˜¯å¦™å•Šã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Extract elt_01 - (i4s &amp; 0x000f000f) | 0x64006400</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;lop3.b32 %0, %1, %2, %3, %4;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">0</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(i4s), <span class="string">&quot;n&quot;</span>(BOTTOM_MASK), <span class="string">&quot;n&quot;</span>(I4s_TO_F16s_MAGIC_NUM),</span></span><br><span class="line"><span class="params">                 <span class="string">&quot;n&quot;</span>(immLut))</span>;</span><br></pre></td></tr></table></figure>
<p>ç„¶åç»“åˆå…·ä½“æ•°å€¼çœ‹ä¸€ä¸‹æ˜¯æ€ä¹ˆæ“ä½œçš„ï¼š</p>
<p><img src="/images/101/7.jpeg" width="95%"></p>
<p>è¿™ä¸€æ­¥æ“ä½œæ˜¯æå–å…ƒç´ 0å’Œå…ƒç´ 1çš„ï¼Œè¿™é‡Œè®¾ç½®å…ƒç´ 0æ˜¯<code>0000</code>ï¼Œå³
0ï¼Œå…ƒç´ 1æ˜¯<code>0001</code>ï¼Œå³ 1ã€‚</p>
<p><code>i4s</code>ä¸<code>BOTTOM_MASK</code>è¿›è¡Œä½ä¸æ“ä½œåï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠ<code>e0</code>å’Œ<code>e1</code>ç­›é€‰äº†å‡ºæ¥ï¼Œå’Œ<code>I4s_TO_F16s_MAGIC_NUM</code>è¿›è¡Œä½æˆ–æ“ä½œåï¼Œæ˜¯ç»™æŒ‡æ•°ä½è¿›è¡Œäº†èµ‹å€¼ã€‚</p>
<p>ç°åœ¨çœ‹è¿™ä¸ª <code>I4s_TO_F16s_MAGIC_NUM</code>
ï¼Œ<code>0x64006400</code>ï¼Œåªçœ‹è¿™ä¸ªæŒ‡æ•°ä½éƒ¨åˆ†æ˜¯
<code>11001</code>ï¼Œå¯¹åº”æ•°å­— 25ï¼Œfp16æŒ‡æ•°ä½çš„åç§»é‡ä¸º
<code>2**4âˆ’1=15</code>, é‚£ä¹ˆåç§»åæŒ‡æ•°ä¸º <code>25 - 15 = 10</code>ã€‚</p>
<p>ä»¥e1ä¸ºä¾‹ï¼Œ</p>
<p>å°¾æ•°ä½æ˜¯<code>0.0000000001</code>ï¼ŒåŠ ä¸Š1ï¼Œé‚£å°±æ˜¯<code>1.0000000001</code>ã€‚</p>
<p>æŒ‡æ•°ä½æ˜¯10ï¼Œæ‰€ä»¥ç»“æœæ˜¯<code>1.00000001*2^10 = 10000000001</code>ã€‚ä¹Ÿå°±æ˜¯å°æ•°ç‚¹å‘åç§»åŠ¨10ä½ã€‚</p>
<p>è¿™ä¸ªç»“æœçš„åè¿›åˆ¶æ˜¯ 1025ã€‚</p>
<p>è¿™æ—¶å€™å°±å¯ä»¥ç†è§£è¿™ä¸ª <code>I4s_TO_F16s_MAGIC_NUM</code>
ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾ç½®äº†â€”â€”åŸæ¥çš„æ•°å€¼ç±»å‹æ˜¯<code>int4</code>ï¼Œè‚¯å®šæ˜¯æ•´æ•°ï¼Œé‚£ä¹ˆé—®é¢˜çš„å…³é”®å°±æ˜¯è¦æŠŠå°¾æ•°æ”¾å¤§åˆ°ä¸€å®šç¨‹åº¦ï¼Œä½¿æ–°çš„æ•°å€¼æ˜¯æ•´æ•°ã€‚é‚£ä¹ˆï¼Œæ˜¾è€Œæ˜“è§ï¼Œè¦æŠŠå°æ•°ç‚¹å‘å³ç§»åŠ¨10ä½ï¼ˆå› ä¸ºå°¾æ•°ä½æœ‰10ä½ï¼‰ï¼Œä¹Ÿå°±åæ¨å‡ºäº†<code>magic number</code>çš„å…·ä½“æ•°å€¼ï¼Œå¦™å•Šã€‚</p>
<p>æ˜¾ç„¶ï¼Œæ­¤æ—¶çš„ç»“æœå¹¶ä¸æ­£ç¡®ï¼Œå› ä¸ºåŠ äº†1å¹¶ä¸”å³ç§»äº†10ä½ï¼Œä¹Ÿå°±æ˜¯åŠ äº†1024ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠç»“æœå‡å»1024æ‰å¯ä»¥ï¼Œæ‰€ä»¥è¿˜éœ€è¦è¿›è¡Œè¿™ä¸€æ­¥æ“ä½œï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Convert elt_01</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;sub.f16x2 %0, %1, %2;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">0</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(h[<span class="number">0</span>]), <span class="string">&quot;r&quot;</span>(FP16_TOP_MAGIC_NUM))</span>;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>FP16_TOP_MAGIC_NUM = 0x64006400;</code></p>
<p>è¿™å¥ä»£ç å®ç°äº†å‡1024è¿™ä¸ªæ“ä½œï¼Œäºæ˜¯æœ€ç»ˆå¾—åˆ°fp16æ ¼å¼çš„<code>e1=1</code>ï¼Œ
<code>e0=0</code>ï¼Œæ•°æ®æ— è¯¯ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>FP16_TOP_MAGIC_NUM = 0x64006400;</code>è¿™ä¸ªæ•°ä»£è¡¨çš„å…¶å®æ˜¯fp16æ ¼å¼çš„
1024ã€‚</p>
<p>æˆ‘æœ€å¼€å§‹åœ¨è¿™é‡Œæ„Ÿåˆ°ç–‘æƒ‘ï¼Œå¿ƒæƒ³ä¸ºä»€ä¹ˆè¦å‡è¿™ä¹ˆä¸€ä¸ªæ•°ï¼Œè¿™ä¹Ÿä¸æ˜¯1024å•Šï¼Œç›´åˆ°åæ¥æ„è¯†åˆ°ç°åœ¨æ˜¯åœ¨åšfp16çš„å‡æ³•ï¼Œé‚£ä¹ˆå½“ç„¶ä¹Ÿè¦æ˜¯fp16çš„æ ¼å¼ã€‚</p>
<p>okï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæœ€éš¾çš„éƒ¨åˆ†å°±ç†è§£å®Œäº†ã€‚æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹åˆ«çš„æƒ…å†µï¼š</p>
<h2 id="å¤„ç†e2-e3å…ƒç´ ">å¤„ç†e2 e3å…ƒç´ </h2>
<p><img src="/images/101/8.jpeg" width="95%"></p>
<p>å¯¹äºe2ã€e3è€Œè¨€ï¼Œè¿™æ—¶å€™å°±ä¸èƒ½ç”¨ <code>BOTTOM_MASK</code>
æ¥è¿›è¡Œä½ä¸æ“ä½œäº†ï¼Œåº”è¯¥æ”¹ä¸º <code>TOP_MASK</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Extract elt_23 (i4s &amp; 0x00f000f0) | 0x64006400</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;lop3.b32 %0, %1, %2, %3, %4;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">1</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(i4s), <span class="string">&quot;n&quot;</span>(TOP_MASK), <span class="string">&quot;n&quot;</span>(I4s_TO_F16s_MAGIC_NUM),</span></span><br><span class="line"><span class="params">                 <span class="string">&quot;n&quot;</span>(immLut))</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/images/101/9.jpeg" width="95%"></p>
<p>å¦‚æœå‡å»1024ï¼Œå‘¢ä¹ˆå¾—åˆ°<code>e3=48</code>ï¼Œ<code>e2=32</code>ï¼Œè¿™å’Œåˆšæ‰ä¸å¤ªä¸€æ ·ï¼Œäº‹æƒ…å˜å¾—ä¸å¤ªç®€å•ã€‚</p>
<p>é—®é¢˜åœ¨å“ªï¼Ÿä»¥e3ä¸ºä¾‹ï¼Œè¿™æ—¶å€™å°æ•°ç‚¹å³ç§»10ä½æ„å‘³ç€æŠŠe3ä¹˜äº†<code>2^4=16</code>ï¼Œæ‰€ä»¥å½“å‰çš„ç»“æœæ˜¯<code>1024 + X * 16</code>ã€‚</p>
<p>æ‰€ä»¥é’ˆå¯¹e2ã€e3çš„ä¸‹ä¸€æ­¥æ“ä½œç¨æœ‰ä¸åŒï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Convert elt_23</span></span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;fma.rn.f16x2 %0, %1, %2, %3;\\n&quot;</span></span></span><br><span class="line"><span class="params">               : <span class="string">&quot;=r&quot;</span>(h[<span class="number">1</span>])</span></span><br><span class="line"><span class="params">               : <span class="string">&quot;r&quot;</span>(h[<span class="number">1</span>]), <span class="string">&quot;r&quot;</span>(ONE_SIXTEENTH), <span class="string">&quot;r&quot;</span>(NEG_64))</span>;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>ONE_SIXTEENTH = 0x2c002c00; NEG_64 = 0xd400d400;</code></p>
<p>è¿™æ˜¯åšäº†ä»€ä¹ˆæ“ä½œï¼Ÿå¯ä»¥ç†è§£ä¸º</p>
<p><code>(1024 + X * 16) * (1/16) - 64 = X</code></p>
<p>okï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œe0e1e2e3éƒ½æå®šäº†ï¼Œæœ€åçœ‹ä¸€ä¸‹e4e5ï¼Œ</p>
<h2 id="å¤„ç†e4-e5å…ƒç´ ">å¤„ç†e4 e5å…ƒç´ </h2>
<p><img src="/images/101/10.jpeg" width="95%"></p>
<p>e4 e5å…ƒç´ æ€ä¹ˆæå–å‘¢ï¼Ÿå¯ä»¥å…ˆè®¤çœŸæ€è€ƒä¸€ä¸‹ã€‚</p>
<p>æˆ‘æœ€å¼€å§‹çš„æƒ³æ³•æ˜¯ï¼Œé’ˆå¯¹e4
e5çš„ä½ç½®ï¼Œå†å†™ä¸€ä¸ªmaskè¿›è¡Œä½ä¸æ“ä½œä¸å°±å¥½äº†ï¼Œç„¶åå’Œå‰é¢åšä¸€æ ·çš„æ“ä½œã€‚</p>
<p>ä½†æ˜¯è¿™æ ·æ˜¯ä¸å¯è¡Œçš„ï¼Œä»¥e5ä¸ºä¾‹ï¼Œè¿™æ—¶å€™e5åœ¨16ä½çš„é«˜8ä½ï¼Œä¸fp16çš„æŒ‡æ•°ä½æœ‰å†²çªã€‚</p>
<p>é‚£ä¹ˆï¼Œå¤„ç†æ–¹å¼å°±å¾ˆç®€å•äº†ï¼Œæ–‡ç« æœ€å¼€å§‹çš„æ—¶å€™æåˆ°è¿‡è¿™ä¸ªæ“ä½œï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">uint32_t</span> top_i4s = i4s &gt;&gt; <span class="number">8</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/images/101/11.jpeg" width="95%"></p>
<p>è¿™é‡Œæ˜¯å°† i4s å‘å³ç§»ä½8ä½ï¼Œä»¥ä¾¿å¤„ç† <code>elt_45</code> å’Œ
<code>elt_67</code>ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥æŒ‰ç…§e0 e1çš„æ–¹å¼å¤„ç†e4 e5äº†ã€‚</p>
<p>okï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œe0 e1 e2 e3 e4 e5éƒ½æå®šäº†ï¼Œæœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œe6
e7ç†è§£èµ·æ¥å°±å¾ˆç®€å•ï¼Œè¿™é‡Œä¸åšè¿‡å¤šèµ˜è¿°ã€‚</p>
<p>æ•´ä¸ªä»£ç å®ç°åˆ°è¿™é‡Œä¹Ÿå°±è®²å®Œäº†ã€‚</p>
<hr />
<h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2>
<p>æœ€åï¼Œè¡¥å……å‡ ç‚¹</p>
<ul>
<li><p>å¯¹äºe2e3è€Œè¨€ï¼Œä¸ºä»€ä¹ˆä¸åƒe5e6é‚£æ ·ï¼Œå‘å³ç§»åŠ¨8ä½ï¼Œç„¶ååše0e1ç›¸åŒçš„æ“ä½œï¼Ÿ</p>
<p>è¿™æ ·çš„æ“ä½œä»é€»è¾‘ä¸Šç¡®å®æ›´å¥½ç†è§£ï¼Œä¹Ÿé¿å…äº†åé¢çš„ä¹˜1/16çš„æ“ä½œï¼Œçœ‹ä¸Šå»ä¼¼ä¹æ›´ç®€å•ã€‚</p>
<p>ä½†æ˜¯è¦æ˜ç™½ä¸€ç‚¹ï¼Œe5e6é‚£æ ·ï¼Œå‘å³ç§»åŠ¨8ä½ï¼Œæ˜¯ä¸å¾—ä¸è¿™ä¹ˆåšã€‚</p>
<p>ä¸ºäº†æ€§èƒ½ï¼Œe2e3æ²¡å¿…è¦é¢å¤–å¢åŠ ä¸€ä¸ªç§»ä½æ“ä½œã€‚æ‰€ä»¥å…³é”®ç‚¹åªå‰©ä¸€ä¸ªï¼š<code>fma.rn.f16x2</code>æŒ‡ä»¤å’Œ<code>sub.f16x2</code>æŒ‡ä»¤çš„åŒºåˆ«ï¼Œå¦‚æœ
ç§»ä½+subæŒ‡ä»¤ å¿«äº
<code>fma.rn</code>æŒ‡ä»¤ï¼Œé‚£å°±æ˜¯èµšçš„ã€‚ä»£ç ä¸­çš„æ³¨é‡Šæ ‡æ˜äº†è¿™ä¸€ç‚¹ï¼š</p>
<pre><code>  In addition, I exploit the fact that sub and fma have the same throughput in order to convert elt_23 and elt_67 to fp16 without having to shift them to the bottom bits before hand.</code></pre>
<p>subï¼ˆå‡æ³•ï¼‰å’Œ
fmaï¼ˆä¹˜æ³•ç´¯åŠ ï¼‰å…·æœ‰ç›¸åŒçš„ååé‡ï¼Œè¿™æ„å‘³ç€å®ƒä»¬çš„æ€§èƒ½ç›¸å½“ã€‚</p></li>
<li><p>ä¸ºä»€ä¹ˆè¦åš<code>interleave</code>ï¼Ÿ</p>
<p>æœ¬æ–‡ç¼˜èµ·å°±æ˜¯å› ä¸ºç ”ç©¶è¿™ä¸ªæƒé‡æ’å¸ƒ</p>
<p><img src="/images/101/12.jpeg" width="60%"></p>
<p>å‰æ–‡ä¸­ä¸€ç›´æ²¡æœ‰æè¿™ä»¶äº‹â€”â€”ä¸ºä»€ä¹ˆæƒé‡æ˜¯<code>interleave</code>æ’å¸ƒï¼Ÿ</p>
<p><img src="/images/101/13.png" width="95%"></p>
<p>æŒ‰ç…§zzkå¤§ä½¬çš„è§‚ç‚¹ï¼Œå¯¹äº<code>Int8</code>æ¥è¯´ï¼Œæœ¬æ¥å°±æ˜¯ä¸éœ€è¦<code>Interleave</code>çš„ï¼Œä½†æ˜¯<code>Int4</code>å¿«é€Ÿè½¬æ¢ä¸èƒ½ä½¿ç”¨PRMTæŒ‡ä»¤ï¼Œéœ€è¦é€šè¿‡ä¸€äº›trickï¼Œè¿›è€Œéœ€è¦è¿™ä¸ªäº¤é”™æƒé‡çš„æ ¼å¼</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>int8</code>å¿«é€Ÿåé‡åŒ–ä¸­ï¼Œä½¿ç”¨äº†<code>PRMT</code>æŒ‡ä»¤ï¼Œè¿™ä¸ªæŒ‡ä»¤çš„æ“ä½œç²’åº¦æ˜¯å­—èŠ‚<code>byte</code>ï¼›è€Œint4æ˜¯<code>sub-byte</code>ï¼Œä¸è¶³ä¸€ä¸ªå­—èŠ‚ï¼›å› æ­¤ï¼ŒåŸæ¥åœ¨<code>INT8</code>å¿«é€Ÿåé‡åŒ–çš„é‚£ä¸€å¥—æ— æ³•ç›´æ¥ç”¨åœ¨<code>int4</code>ä¸Šã€‚</p>
<p>æ‰€ä»¥é’ˆå¯¹<code>int4</code>ï¼Œä½¿ç”¨æŒ‡ä»¤<code>LOP3</code>æ¥æ›¿ä»£<code>PRMT</code>ï¼Œä»è€Œå®Œæˆäº†<code>int4</code>å¿«é€Ÿåé‡åŒ–åˆ°<code>fp16</code>çš„æ ¸å¿ƒé€»è¾‘ã€‚é€šè¿‡äº¤é”™æƒé‡ï¼Œå¯ä»¥å‡å°‘<code>shift</code>æŒ‡ä»¤ï¼Œæé«˜æ€§èƒ½ã€‚å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘è®¤ä¸º<a
href="https://zhuanlan.zhihu.com/p/657073857?utm_medium=social&amp;utm_oi=56635854684160&amp;utm_psn=1692002696943525888&amp;utm_source=wechat_session&amp;s_r=0">[LLMæ¨ç†ä¼˜åŒ–]ğŸ”¥WINT8/4-(03):
LOP3æŒ‡ä»¤è¯¦è§£åŠINT4è½¬FP16/BF16åˆ†æ</a> è®²è§£çš„æ¯”è¾ƒè¯¦ç»†ã€‚</p></li>
</ul>
]]></content>
      <tags>
        <tag>LLM</tag>
        <tag>AWQ</tag>
        <tag>dequantize</tag>
      </tags>
  </entry>
  <entry>
    <title>Optimize sgemm on RISC-V platform</title>
    <url>/2024/02/26/103_sgemm_riscv_en/</url>
    <content><![CDATA[<p>This project records the process of optimizing SGEMM
(single-precision floating point General Matrix Multiplication) on the
riscv platform.</p>
<p><img src=/images/sgemm/data/result_all.png width=70% /></p>
<span id="more"></span>
<p>This project records the process of optimizing SGEMM
(single-precision floating point General Matrix Multiplication) on the
riscv platform.</p>
<p>General Matrix Multiplication (GEMM) is one of the core computing
units in deep learning frameworks, widely used for implementing
operators such as Convolution, Full Connection, and Matmul.</p>
<p>I conducted experiments and explorations on the <strong>Allwinner
Nezha D1</strong> development board. <code>Versions 0 through 5</code>
were implemented using the C language, while
<code>versions 6 through 9</code> partially utilized assembly language,
involving the <code>RISC-V V</code> extension instructions.</p>
<p>Note: Unlike some other GEMM optimization projects, this project uses
<strong>row-major order</strong> matrices exclusively. Because I prefer
<strong>row-major order</strong>!</p>
<h1 id="prerequisite-knowledge">Prerequisite Knowledge</h1>
<p><img src=/images/sgemm/pics/riscv.gif width=50% /></p>
<p><a href="https://riscv.org/">RISC-V</a> is an open standard
Instruction Set Architecture (ISA) enabling a new era of processor
innovation through open collaboration.</p>
<hr />
<p><img src=/images/sgemm/pics/GEMM.png width=70% /></p>
<p><a
href="https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms#Level_3">GEMM</a>
General matrix multiply, one of the Basic Linear Algebra
Subprograms.</p>
<hr />
<p><a href="https://en.wikipedia.org/wiki/FLOPS">FLOPS</a> stands for
Floating-point Operations Per Second, also known as peak speed per
second. It refers to the number of floating-point operations executed
per second. One <strong>gigaflop (GFLOPS)</strong> equals ten to the
power of nine (10^9) floating-point operations per second.</p>
<p>The computational complexity of matrix multiplication is calculated
as <code>2 * M * N * K</code>. The ratio of computational complexity to
time taken gives the GFLOPS of the current GEMM version. - Multiplying
by 2 is because each operation involves one multiplication and one
addition.</p>
<h1 id="prepare">Prepare</h1>
<p>The related code is located in <code>./prepare/</code>.</p>
<h2 id="test-cross-compilation">Test Cross-Compilation</h2>
<p>I use the <strong>Allwinner Nezha D1</strong> development board, and
downloaded the cross-compilation link from <a
href="https://xuantie.t-head.cn/community/download?id=4090445921563774976">here</a>.</p>
<p>For detailed instructions, please refer to the <a
href="https://github.com/Zhao-Dongyu/sgemm_riscv/blob/main/prepare/README.md">readme</a>.</p>
<h2 id="memory-bandwidth-test">Memory Bandwidth Test</h2>
<p>I conducted memory bandwidth tests on the development board using the
following projects:</p>
<ul>
<li><a
href="https://github.com/Zhao-Dongyu/sgemm_riscv/tree/main/prepare/2.memcpy_bandwidth_test">2.memcpy_bandwidth_test</a></li>
<li><a
href="https://github.com/Zhao-Dongyu/sgemm_riscv/tree/main/prepare/3.flw_bandwidth_test">3.flw_bandwidth_test</a></li>
<li><a
href="https://github.com/Zhao-Dongyu/sgemm_riscv/tree/main/prepare/4.vlw_bandwidth_test">4.vlw_bandwidth_test</a></li>
</ul>
<p><img src=/images/sgemm/prepare/imgs/memory_bandwidth_test.png width=70% /></p>
<h2 id="roofline-model">Roofline Model</h2>
<p><a href="https://en.wikipedia.org/wiki/Roofline_model">Roofline</a>
proposes a method for quantitative analysis using "Operational
Intensity" and provides a formula for the theoretical performance limit
achievable on computational platforms.</p>
<p>According to <a href="https://zhuanlan.zhihu.com/p/474684731">OpenPPL
Public Course | RISC-V Technical Analysis</a>:</p>
<ul>
<li>The computing power of D1 can reach <code>4 GFlops</code> (<span
class="citation" data-cites="1GHz">@1GHz</span>).</li>
<li>Memory: <code>2.727 GB/s</code> (DDR3 792 MHz).
<ul>
<li>Although I measured the highest as <code>2.592 GB/s</code>, there
may be some problems somewhere?</li>
<li>Let's trust Sensetime for now, temporarily accept its value.</li>
</ul></li>
</ul>
<p><img src=/images/sgemm/pics/roofline.png width=70% /></p>
<h1 id="sgemm-optimization">SGEMM Optimization</h1>
<p>Related code is located in <code>./sgemm/</code>.</p>
<h2 id="usage">Usage</h2>
<p>Take <code>step0</code> as an example, you need to edit the Makefile
first to configure your cross-compilation chain.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> sgemm/step0/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">adb push test_bl_sgemm_step0.x ./.</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">adb shell <span class="string">&#x27;./test_bl_sgemm_step0.x&#x27;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="version-0-naive-version">Version 0: Naive Version</h2>
<p>This version seems to be <strong>the most intuitive</strong> to me,
after all, this is how I learned, understood, and computed matrix
multiplication: &gt; Multiply one row of A by one column of B to get one
element of C.</p>
<p><img src=/images/sgemm/data/result_0.png width=70% /></p>
<p><img src=/images/sgemm/pics/step0.gif width=70% /></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i ++ ) &#123;              <span class="comment">// Start 2-th loop</span></span><br><span class="line">    <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j ++ ) &#123;          <span class="comment">// Start 1-nd loop</span></span><br><span class="line">        <span class="keyword">for</span> ( p = <span class="number">0</span>; p &lt; k; p ++ ) &#123;      <span class="comment">// Start 0-st loop</span></span><br><span class="line">            C( i, j ) += A( i, p ) * B( p, j );</span><br><span class="line">        &#125;                                 <span class="comment">// End   0-th loop</span></span><br><span class="line">    &#125;                                     <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                         <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p>I think <code>version 0</code> very well explains the formula <span
class="math inline">\(C_{mn} = \sum_{k=1}^{K} A_{mk}B_{kn}\)</span>.</p>
<p>However, this version has obvious shortcomings: on a platform with a
theoretical computing power of <code>4 GFLOPS</code>, it only achieves a
maximum computational performance of <code>0.03 GFLOPS</code>. This is
because <strong>the access to matrix B has a very low cache hit rate,
i.e., "poor spatial locality"</strong>. Throughout the calculation, it
is equivalent to accessing matrix B many, many times.</p>
<p>It is advisable to access the elements of multi-dimensional arrays in
sequential order. This can improve the spatial locality of memory access
and make it more friendly to the cache.</p>
<p>Furthermore, it can be observed that with the increase in size, the
performance fluctuates significantly. Analysis of the data shows that
when m=n=k is 128 164 192 228 256 288 320 352 384, the performance is
poor. These numbers differ by 32, and 32 * 4 (sizeof(float)) = 128
B.</p>
<p>It is speculated that the performance fluctuation is related to
cacheline and hardware prefetching -- cacheline = 64B, after cache miss,
hardware prefetching, i.e., HWPrefetcher, reads one more cacheline.</p>
<h2 id="version-1-loop-interchange-version">Version 1: Loop Interchange
Version</h2>
<p>Reusing data in the cache is the most basic and efficient use of
cache. For nested loops, <code>loop interchange</code>,
<code>loop reversal</code>, <code>loop fusion</code>,
<code>loop distribution</code>, <code>loop tiling</code>,
<code>loop unrolling and jam</code>, etc., can be used to improve
program performance.</p>
<p>Selecting an appropriate loop transformation method can both maintain
the semantics of the program and improve its performance.</p>
<p><img src=/images/sgemm/data/result_1.png width=70% /></p>
<p><img src=/images/sgemm/pics/step1.gif width=70% /></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i ++ ) &#123;              <span class="comment">// Start 2-th loop</span></span><br><span class="line">    <span class="keyword">for</span> ( p = <span class="number">0</span>; p &lt; k; p ++ ) &#123;          <span class="comment">// Start 1-st loop</span></span><br><span class="line">        <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j ++ ) &#123;      <span class="comment">// Start 0-nd loop</span></span><br><span class="line">            C( i, j ) += A( i, p ) * B( p, j );</span><br><span class="line">        &#125;                                 <span class="comment">// End   0-th loop</span></span><br><span class="line">    &#125;                                     <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                         <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p>Compared with <code>version 0</code>, <code>version 1</code> has
better spatial locality for the operation on matrix B, and the
performance has been greatly improved (especially for larger sizes,
while for m = n = k &lt;= 68, the efficiency of version 0 is
higher).</p>
<p>Adjusting the order of m, n, and k does not affect the result (i.e.,
maintaining the semantics of the program), but it can affect the
performance. Testing the performance of different loop orders (using the
Allwinner Nezha D1 platform, with m=n=k=512 as an example)</p>
<table>
<thead>
<tr class="header">
<th>Loop Order</th>
<th>GFLOPS</th>
<th>Analysis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MNK</td>
<td>0.012</td>
<td>High cache miss for accessing B</td>
</tr>
<tr class="even">
<td>MKN</td>
<td>0.180</td>
<td></td>
</tr>
<tr class="odd">
<td>NMK</td>
<td>0.012</td>
<td>High cache miss for accessing B</td>
</tr>
<tr class="even">
<td>NKM</td>
<td>0.009</td>
<td>High cache miss for accessing A</td>
</tr>
<tr class="odd">
<td>KMN</td>
<td>0.165</td>
<td></td>
</tr>
<tr class="even">
<td>KNM</td>
<td>0.009</td>
<td>High cache miss for accessing A</td>
</tr>
</tbody>
</table>
<p>However, the hardware utilization of <code>version 1</code> is still
very low, and further optimizations are needed.</p>
<h2 id="version-2-blocking-version">Version 2: Blocking Version</h2>
<p><img src=/images/sgemm/data/result_2.png width=70% /></p>
<p><img src=/images/sgemm/pics/step2.gif width=70% /></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i += DGEMM_MR ) &#123;          <span class="comment">// Start 2-nd loop</span></span><br><span class="line">    <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j += DGEMM_NR ) &#123;      <span class="comment">// Start 1-st loop</span></span><br><span class="line">        AddDot_4x4_opt( k, &amp;A( i, <span class="number">0</span> ), lda, &amp;B( <span class="number">0</span>, j ), ldb, &amp;C( i, j ), ldc );</span><br><span class="line">    &#125;                                          <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                              <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p><img src=/images/sgemm/pics/gemm_block.png width=70% /></p>
<p>To avoid unnecessary cache swapping, blocking processing is
performed. <a href="https://zhuanlan.zhihu.com/p/342923482">Discussing
Why Blocking Matrix Optimization Works</a> is a good read, I recommend
learning from it.</p>
<p>After performing block operations in <code>version 2</code>, the
performance is still not satisfactory. This is because, although this
version superficially implements blocking logic, there are still some
small tricks in the calculation within the block that have not been
applied.</p>
<h2 id="version-3-blocked-optimization-version">Version 3: Blocked
Optimization Version</h2>
<p><img src=/images/sgemm/data/result_3.png width=70% /></p>
<p><img src=/images/sgemm/pics/step3.gif width=70% /></p>
<p><code>AddDot_4x4_opt</code> has been added.</p>
<p>Several tricks are mentioned in<a
href="https://github.com/flame/blislab/blob/master/tutorial.pdf">BLISlab-tutorial</a>:</p>
<ul>
<li>2.4.2 Loop unrolling
<ul>
<li>Updating loop index i and the pointer cp every time through the
inner loop creates considerable overhead. For this reason, a compiler
will perform loop unrolling.</li>
</ul></li>
<li>2.4.3 Register variables
<ul>
<li>Notice that computation can only happen if data is stored in
registers. A compiler will automatically transform code so that the
intermediate steps that place certain data in registers is
inserted.</li>
</ul></li>
</ul>
<p>After using these tricks, this version has significantly improved
performance!</p>
<p>However, for larger matrix sizes, the performance of this version is
still relatively low. Upon investigation, for example, after accessing
B[0,0], B[0,1], B[0,2], B[0,3], when accessing B[1,0], when the size is
large, there must be a <code>cache miss</code>. Therefore, it would be
great if the data could be rearranged in advance.</p>
<h2 id="version-4-b-prepack-version">Version 4: B prepack Version</h2>
<p><img src=/images/sgemm/data/result_4.png width=70% /></p>
<p><img src=/images/sgemm/pics/step4.gif width=70% /></p>
<p>I assume matrix B is <strong>parameter</strong>, so we can perform
the <code>pack</code> operation in advance. Version 4
<code>prepack</code> matrix B, leading to further performance
improvement!</p>
<p>The reason for the performance improvement is evident: there is a
significant reduction in <code>cache misses</code> when accessing matrix
B. This is the first time I deeply realized the importance of
<code>prepacking neural network weights</code> before model
inference.</p>
<p>It can be seen that when the size is relatively large, the
performance still declines. This should be due to a high number of cache
misses when accessing matrix A. Should we pack A?</p>
<p>I assume matrix A is <strong>input</strong>, so packing A cannot be
done in advance and must be included in the overall timing. Is it
necessary?</p>
<h2 id="version-5-a-pack-b-prepack-version">Version 5: A pack &amp; B
prepack Version</h2>
<p><img src=/images/sgemm/data/result_5.png width=70% /></p>
<p><img src=/images/sgemm/pics/step5.gif width=70% /></p>
<p>Based on Version 4, Version 5 performs packing on matrix A.</p>
<p>Here, since matrix A is assumed to be an input, packing A needs to be
performed during computation, and this time consumption needs to be
included in the timing.</p>
<p>The results are still pleasing, especially with large matrix sizes,
achieving further performance improvements.</p>
<p>I initially approached this experiment with a trial-and-error
mindset, considering the additional read of A and writing of packA. It
seems the main challenge ahead lies in combating cache misses.</p>
<p>The current optimization direction has reached its limit. It's worth
trying to do some <code>preload</code> during the calculation
process.</p>
<p>Next, we'll move to assembly, work on vector calculations, and
implement <code>preload</code> in assembly.</p>
<h2 id="version-6-assembly-version">Version 6: Assembly Version</h2>
<p><img src=/images/sgemm/data/result_6.png width=70% /></p>
<p>Brief explanation: A is not packed, but B is prepacked with 16
numbers.</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i += DGEMM_MR ) &#123;       <span class="comment">// Start 2-nd loop</span></span><br><span class="line">    <span class="type">int</span> mb = DGEMM_MR;</span><br><span class="line">    <span class="keyword">if</span>((m - i) &lt; DGEMM_MR) mb = m - i; </span><br><span class="line">    <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j += DGEMM_NR ) &#123;   <span class="comment">// Start 1-st loop</span></span><br><span class="line">        <span class="type">int</span> nb = DGEMM_NR;</span><br><span class="line">        <span class="keyword">if</span>((n - j) &lt; DGEMM_NR) nb = n - j; </span><br><span class="line">        RvvSgemm4x16(   nb,                 <span class="comment">// nr &lt;= 16, a0</span></span><br><span class="line">                        mb,                 <span class="comment">// mr &lt;= 4,  a1</span></span><br><span class="line">                        k,                  <span class="comment">// astride = k*sizeof(float), a2</span></span><br><span class="line">                        &amp;A[i * k],          <span class="comment">// mr * k,   a3</span></span><br><span class="line">                        &amp;packB[j * k],      <span class="comment">// k * 16,   a4</span></span><br><span class="line">                        &amp;C( i, j ),         <span class="comment">// mr * nr,  a5</span></span><br><span class="line">                        n * <span class="keyword">sizeof</span>(<span class="type">float</span>),  <span class="comment">// Len(N) * sizeof(float), a6</span></span><br><span class="line">                        bias</span><br><span class="line">                    );</span><br><span class="line">    &#125;                                       <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                           <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p>Regarding the use of rvv instructions, I believe <code>vsetvli</code>
is essential, and <code>vfmacc.vf</code> is the mainstay.</p>
<p>I have learned a lot from <a
href="https://zhuanlan.zhihu.com/p/474684731">OpenPPL Course | RISC-V
Technical Analysis</a>. They are truly professional! I recommend
learning theoretical guidance and knowledge points from them, paying
tribute to OpenPPL!</p>
<p>As for assembly operators, there are many details in assembly, and I
strongly complain: <strong>writing assembly is really annoying!
Especially the debugging process, it's torturous.</strong> The last time
I wrote assembly was during my undergraduate classes. Picking it up
again brings some novelty and excitement, and being able to control the
execution of operators at a very fine granularity gives a great sense of
accomplishment.</p>
<p>Regarding how the assembly files are implemented specifically, I
believe the fastest way is to look at the assembly code. I won't explain
it further here.</p>
<p>It should be noted that this version's performance is very poor. Why
is that? It's another issue of <strong>loop order</strong>.</p>
<h2 id="version-7-assembly-version-with-loop-order-swapped">Version 7:
Assembly Version with Loop Order Swapped</h2>
<p><img src=/images/sgemm/data/result_7.png width=70% /></p>
<p>Brief explanation: A is not packed, but B is prepacked with 16
numbers.</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j += DGEMM_NR ) &#123;       <span class="comment">// Start 2-st loop</span></span><br><span class="line">    <span class="type">int</span> nb = DGEMM_NR;</span><br><span class="line">    <span class="keyword">if</span>((n - j) &lt; DGEMM_NR) nb = n - j; </span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i += DGEMM_MR ) &#123;   <span class="comment">// Start 1-nd loop</span></span><br><span class="line">        <span class="type">int</span> mb = DGEMM_MR;</span><br><span class="line">        <span class="keyword">if</span>((m - i) &lt; DGEMM_MR) mb = m - i; </span><br><span class="line">        RvvSgemm4x16(   nb,                 <span class="comment">// nr &lt;= 16, a0</span></span><br><span class="line">                        mb,                 <span class="comment">// mr &lt;= 4,  a1</span></span><br><span class="line">                        k,                  <span class="comment">// astride = k*sizeof(float), a2</span></span><br><span class="line">                        &amp;A[i * k],          <span class="comment">// mr * k,   a3</span></span><br><span class="line">                        &amp;packB[j * k],      <span class="comment">// k * 16,   a4</span></span><br><span class="line">                        &amp;C( i, j ),         <span class="comment">// mr * nr,  a5</span></span><br><span class="line">                        n * <span class="keyword">sizeof</span>(<span class="type">float</span>),  <span class="comment">// Len(N) * sizeof(float), a6</span></span><br><span class="line">                        bias</span><br><span class="line">                    );</span><br><span class="line">    &#125;                                       <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                           <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p>Reversing the order of loops, starting with the n-direction followed
by the m-direction, significantly improves performance.</p>
<p>However, the performance of large-sized matrices is still not very
good. The root cause remains in <code>memory access</code>. The
computation of large-sized matrices in the <code>roofline model</code>
is considered <code>compute-bound</code>, where ideally the
<code>compute time</code> and <code>memory access time</code> should
overlap as much as possible. Currently, a significant amount of time is
spent on memory access (mostly due to <code>cache miss</code>!).</p>
<h2 id="version-8-assembly-version-with-preload">Version 8: Assembly
Version with Preload</h2>
<p><img src=/images/sgemm/data/result_8.png width=70% /></p>
<p>Brief Explanation: Matrix A is not <code>packed</code>, while Matrix
B undergoes <code>prepackaging</code> of 16 elements and includes a
<code>preload</code> operation.</p>
<p>The performance is explosive! It reaches a maximum of
<code>2.212 GFLOPS</code>.</p>
<p>Core operations:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vfmacc.vf v16,  ft0, v0</span><br><span class="line">vlw.v v4, (bp0)         # b0&#x27;-&gt;v4</span><br><span class="line">flw fs4, 384(bp0)       # pre-load B</span><br><span class="line">addi bp0,bp0,64</span><br><span class="line">vfmacc.vf v20,  ft1, v0</span><br></pre></td></tr></table></figure>
<p>Inserting some <code>load</code> operations between
<code>vfmacc.vf</code> instructions preloads the data that will be used
later into the <code>cache</code>, significantly reducing
<code>cache miss</code>.</p>
<p>Initially, I was puzzledâ€”how can the <code>compute time</code> and
<code>memory access time</code> overlap when the code seems to execute
sequentially? It wasn't until later that I understood the essence here,
which lies in the principle of <code>cacheline</code>. Indeed,
foundational knowledge is crucial!</p>
<h2 id="version-9-assembly-version-with-a-packed">Version 9: Assembly
Version with A Packed</h2>
<p><img src=/images/sgemm/data/result_9.png width=70% /></p>
<p>Based on previous experience, an attempt was made to
<code>pack</code> Matrix A, but surprisingly, the results were not very
good. A brief analysis suggests that the preload for Matrix A in this
version of the assembly code might not be optimized.</p>
<p>In the previous version, although A wasn't packed, there was preload
for A's 4 rows, which also addressed the pain point of cache miss for
Matrix A.</p>
<h1 id="conclusion">Conclusion</h1>
<p>To continue optimizing this operator, there is still much to be done,
such as rearranging pipelines in assembly.</p>
<p>As mentioned in the OpenPPL Course | RISC-V Technical Analysis, using
<code>vf</code> instructions can achieve 80% of the theoretical peak,
which is 4*80%, <code>3.2 GFLOPs</code>. I currently have only
<code>2.121 GFLOPs</code>, indicating there's still a lot of room for
optimization theoretically.</p>
<p>Furthermore, the RVV currently uses version 0.7.1, and it seems
there's still much work to be done in RVV instruction optimization, such
as the serious efficiency problem encountered with <code>vlw</code>.</p>
<p>In conclusion, working on these tasks has allowed me to learn a lot
from many experts, and I'm very grateful. I also hope this article can
help more people.</p>
<h1 id="acknowledgement">Acknowledgement</h1>
<ul>
<li><p><a href="https://github.com/flame/blislab">BLISlab: A Sandbox for
Optimizing GEMM</a></p>
<p>This project introduced me to how to optimize GEMM</p></li>
<li><p><a
href="https://github.com/surez-ok/blislab_riscv">riscvå¹³å°ä¼˜åŒ–çŸ©é˜µä¹˜(åŸºäºblislabä¼˜åŒ–å®è·µ)</a></p>
<p>I conduct experiments and exploration based on this project</p></li>
<li><p>Thanks to Mr. Ding for your guidance.</p></li>
</ul>
<h1 id="references">References</h1>
<p><a href="https://zhuanlan.zhihu.com/p/474684731">OpenPPL å…¬å¼€è¯¾ |
RISC-V æŠ€æœ¯è§£æ</a></p>
<p><a href="http://riscvbook.com/">RISC-V-Reader</a></p>
<p><a
href="https://github.com/riscv/riscv-v-spec/releases">riscv-v-spec-0.7.1</a></p>
<p><a
href="https://www.cs.utexas.edu/users/pingali/CS378/2008sp/papers/gotoPaper.pdf">Anatomy
of High-Performance Matrix Multiplication</a></p>
<p><a
href="https://developer.huawei.com/consumer/cn/forum/topic/0201105374686101528">ç¼–è¯‘å™¨ä¼˜åŒ–ä¸¨Cacheä¼˜åŒ–</a></p>
<p><a
href="https://www.leiphone.com/category/yanxishe/Puevv3ZWxn0heoEv.html">OpenBLASé¡¹ç›®ä¸çŸ©é˜µä¹˜æ³•ä¼˜åŒ–
| AI ç ”ä¹ ç¤¾</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/34204282">Roofline
Modelä¸æ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ€§èƒ½åˆ†æ</a></p>
<p><a
href="https://zhuanlan.zhihu.com/p/342923482">æµ…è°ˆåˆ†å—çŸ©é˜µä¼˜åŒ–æ–¹æ³•ä¸ºä»€ä¹ˆæœ‰ç”¨</a></p>
<h1 id="thanks-for-your-support">Thanks for your support!</h1>
<p><a
href="https://buymeacoffee.com/zhaodongyu"><strong>Buymeacoffee</strong></a>
<a href="https://paypal.me/ZhaoDongyu"><strong>Paypal</strong></a></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>RISCV</tag>
        <tag>GEMM</tag>
        <tag>HPC</tag>
      </tags>
  </entry>
  <entry>
    <title>Battlegrounds</title>
    <url>/2023/07/09/100_Battlegrounds/</url>
    <content><![CDATA[<p>Set up a flag: the completion progress reaches 100%</p>
<p>Now at <strong>99%</strong></p>
<span id="more"></span>
<table>
<tr>
<td>
<b>Pretzel Mustard</b>
</td>
<td>
Without losing a round<br>(Completed 2024/06/03)
</td>
<td>
<b>Spicy Pretzel Mustard</b>
</td>
<td>
Winning every round<br>(Completed 2024/06/03)
</td>
</tr>
<tr>
<td>
<b>Finish in 1st place</b>
</td>
<td>
250/250<br>(Completed 2024/06/01)
</td>
<td>
Finish in top 4
</td>
<td>
1000/1000<br>(Completed 2024/10/04)
</td>
</tr>
<tr>
<td>
<b>Funnel Cakes</b>
</td>
<td>
Without losing a round in Duos<br>(Completed 2024/06/03)
</td>
<td>
<b>Cinnamon Funnel Cakes</b>
</td>
<td>
Winning every round in Duos<br>(Completed 2024/06/03)
</td>
</tr>
<tr>
<td>
Finish in 1st place in Duos
</td>
<td>
180/250
</td>
<td>
Finish in top 2 in Duos
</td>
<td>
261/1000
</td>
</tr>
<tr>
<td>
<b>Beasts</b>
</td>
<td>
Completed 2024/01/31
</td>
<td>
<b>Golden Beasts</b>
</td>
<td>
Completed 2023/11/22
</td>
</tr>
<tr>
<td>
<b>Demons</b>
</td>
<td>
Completed 2024/05/30
</td>
<td>
<b>Golden Demons</b>
</td>
<td>
Completed 2024/05/16
</td>
</tr>
<tr>
<td>
<b>Dragons</b>
</td>
<td>
Completed 2024/06/15
</td>
<td>
<b>Golden Dragons</b>
</td>
<td>
Completed 2024/03/02
</td>
</tr>
<tr>
<td>
<b>Elementals</b>
</td>
<td>
Completed 2024/06/01
</td>
<td>
<b>Golden Elementals<b>
</td>
<td>
Completed 2024/05/16
</td>
</tr>
<tr>
<td>
<b>Mechs</b>
</td>
<td>
Completed 2024/03/17
</td>
<td>
<b>Golden Mechs</b>
</td>
<td>
Completed 2024/01/20
</td>
</tr>
<tr>
<td>
<b>Murlocs</b>
</td>
<td>
Completed 2024/06/06
</td>
<td>
<b>Golden Murlocs</b>
</td>
<td>
Completed 2024/05/21
</td>
</tr>
<tr>
<td>
<b>Naga</b>
</td>
<td>
Completed 2024/08/18
</td>
<td>
<b>Golden Naga</b>
</td>
<td>
Completed 2024/05/25
</td>
</tr>
<tr>
<td>
<b>Priates</b>
</td>
<td>
Completed 2024/3/11
</td>
<td>
<b>Golden Priates</b>
</td>
<td>
Completed 2023/12/24
</td>
</tr>
<tr>
<td>
Quilboar
</td>
<td>
3970/4000
</td>
<td>
<b>Golden Quilboar</b>
</td>
<td>
Completed 2024/07/14
</td>
</tr>
<tr>
<td>
<b>Undead<b>
</td>
<td>
Completed 2023/12/10
</td>
<td>
<b>Golden Undead</b>
</td>
<td>
Completed 2023/10/23
</td>
</tr>
</table>
<table>
<tr>
<td align="center" style="width: 100px;">
Hero
</td>
<td style="width: 100px;">
</td>
<td style="width: 200px;">
Achievement
</td>
<td>
Description
</td>
</tr>
<tr>
<td rowspan="2">
<b>A.F.Kay</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/8f9f341289ba4279f8eb37f97f56abb4306ec379b16837830a2ac1b688558820.png">
</td>
<td>
Idle Idol<br>(Completed 2023/10/30)
</td>
<td>
Passive Skip your first two turns. Start with two minions from Tavern
Tier 3.<br>Finish in 1st place as A.F.Kay
</td>
</tr>
<tr>
<td>
brb<br>(Completed 2023/10/30)
</td>
<td>
Finish in 1st place after AFKing your third turn as A.F.Kay
</td>
</tr>
<tr>
<td>
<b>AIâ€™Akir</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/208f628c6ae4340ca6889ff5ba883a919c021429b75f73c4903a4c647e4e6bcd.png">
</td>
<td>
Wrath of the Windlord<br>(Completed 2023/11/23)
</td>
<td>
Passive Start of Combat: Give your left-most minion Windfury, Divine
Shield, and Taunt.<br>Finish in 1st place as AIâ€™Akir
</td>
</tr>
<tr>
<td>
<b>Alextrasza</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/d7a061e5ab1c9c132725aaabe271d9fd60e0ce39d7831d7706e80171bce8e5f3.png">
</td>
<td>
Life and Hope<br>(Completed 2023/11/11)
</td>
<td>
Passive. After you upgrade Bob's Tavern to Tavern Tier 5, Discover two
Dragons of any Tier.<br>Finish in 1st place as Alextrasza
</td>
</tr>
<tr>
<td>
<b>Ambassador Faelin</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/812794e11850309243ae674e2523d8492a85d922a2dfd796ae317826ac090c32.png">
</td>
<td>
All According To Plan<br>(Completed 2023/05/30)
</td>
<td>
Passive. Skip your first turn. Discover a Tier 2, 4, and 6 minion to get
at those Tiers.<br>Finish in 1st place as Ambassador Farlin
</td>
</tr>
<tr>
<td>
<b>Aranna Starseeker</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/432b5f6dee120335d8c37258e03083cf559659af8196d32dc54a3581c209774e.png">
</td>
<td>
Outlandish<br>(Completed 2023/06/04)
</td>
<td>
Passive. After 16 friendly minions attack, the first minion you buy each
turn is free. ( left!)<br>Finish in 1st place as Aranna Starseeker
</td>
</tr>
<tr>
<td>
<b>Arch-Villain Rafaam</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/d7f38259e52d3f372d1a5bdf212478e0b8b837aa62015ea41d92598102671dc3.png">
</td>
<td>
Supreme Tavernologist<br>(Completed 2023/07/20)
</td>
<td>
Next combat, add a plain copy of the first minion you kill to your
hand.<br>Finish in 1st place as Arch-Villain Rafaam
</td>
</tr>
<tr>
<td>
<b>Brann</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/58a3df4cc1ff17d37afad9957bd1b0c862e218d537425a0e56aa2c780dc4850d.png">
</td>
<td>
Where's the Action?!<br>(Completed 2023/10/05)
</td>
<td>
Passive. After you buy 5 Battlecry minions, add Brann Bronzebeard to
your hand. (Once per game.)<br>Finish in 1st place as Brann
</td>
</tr>
<tr>
<td>
<b>Bruâ€™kan</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/831548757f8f792b550828859e1d286ff2ae56896006008c6d131a7559cb5a04.png">
</td>
<td>
Elements of Style<br>(Completed 2023/07/30)
</td>
<td>
Choose an Element. Start of Combat: Call upon that Element.<br>Finish in
1st place as Bruâ€™kan
</td>
</tr>
<tr>
<td>
<b>Capâ€™n Hoggarr</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/47acd041253ef3a0bec521b75a8021d5cae454e05cabfa29d6ea15ada1695311.png">
</td>
<td>
Sailing to Victory<br>(Completed 2023/09/03)
</td>
<td>
Passive After you buy a Pirate, gain 1 Gold.<br>Finish in 1st place as
Capâ€™n Hoggarr
</td>
</tr>
<tr>
<td>
<b>Captain Eudora</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/5cb89601f8020957f30607a4a161ea1a8d05e2324b7062886b72774944a5dbb3.png">
</td>
<td>
Can You Dig It?<br>(Completed 2023/10/01)
</td>
<td>
Dig for a Golden minion! ( (Dig, Digs) left.)<br>Finish in 1st place as
Captain Eudora
</td>
</tr>
<tr>
<td>
<b>Captain Hooktusk</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/171fd3a249bbd535c99d99eed2631c865cdb158d84c28f8beb7315992e7695fb.png">
</td>
<td>
Never Fight Fair<br>(Completed 2023/11/10)
</td>
<td>
Remove a friendly minion. Choose one of two from a Tavern Tier lower to
keep.<br>Finish in 1st place as Captain Hooktusk
</td>
</tr>
<tr>
<td>
<b>Cariel Roame</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/d78fba8c2d05f214f5613e2d2406fc6b5860eaf2e73dc033ec479efdeb103190.png">
</td>
<td>
Courageous Conviction<br>(Completed 2024/06/01)
</td>
<td>
Give friendly minions + /+ . (After you upgrade the Tavern, choose an
improvement!) Give friendly minions + /+ .<br>Finish in 1st place as
Cariel Roame
</td>
</tr>
<tr>
<td>
<b>Chenvaala</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/2a88458e43b359eef32c9cfc194bd48801ab65272b95a8e125b394a61a542e6d.png">
</td>
<td>
Is It Cold In Here?<br>(Completed 2023/09/09)
</td>
<td>
Passive After you play 3 Elementals, reduce the cost of upgrading Bob's
Tavern by (3).<br>Finish in 1st place as Chenvaala
</td>
</tr>
<tr>
<td>
<b>Cho</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/ad4ea03a821830fdab6b763970f1dbcb10c2bd9b95a1e6c22d6ade14c969057d.png">
</td>
<td>
I won!<br>(Completed 2024/04/28)
</td>
<td>
Passive. Whenever you play a Golden minion, both you and Gall get a
Triple Reward. <br>Finish in 1st place as Cho
</td>
</tr>
<tr>
<td>
<b>Cookie the Cook</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/fbffd5745f86f2a5171831e01be2e8b7b421fb5ceb273b89d4d080bc74e8bc18.png">
</td>
<td>
3-Star Chef<br>(Completed 2023/08/20)
</td>
<td>
Throw a minion in your pot. When you've gathered 3, Discover from their
minion types. ( left!)<br>Finish in 1st place as Cookie the Cook
</td>
</tr>
<tr>
<td>
<b>Câ€™Thun</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/56c5d1797655207f4606dbecaaf78ccf04c3db0b5e50146d8d41eae64723227d.png">
</td>
<td>
Mathematically Impossible<br>(Completed 2023/05/30)
</td>
<td>
At end of turn, give a friendly minion +1/+1. Repeat (time, times).
(Upgrades each turn!)<br>Finish in 1st place as Câ€™Thun
</td>
</tr>
<tr>
<td rowspan="2">
<b>Dancingâ€™ Deryl</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/11ad255ca614b077f1dfb7697b208c113d6009214ae7b11ccece5ddb97269c8c.png">
</td>
<td>
Show Me Your Moves<br>(Completed 2024/04/06)
</td>
<td>
Finish in 1st place as Dancingâ€™ Deryl
</td>
</tr>
<tr>
<td>
Hats on Hats on Hats<br>(Completed 2023/10/16)
</td>
<td>
Place 30 hats on one minion as Dancingâ€™ Deryl
</td>
</tr>
<tr>
<td>
<b>Death Speaker Blackthorn</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/38f3bf86dd5f0a7145a06078048d4d9aa887462aa6c486fc05e15ac0769f5046.png">
</td>
<td>
Killer Speech<br>(Completed 2024/05/18)
</td>
<td>
Get 2 Blood Gems. (Twice per turn.)<br>Finish in 1st place as Death
Speaker Blackthorn
</td>
</tr>
<tr>
<td>
<b>Deathwing</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/5c475eb99fec4aeeb88fb1525061f969d472e3811e448050e59ca08d142a55fa.png">
</td>
<td>
POWER INCARNATE!!!<br>(Completed 2023/11/16)
</td>
<td>
Passive Start of Combat: Give ALL minions +2 Attack
permanently.<br>Finish in 1st place as Deathwing
</td>
</tr>
<tr>
<td>
<b>Doctor Holli'dae</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/65c6e0ef3c77e4e2e6b284300abb1d7c0c70805d3b797fd654c332e2ea4ea94a.png">
</td>
<td>
Happy Holli'daes!<br>(Completed 2023/12/09)
</td>
<td>
Get a random Tavern spell.<br>Finish in 1st place as Deathwing
</td>
</tr>
<tr>
<td>
<b>Drekâ€™Thar</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/6dbd7d61c752154fb08a9e6759f4e9f7bdf64b18e28cc61e7993319cc7c84e1c.png">
</td>
<td>
Frostwolf Fame<br>(Completed 2023/05/29)
</td>
<td>
Passive Avenge (2): Give your minions +1 Attack permanently.<br>Finish
in 1st place as Drekâ€™Thar
</td>
</tr>
<tr>
<td rowspan="2">
<b>E.T.C Band Manager</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/5b7bcf32835bca15197f609ec5a66e9690e61e620fa979db5363bc58b8e8c6cb.png">
</td>
<td>
Chart Topper<br>(Completed 2023/06/12)
</td>
<td>
Discover a Buddy. (Unlocks at Tier 2.)<br>Finish in 1st place as E.T.C
Band Manager
</td>
</tr>
<tr>
<td>
Friend of a Friend<br>(Completed 2023/06/29)
</td>
<td>
Play 16 Buddies
</td>
</tr>
<tr>
<td>
<b>Edwin VanCleef</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/e41d31d85a4a02afb1c8c2e1efae16f7d252187dd7ed2d32eabe0fd4be1fdb6b.png">
</td>
<td>
For the Brotherhood<br>(Completed 2023/06/16)
</td>
<td>
Give a minion + /+ . Upgrades after you buy 4 minions. (
left!)<br>Finish in 1st place as Edwin VanCleef
</td>
</tr>
<tr>
<td>
<b>Elise Starseeker</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/11eb07c5477fbdd522f626c7cf2df9c19e1cd0811c0a2692f1aef0c3a5d69fa9.png">
</td>
<td>
Always Bring a Map<br>(Completed 2023/11/21)
</td>
<td>
Discover a minion from your Tavern tier. Costs (1) more after each
use.<br>Finish in 1st place as Elise Starseeker
</td>
</tr>
<tr>
<td>
<b>Enhance-o Mechano</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/6db8abb382f57b1e43719765426f009ca540f8f3416ec7ed6084b170ef5e3f92.png">
</td>
<td>
The Little Bot That Could<br>(Completed 2023/07/08)
</td>
<td>
Passive. After each Refresh, give a minion in Bob's Tavern Taunt,
Windfury, Reborn, or Divine Shield.<br>Finish in 1st place as Enhance-o
Mechano
</td>
</tr>
<tr>
<td>
<b>Flobbidinous Floop</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/7a4862481039beee31f60cb1abcf344afc48fa974647737d50dae194a4eb6d44.png">
</td>
<td>
Floop De Loop<br>(Completed 2024/04/27)
</td>
<td>
Choose a friendly minion. Start of Combat: Transform it into your
teammate's highest Tier minion.<br>Finish in 1st place as Flobbidinous
Floop
</td>
</tr>
<tr>
<td>
<b>Forest Warden Omu</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/03d19a23896ea91148a8793e7d90ea876750985e365183b5c69a6ff7b40c711c.png">
</td>
<td>
Nowhere Left To Grow<br>(Completed 2023/11/05)
</td>
<td>
Passive After you upgrade Bob's Tavern, gain 2 Gold.<br>Finish in 1st
place as Forest Warden Omu
</td>
</tr>
<tr>
<td>
<b>Fungalmancer Flurgl</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/37e634262bb5411afe01d26ed3b624e2b7bf49bac38d3a5bbc23dfc1e58cf9e3.png">
</td>
<td>
Wishies for Fishies<br>(Completed 2023/06/10)
</td>
<td>
Passive. After you sell 5 minions, get a random Murloc. (
left.)<br>Finish in 1st place as Fungalmancer Flurgl
</td>
</tr>
<tr>
<td rowspan="2">
<b>Galakrond</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/bbe94b8cdad0b6130578d29278fc48ba4fdcaf1229e8337557cfb7d1743e0df9.png">
</td>
<td>
The Progenitor<br>(Completed 2023/08/21)
</td>
<td>
Choose a minion in Bob's Tavern. Discover a higher Tier minion to
replace it.<br>Finish in 1st place as Galakrond
</td>
</tr>
<tr>
<td>
Long Term Investment<br>(Completed 2023/05/30)
</td>
<td>
Upgrade a Tier 1 minion to a Tier 6 minion as Galakrond.
</td>
</tr>
<tr>
<td>
<b>Galewing</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/a19edf90bd53e346d1593f27b17d8b994ad97c00b8ed5c5deef46666719e6115.png">
</td>
<td>
Take to the Skies<br>(Completed 2023/05/31)
</td>
<td>
Choose a new flightpath. Complete it to get a bonus!<br>Finish in 1st
place as Galewing
</td>
</tr>
<tr>
<td>
<b>George the Fallen</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/fea24fd3049da7c75a46526a2784303099c6341c3bfe4a4673a2547728e1846f.png">
</td>
<td>
For Karl!<br>(Completed 2023/11/19)
</td>
<td>
Give a minion Divine Shield.<br>Finish in 1st place as George the Fallen
</td>
</tr>
<tr>
<td>
<b>Greybough</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/3bb12d29a29fd44c9c6eeab5635ec9283a1843e00980c2787ccd54c7424db6e7.png">
</td>
<td>
Sprouting Your Roots<br>(Completed 2023/07/13)
</td>
<td>
Passive Give +1/+2 and Taunt to minions you summon during
combat.<br>Finish in 1st place as Greybough
</td>
</tr>
<tr>
<td>
<b>Guff Runetotem</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/aceadc9bb5f5cf6f282b60d9dd726053f5334b226044c65c04606ce275928df0.png">
</td>
<td>
Perfectly Balanced<br>(Completed 2023/08/27)
</td>
<td>
Give a friendly minion of each Tavern Tier +2/+2.<br>Finish in 1st place
as Guff Runetotem
</td>
</tr>
<tr>
<td>
<b>Heistaron Togaggle</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/33e7ebcd9c43edc2489e3c26b350852dd295085aa9d534729dd49cc8a5887df6.png">
</td>
<td>
Who The King? I THE KING!<br>(Completed 2023/11/05)
</td>
<td>
Steal all minions in Bob's Tavern. Each turn, your next Hero Power costs
(1) less.<br>Finish in 1st place as Heistaron Togaggle
</td>
</tr>
<tr>
<td>
<b>Illidan Stormrage</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/1b0741094f9630a6997e13f7fc16efd05d99daae42de6dc598b082bff4b47e1d.png">
</td>
<td>
You ARE Prepared<br>(Completed 2023/12/05)
</td>
<td>
Passive. Start of Combat: Your left and right-most minions gain +2/+1
and attack immediately.<br>Finish in 1st place as Illidan Stormrage
</td>
</tr>
<tr>
<td>
<b>Infinite Toki</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/df407a1a99c5cdb82bfcc51a9a8df3a04d62e34b5eb1ed39873cf1a8e3f9919a.png">
</td>
<td>
The Ideal Timeline<br>(Completed 2023/09/06)
</td>
<td>
Refresh Bob's Tavern. Include two minions from a Tavern Tier
higher.<br>Finish in 1st place as Infinite Toki
</td>
</tr>
<tr>
<td>
<b>Inge, the Iron Hymn</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/ad3fe7b6b636db6fdbfcd969753535cb1abfe376bbc40078497386a43b5ee2ae.png">
</td>
<td>
Ingenious! <br>(Completed 2023/06/14)
</td>
<td>
Give a minion Attack equal to your Tavern Tier. (Swaps to Health next
turn!)<br>Finish in 1st place as Inge. The Iron Hymn
</td>
</tr>
<tr>
<td>
<b>Ini Stormcoil</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/28d3ec677705631e612383acee49a36bdfe7ee0060d82bfd13ee3d5261d0b571.png">
</td>
<td>
The Stormcoil Override<br>(Completed 2023/05/29)
</td>
<td>
Passive After 10 friendly minions die, get a random Mech. Passive After
10 friendly minions die, get a random Mech. ( left.)<br>Finish in 1st
place as Ini Stormcoil
</td>
</tr>
<tr>
<td>
<b>Jandice Barov</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/86e594de784417d255d4f67da713cf1f748f581984a764d35200d5efef647c24.png">
</td>
<td>
Swap Meet<br>(Completed 2023/11/01)
</td>
<td>
Swap a friendly non-golden minion with a random one in Bob's
Tavern.<br>Finish in 1st place as Jandice Barov
</td>
</tr>
<tr>
<td>
<b>Kaelâ€™thas Sunstride</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/f721e0cd097010c2db5640f8f995d2e7e58efa1e444b7ca71e61d2119a161b06.png">
</td>
<td>
No More Setbacks<br>(Completed 2023/09/24)
</td>
<td>
Passive Every third minion you play gains +2/+2.<br>Finish in 1st place
as Kaelâ€™thas Sunstride
</td>
</tr>
<tr>
<td>
<b>Kurtrus Ashfallen</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/bb57bb887b9f6d85bbb399464e2dfe886c4d1a5fb670039e8e8c0b0628d7959b.png">
</td>
<td>
Ashfallen in Love With You<br>(Completed 2023/07/19)
</td>
<td>
Passive. Once per turn, after you buy 4 minions, Discover a plain copy
of one of them. ( left!) Passive. Once per turn, after you buy 4
minions, Discover a plain copy of one of them. (Done!)<br>Finish in 1st
place as Kurtrus Ashfallen
</td>
</tr>
<tr>
<td>
<b>Lady Vashj</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/3860d62f42e43e75687a666f6da549e0f3ff805316ee98e306d3715d432d7d63.png">
</td>
<td>
Handmaiden's Tail<br>(Completed 2023/05/27)
</td>
<td>
Discover a Spellcraft spell of your Tier or lower. Its effect is
permanent.<br>Finish in 1st place as Lady Vashj
</td>
</tr>
<tr>
<td>
<b>Lich Bazâ€™hial</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/5984e14a91e46f5578fab2a184821029479837408c790d36cce226a369ade097.png">
</td>
<td>
Phylactery Mastery<br>(Completed 2023/08/22)
</td>
<td>
Steal a minion in Bob's Tavern. Take damage equal to its Tavern
Tier.<br>Finish in 1st place as Lich Bazâ€™hial
</td>
</tr>
<tr>
<td rowspan="2">
<b>Lord Barov</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/b148b639c90aad9b3c2028ed482799e83aab3f69961aae3ca4ff8a0693fa4666.png">
</td>
<td>
Lord of the Manor(Completed 2024/08/20)
</td>
<td>
Guess which player will win their next combat. If they win, get 3
Coins.<br>Finish in 1st place as Lord Barov
</td>
</tr>
<tr>
<td>
Salty Bets<br>(Completed 2024/01/23)
</td>
<td>
Guess the correct outcome of Friendly Wagers 3 turns in a row.
</td>
</tr>
<tr>
<td>
<b>Lord Jaraxxus</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/3956c3fd0b3df2c6cfecb46b0f60772c85f1291d535aeffd3a0b0bbfb076ab2d.png">
</td>
<td>
INFERNAL OVERDRIVE<br>(Completed 2024/07/12)
</td>
<td>
Choose a friendly Demon. It consumes a minion in Bob's Tavern to gain
its stats.<br>Finish in 1st place as Lord Jaraxxus
</td>
</tr>
<tr>
<td>
<b>Madam Goya</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/d7e2dfe73e09dd4b3c6e0f6d8e74b6bac586de215f9fbdeecc17d191f6410aaf.png">
</td>
<td>
Passed With Flying Colors<br>(Completed 2024/06/10)
</td>
<td>
Pass a non-Golden minion.<br>Finish in 1st place as Madam Goya
</td>
</tr>
<tr>
<td>
<b>Maiev</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/6918af890e98422bcf2bb5dbd3a2a57301a5a8398db2acf5c1c1f02bd849b9fd.png">
</td>
<td>
Iron Hand of Justice<br>(Completed 2023/12/21)
</td>
<td>
Make a minion in Bob's Tavern Dormant. After 3 turns, get it with
+2/+2.<br>Finish in 1st place as Maiev
</td>
</tr>
<tr>
<td>
<b>Malygos</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/eda55e0eba4bd97eb441a7cc44d56c990a847e32efd1663f5bbeb2d03775d6ee.png">
</td>
<td>
The Essence of Magic<br>(Completed 2023/10/22)
</td>
<td>
Replace a minion with a random one of the same Tavern Tier. (Twice per
turn.)<br>Finish in 1st place as Malygos
</td>
</tr>
<tr>
<td>
<b>Marin the Manager</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/51faa5dd4bafb288b5520f6d833e433a14107b04971b161ac72b158f4c24644d.png">
</td>
<td>
Under New Management<br>(Completed 2024/08/22)
</td>
<td>
Passive On Turn 5, choose a Lesser Trinket to buy.<br>Finish in 1st
place as Marin the Manager
</td>
</tr>
<tr>
<td>
<b>Master Nguyen</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/dbd2f8d971d508bfb163854bcc8808c58e67b09bb77cf1aa24d2be01097937f0.png">
</td>
<td>
A Master's Tribute<br>(Completed 2023/08/31)
</td>
<td>
Passive At the start of every turn, choose from 2 new Hero
Powers.<br>Finish in 1st place as Master Nguyen
</td>
</tr>
<tr>
<td>
<b>Millhouse Manastorm</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/d43b3fc7f7ec955b34824f1fdefaedee44e550949f276cac64f594be7544113d.png">
</td>
<td>
Light You Up. Sweetcheeks<br>(Completed 2023/09/10)
</td>
<td>
Passive Minions cost 2 Gold. Refresh costs 2 Gold. Tavern Tiers cost (1)
more.<br>Finish in 1st place as Millhouse Manastorm
</td>
</tr>
<tr>
<td>
<b>Millificent Manastorm</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/aa6f2e1fd9dcf285be12131c4e109939cc70eadcfd07d870e387deb6af776b22.png">
</td>
<td>
Meching It happen<br>(Completed 2023/11/05)
</td>
<td>
Passive Whenever you summon a Mech, give it +2 Attack.<br>Finish in 1st
place as Millificent Manastorm
</td>
</tr>
<tr>
<td>
<b>Mr. Bigglesworth</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/ff85b0df5bf26537d5d98fc8eb4c7a2e44ecedebe2e110d072b1a54fe566cb76.png">
</td>
<td>
Whose Cat Is This?<br>(Completed 2023/05/30)
</td>
<td>
Passive When a player dies, Discover a minion from their warband. It
keeps any enchantments.<br>Finish in 1st place as Mr. Bigglesworth
</td>
</tr>
<tr>
<td>
<b>Mukla</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/28dcc046ea739dc8a036438539938e469cf06a1fd3b230cd1472c69c2726bd8e.png">
</td>
<td>
Banana Slamma'<br>(Completed 2023/09/29)
</td>
<td>
Passive At the start of your turn, get 2 Bananas and give everyone else
one.<br>Finish in 1st place as Mukla
</td>
</tr>
<tr>
<td>
<b>Murloc Holmes</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/ee6f4c3a335863eee684b0d98de8fc44530ade7acee18de6a22581612c8a6676.png">
</td>
<td>
Amazing detective/Genius<br>(Completed 2023/06/15)
</td>
<td>
Look at 2 minions. Guess which one your next opponent had last combat
for a Coin.<br>Finish in 1st place as Murloc Holmes
</td>
</tr>
<tr>
<td>
<b>Mutanas the Devourer</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/2dd5a9136566b4896ca735317b5450594197bc609fc79906eb010556652be500.png">
</td>
<td>
Insatiable<br>(Completed 2023/07/27)
</td>
<td>
Remove a friendly minion. Spit its stats onto another. Get 1
Gold.<br>Finish in 1st place as Mutanas the Devourer
</td>
</tr>
<tr>
<td>
<b>Nozdormu</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/bba4e1ff4d9cefce0fc760bcd5f9ff152284cdfccb64d01926e53afc3fac8c54.png">
</td>
<td>
Just a Matter of Time<br>(Completed 2023/09/17)
</td>
<td>
Passive Your first Refresh each turn costs (0).<br>Finish in 1st place
as Nozdormu
</td>
</tr>
<tr>
<td>
<b>Nâ€™Zoth</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/6f0671e5ca8eaf154dc205e04e0e1fbdf00b4e01be0841d7d3e9209ad72bf168.png">
</td>
<td>
Gone Fishing<br>(Completed 2023/06/21)
</td>
<td>
Passive Start the game with a 2/2 Fish that gains all your Deathrattles
in combat.<br>Finish in 1st place as Nâ€™Zoth
</td>
</tr>
<tr>
<td>
<b>Onyxia</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/c1d1d6ec0720af1a9e244eb6914b5c0bf91137ac59f8f9d0257037d90b6909da.png">
</td>
<td>
More Dots!<br>(Completed 2023/06/23)
</td>
<td>
Passive Avenge (3): Summon a 3/1 Whelp. It attacks
immediately.<br>Finish in 1st place as Onyxia
</td>
</tr>
<tr>
<td>
<b>Overlord Saurfang</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/f242e3b547fb5ce53ea1eb1db3167b92fa15c831e799b5de392bbe857bc08fee.png">
</td>
<td>
Might of the Horde<br>(Completed 2023/12/02)
</td>
<td>
Give a minion in the Tavern + /+ . (Doubles every turns!) Give a minion
in the Tavern + /+ . (Doubles in (turn, turns)!)<br>Finish in 1st place
as Overlord Saurfang
</td>
</tr>
<tr>
<td>
<b>Ozumat</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/dd50f028a96656f724020b52592ef9f4de6a8144713af427aa605c21c8a685a2.png">
</td>
<td>
Throne of the Tides<br>(Completed 2023/08/27)
</td>
<td>
Passive. Start of Combat: Summon a / Tentacle with Taunt. (Gains +1/+1
after you sell a minion!)<br>Finish in 1st place as Ozumat
</td>
</tr>
<tr>
<td>
<b>Patches the Pirate</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/8ff3c758832f1ba6473046d775b1e9c2f4e159194cdbdee3c0151ea1b0685e29.png">
</td>
<td>
Who's In Charrrrge?<br>(Completed 2024/03/03)
</td>
<td>
Get a Pirate. After you buy a Pirate, your next Hero Power costs (1)
less.<br>Finish in 1st place as Patches the Pirate
</td>
</tr>
<tr>
<td>
<b>Patchwerk</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/35aca69a6618c085bf4bf8a3f6ff8b41154a30f377c256a50634053e72cf02a2.png">
</td>
<td>
Werkin' It<br>(Completed 2023/06/10)
</td>
<td>
Passive Start with 60 Health instead of 30.<br>Finish in 1st place as
Patchwerk
</td>
</tr>
<tr>
<td>
<b>Professor Putricide</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/6b13a07802d9632a024835b0687c01dd51cedc309ff9c3fc4ad49b1dd10d7bbb.png">
</td>
<td>
Plague Perfected<br>(Completed 2023/08/07)
</td>
<td>
Craft a custom Undead. ( Creations left!)<br>Finish in 1st place as
Professor Putricide
</td>
</tr>
<tr>
<td>
<b>Pyramad</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/487af9778a9118e33f66671889fdbc755f1e95754cf8b33193d70d5bd071259e.png">
</td>
<td>
Brick House<br>(Completed 2023/09/15)
</td>
<td>
Give a minion + Health. (Gains +1 Health each turn you don't use
this!)<br>Finish in 1st place as Pyramad
</td>
</tr>
<tr>
<td>
<b>Queen Azshara</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/351a78bb20006f04421dc0da1f2bd4273dbc2b66e7365bd883efd751d87f8d2c.png">
</td>
<td>
The Water's Fine<br>(Completed 2023/07/29)
</td>
<td>
Passive. When your warband reaches 25 total Attack, begin your Naga
Conquest. Passive. When your warband reaches 25 total Attack, begin your
Naga Conquest. ( left!)<br>Finish in 1st place as Queen Azshara
</td>
</tr>
<tr>
<td>
<b>Queen Wagtoggle</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/0b0fbdc1cc12d3e681b6c536418f36b4d54418aed245d0bc6bff60a2c565c4f3.png">
</td>
<td>
Me Win Candle!<br>(Completed 2023/11/05)
</td>
<td>
Passive. Start of Combat: Give a friendly minion of each type stats
equal to their Tavern Tiers.<br>Finish in 1st place as Queen Wagtoggle
</td>
</tr>
<tr>
<td>
<b>Ragnaros</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/d2eb043afaec5a9543a9012820668e927684cb2bbb908291dd7f692f2c64148c.png">
</td>
<td>
By fire be Purged!<br>(Completed 2023/06/12)
</td>
<td>
Passive After you kill 25 enemy minions, get Sulfuras. (
left!)<br>Finish in 1st place as Ragnaros
</td>
</tr>
<tr>
<td>
<b>Rakanishu</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/2bdb3634ac6e7554e01f7750afebbc5401640b3ee9df44531d2522ac1da67d74.png">
</td>
<td>
Hot! Hot! Hot!<br>(Completed 2023/08/13)
</td>
<td>
Give a minion stats equal to your Tavern Tier.<br>Finish in 1st place as
Rakanishu
</td>
</tr>
<tr>
<td>
<b>Reno Jackson</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/ef2c29f1dacc4df898394cc80fd7ded5d0c2f3c3bf13cb9c7fff556bba5485dc.png">
</td>
<td>
Aren't I Amazing?<br>(Completed 2023/09/08)
</td>
<td>
Make a friendly minion Golden. (Once per game.)<br>Finish in 1st place
as Reno Jackson
</td>
</tr>
<tr>
<td>
<b>Rock Master Voone</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/036db476361284d598f486f0a6f070c543f08b803955d1bc97efa1175acecb50.png">
</td>
<td>
Ready to Rock!<br>(Completed 2023/06/16)
</td>
<td>
Passive. At the end of every 3 turns, get a plain copy of the left-most
card in your hand. ( (turn, turns) left!) <br>Finish in 1st place as
Rock Master Voone
</td>
</tr>
<tr>
<td>
<b>Rokara</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/f390ceaa1a0434817f9262aa0e573509a53798fe5bf721b062f01c85a1fa3a02.png">
</td>
<td>
Not Too Young To Fight<br>(Completed 2023/07/01)
</td>
<td>
Passive. After a friendly minion kills an enemy, give it +1 Attack
permanently.<br>Finish in 1st place as Rokara
</td>
</tr>
<tr>
<td>
<b>Scabbs Cutterbutter</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/42b6ce697b70a7174441ab6f8e954c74e65262e197f2657647b982f7f896a3cd.png">
</td>
<td>
You made this? I made this!<br>(Completed 2023/05/30)
</td>
<td>
Discover a plain copy of a minion from your next opponent's
warband.<br>Finish in 1st place as Scabbs Cutterbutter
</td>
</tr>
<tr>
<td>
<b>Shudderwock</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/bfc5bab0926fcbbdf2f1d167e8022f7edc8047993064edf1ecadc8aa09e5aad4.png">
</td>
<td>
O Frabjous Day!<br>(Completed 2023/11/04)
</td>
<td>
Trigger a friendly minion's Battlecry.<br>Finish in 1st place as
Shudderwock
</td>
</tr>
<tr>
<td>
<b>Silas Darkmoon</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/f6c8a988042d2838d33c981b3ad8c52068bfee24b5bad28d0fdbdb614202a9c6.png">
</td>
<td>
Greatest Show On Azeroth<br>(Completed 2023/06/25)
</td>
<td>
Passive. Darkmoon Tickets are in the Tavern! Get 3 to Discover a minion
from your Tavern Tier.<br>Finish in 1st place as Silas Darkmoon
</td>
</tr>
<tr>
<td>
<b>Sindragosa</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/ce6fca97b7ee6fbfd31aeee774f15010ed4ad27dbae46833c2397acd184bd014.png">
</td>
<td>
Icy Wings of Northrend<br>(Completed 2023/11/05)
</td>
<td>
Freeze a minion in Bob's Tavern. Passive: At the end of your turn,
Frozen minions get +2/+1.<br>Finish in 1st place as Sindragosa
</td>
</tr>
<tr>
<td>
<b>Sir Finley Mrrgglton</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/3017d5bc0d7918641ceaf1a0f98286170dd76f51640cdc0e46ea2d1d60ee81af.png">
</td>
<td>
How About a New Adventure?<br>(Completed 2023/08/31)
</td>
<td>
Passive At the start of the game, Discover a Hero Power.<br>Finish in
1st place as Sir Finley Mrrgglton
</td>
</tr>
<tr>
<td rowspan="3">
<b>Sire Denatureius</b>
</td>
<td rowspan="3">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/12c1f9737729cc2f32d414bbfd7ece06833cfa96ff030406bd1db1a78be9d7fc.png">
</td>
<td>
I AM Revendreth<br>(Completed 2023/05/28)
</td>
<td>
Passive. At the start of the game, choose one of two Quests.<br>Finish
in 1st place as Sire Denatureius
</td>
</tr>
<tr>
<td>
Case Closed<br>(Completed 2023/07/14)
</td>
<td>
Complete 10 different Quests
</td>
</tr>
<tr>
<td>
Handsomely Rewarded<br>(Completed 2023/07/14)
</td>
<td>
Earn 15 different Quest Rewards.
</td>
</tr>
<tr>
<td rowspan="2">
<b>Skycapâ€™n Kragg</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/257b9cf7c78d018570ab0fcf4501719bc58019afd4f0d531f050a903e4f8ec61.png">
</td>
<td>
I'm the Cap'n Now<br>(Completed 2023/07/11)
</td>
<td>
Gain Gold. Increases each turn. (Once per game.)<br>Finish in 1st place
as Skycapâ€™n Kragg
</td>
</tr>
<tr>
<td>
Rainy Day Fund<br>(Completed 2023/06/08)
</td>
<td>
Upgrade your Tavern Tier twice in one turn as Skycapâ€™n Kragg
</td>
</tr>
<tr>
<td>
<b>Snake Eyes</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/ab242e1c6ed6993963d7362ceefa0ec34e183a9241653f73f6b5b43525172f9a.png">
</td>
<td>
This is how I roll<br>(Completed 2023/12/09)
</td>
<td>
Roll a 6-sided die. Gain that much Gold. (Cannot be used again for that
many turns!)<br>Finish in 1st place as Snake Eyes
</td>
</tr>
<tr>
<td>
<b>Sneed</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/feb36c75696b071a11ba92b88b707cc257e78000e34d79ffb0fd6408af212984.png">
</td>
<td>
Mind if I Roll Sneed?<br>(Completed 2023/0622)
</td>
<td>
Give a minion "Deathrattle: Summon a random minion from a Tavern Tier
lower."<br>Finish in 1st place as Sneed
</td>
</tr>
<tr>
<td>
<b>Sylvanas Windrunner</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/dbe5dc9a94396a2e96ceca5d9ef7db743f269a1563538ed9541ff83a370de47d.png">
</td>
<td>
Let None Survive!<br>(Completed 2023/09/24)
</td>
<td>
Give +2/+1 to your minions that died last combat.<br>Finish in 1st place
as Sylvanas Windrunner
</td>
</tr>
<tr>
<td>
<b>Tae'thelan Bloodwatcher</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/172f7600ab278bde0612c1e675a2d9fd81b80a5799e6b141acfbb4c407a67af7.png">
</td>
<td>
Rewarding Research<br>(Completed 2023/12/20)
</td>
<td>
Passive Every third Tavern spell you buy costs (0). <br>Finish in 1st
place as Tae'thelan Bloodwatcher
</td>
</tr>
<tr>
<td>
<b>Tamsin Roame</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/24a33af73786549cfc465e34350bacaf03bcfef217e59460ba667d3ac8a0f4c7.png">
</td>
<td>
A-Roame-atherapy<br>(Completed 2023/10/22)
</td>
<td>
Start of Combat: Destroy your lowest Health minion. Give its stats to
your other minions.<br>Finish in 1st place as Tamsin Roame
</td>
</tr>
<tr>
<td>
<b>Tavish Stormpike</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/d82e87fb69bd11aec529281ccc903b4ea9e87f29e3ffdf7a54a4a57e972954d0.png">
</td>
<td>
360 No Scope!<br>(Completed 2023/05/28)
</td>
<td>
Take aim! Start of Combat: Deal damage to your target. (Doubles every
turns!) Take aim! Start of Combat: Deal damage to your target. (Doubles
in (turn, turns)!)<br>Finish in 1st place as Tavish Stormpike
</td>
</tr>
<tr>
<td>
<b>Teron Gorefiend</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/ef5a9e031e2cdcdda9fa55124294247b3502d97e888f3c752d8cddf548f46d18.png">
</td>
<td>
That was Goreious!<br>(Completed 2023/11/17)
</td>
<td>
Choose a friendly minion. Start of Combat: Destroy it. Once you have
space, resummon an exact copy.<br>Finish in 1st place as Teron Gorefiend
</td>
</tr>
<tr>
<td>
<b>Tess Greymane</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/17a12a8a7335de3807f74c8eb00fdb30e12c518b5f916eaa7507072a86087580.png">
</td>
<td>
Couldn't Do It Without You<br>(Completed 2023/11/18)
</td>
<td>
Refresh Bob's Tavern with your last opponent's warband.<br>Finish in 1st
place as Tess Greymane
</td>
</tr>
<tr>
<td rowspan="2">
<b>The Curator</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/2198929a67a341765cd3b60141f40522c6e51e1ef47d6e29c56c8ed7abad7a2b.png">
</td>
<td>
Menagerie Manager<br>(Completed 2023/09/24)
</td>
<td>
Passive. Start the game with a 1/1 Amalgam with Venomous and all minion
types.<br>Finish in 1st place as The Curator
</td>
</tr>
<tr>
<td>
LOST "DOG". CALL CURATOR<br>(Completed 2023/09/21)
</td>
<td>
End your turn with the Amalgam in play while not playing as The Curator
</td>
</tr>
<tr>
<td rowspan="2">
<b>The Great Akazamzarak</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/19e004e0d5733af2e9e6a698f6e7606d465fb8917c9f20b55b4e4318f1b2eb7c.png">
</td>
<td>
The Magician's Code<br>(Completed 2023/09/22)
</td>
<td>
Discover a Secret. Put it into the battlefield.<br>Finish in 1st place
as The Great Akazamzarak
</td>
</tr>
<tr>
<td>
Comeback King<br>(Completed 2023/09/22)
</td>
<td>
Finish in 1st place after having your Ice Block triggered as The Great
Akazamzarak
</td>
</tr>
<tr>
<td>
<b>The Jailer</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/dd00d910a25ecacf576f4a9eef0aabef472ebb063d99af7771ac5355c6a4cfa4.png">
</td>
<td>
Master of Maw<br>(Completed 2023/11/13)
</td>
<td>
Give a minion + /+ . Upgrades after nine friendly minions die. ( left!)
Give a minion + /+ . Upgrades after nine friendly minions die. (
left!)<br>Finish in 1st place as The Jailer
</td>
</tr>
<tr>
<td>
<b>The Lich King</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/d5ecee3ec0546d517e6ac31803f76126787e4d7a4c64ab0160db9d0b4f64e61e.png">
</td>
<td>
There Must Always Be a Lich King<br>(Completed 2023/07/16)
</td>
<td>
Give a minion Reborn until next turn.<br>Finish in 1st place as The Lich
King
</td>
</tr>
<tr>
<td>
<b>The Nameless One</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/b1c0549d7a441bc3753353748eb06cdb93be99ccfda77be36741b635885f41e0.png">
</td>
<td>
No Ones a Winner<br>(Completed 2024/04/27)
</td>
<td>
Passive. Start of Game: Copy your teammate's Hero Power.<br>Finish in
1st place as The Nameless One
</td>
</tr>
<tr>
<td>
<b>The Rat King</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/13de6035422fd8200c3ec5c095a1a75d92767b395e6be340633d641c84e85fc1.png">
</td>
<td>
There Must Always Be a Rat King<br>(Completed 2023/11/09)
</td>
<td>
Discover a minion of a specific minion type. Swaps type each
turn.<br>Finish in 1st place as The Rat King
</td>
</tr>
<tr>
<td>
<b>Thorim, Stormlord<b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/7ade2fe78e8170fe89a0329f3989f7797702fd5b046f6a9c1f8a6d9d00fa349b.png">
</td>
<td>
A Tier above the rest<br>(Completed 2023/01/29)
</td>
<td>
Meetings always reach quorum when they're led by Thorim. Passive. At the
start of the game, Discover a Tier 7 minion to get after you spend 65
Gold.<br>Finish in 1st place as Thorim, Stormlord
</td>
</tr>
<tr>
<td rowspan="2">
<b>Tickatus</b>
</td>
<td rowspan="2">
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/f9de22070f0cf2698497bfed225dc408d2dfa18d4a56f390497cbdb561fc0b2a.png">
</td>
<td>
Ticketmaster<br>(Completed 2023/07/21)
</td>
<td>
Passive Every 4 turns, Discover a Darkmoon Prize. ( (turn, turns)
left!)<br>Finish in 1st place as Tickatus
</td>
</tr>
<tr>
<td>
And YOU get Prize Cards!<br>(Completed 2023/08/23)
</td>
<td>
Play 16 different Darkmoon Prizes.
</td>
</tr>
<tr>
<td>
<b>Trade Prince Gallywix</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/1dc20a3d033232bea3a95e1b53659be58fc32a34cb6973da45c45e2288fba644.png">
</td>
<td>
Profit Prophet<br>(Completed 2023/11/26)
</td>
<td>
Passive After you sell a minion, get 1 extra Gold next turn.<br>Finish
in 1st place as Trade Prince Gallywix
</td>
</tr>
<tr>
<td>
<b>Vanndar Stormpike</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/f8065b689b8dfde3b8c25f19f4cb6619241e00b78c3b8ce9f549318c55ad0390.png">
</td>
<td>
Stormpike Stardom<br>(Completed 2023/11/11)
</td>
<td>
Passive Avenge (2): Give your minions +1 Health permanently.<br>Finish
in 1st place as Vanndar Stormpike
</td>
</tr>
<tr>
<td>
<b>Varden Dawngrasp</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/dd3acdbb568b6a9ad80181048b2151d287e8b751d30435bb3f301b96d08aa4db.png">
</td>
<td>
Chill Out<br>(Completed 2023/08/27)
</td>
<td>
Passive. After Bob's Tavern is Refreshed, copy his highest Tier minion
and Freeze them both.<br>Finish in 1st place as Varden Dawngrasp
</td>
</tr>
<tr>
<td>
<b>Volâ€™jin</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/684eb855c8eb91247a4e4e968ea63f94d320d0563ac64bac76d357abbae7080e.png">
</td>
<td>
Da Voodoo Shuffle<br>(Completed 2024/02/03)
</td>
<td>
Choose two minions. Swap their stats.<br>Finish in 1st place as Volâ€™jin
</td>
</tr>
<tr>
<td>
<b>Xyrella</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/427f8059ebf91ccd337c4e9b92ea8fda0059c8e87f9e431bbb6b8987671f7c1d.png">
</td>
<td>
Brightest Kid Around<br>(Completed 2023/07/09)
</td>
<td>
Choose a minion in Bob's Tavern to add to your hand. Set its stats to
2.<br>Finish in 1st place as Xyrella
</td>
</tr>
<tr>
<td>
<b>Yogg-Saron, Hopeâ€™s End</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/f1dc1cda3b54e88565c0e68cf7b6daede62e526b13ac92e52259bba6be961818.png">
</td>
<td>
Madness in the Tavern<br>(Completed 2023/11/05)
</td>
<td>
Add a random minion in Bob's Tavern to your hand. Give it
+1/+1.<br>Finish in 1st place as Yogg-Saron. Hopeâ€™s End
</td>
</tr>
<tr>
<td>
<b>Ysera</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/3958796b08f99af07900ad211c849806c3e3303885f5834ab0029ad8a02fed32.png">
</td>
<td>
A Dream Come True<br>(Completed 2024/05/01)
</td>
<td>
Passive Bob always offers an extra Dragon whenever the Tavern is
Refreshed.<br>Finish in 1st place as Ysera
</td>
</tr>
<tr>
<td>
<b>Y'Shaarj</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/9662e21c32847be6f13d7d54010ed8e33d84dfe70aefc7bda6ddd2d3b2d09bbd.png">
</td>
<td>
Rage Your Dream<br>(Completed 2023/07/16)
</td>
<td>
Start of Combat: Summon and get a random minion from your Tavern
Tier.<br>Finish in 1st place as Y'Shaarj
</td>
</tr>
<tr>
<td>
<b>Zephrys the Great</b>
</td>
<td>
<img src="https://d15f34w2p8l1cc.cloudfront.net/hearthstone/8a3ce8409e37fa1f637fbe1889b4fd47bb99b989c905af6660b2b2671a6fed1a.png">
</td>
<td>
Phenomental Cosmic Powers<br>(Completed 2023/05/27)
</td>
<td>
If you have two copies of a minion, find the third. ( (Wish, Wishes)
left!)<br>Finish in 1st place as Zephrys the Great
</td>
</tr>
</table>
]]></content>
      <categories>
        <category>æ¸¸æˆ</category>
      </categories>
      <tags>
        <tag>Hearthstone</tag>
        <tag>Battlegrounds</tag>
        <tag>game</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨riscvå¹³å°ä¼˜åŒ–SGEMM</title>
    <url>/2024/02/26/102_sgemm_riscv_cn/</url>
    <content><![CDATA[<p>æœ¬é¡¹ç›®è®°å½•äº†åœ¨riscvå¹³å°ä¸Šä¼˜åŒ–SGEMMï¼ˆå•ç²¾åº¦æµ®ç‚¹é€šç”¨çŸ©é˜µä¹˜æ³•ï¼‰çš„è¿‡ç¨‹ã€‚</p>
<span id="more"></span>
<p><img src=/images/sgemm/data/result_all.png width=70% /></p>
<p>æœ¬é¡¹ç›®è®°å½•äº†åœ¨riscvå¹³å°ä¸Šä¼˜åŒ–SGEMMï¼ˆå•ç²¾åº¦æµ®ç‚¹é€šç”¨çŸ©é˜µä¹˜æ³•ï¼‰çš„è¿‡ç¨‹ã€‚</p>
<p>é€šç”¨çŸ©é˜µä¹˜ï¼ˆ<code>General Matrix Multiplication</code>ï¼Œç®€ç§°<code>gemm</code>ï¼‰æ˜¯æ·±åº¦å­¦ä¹ æ¡†æ¶çš„æ ¸å¿ƒè®¡ç®—å•å…ƒä¹‹ä¸€ï¼Œå¹¿æ³›ç”¨äº<code>Convolution</code>ã€<code>Full connection</code>ã€<code>Matmul</code>ç­‰ç®—å­å®ç°ã€‚</p>
<p>æˆ‘æ˜¯åœ¨ <strong>å…¨å¿— Nezha D1</strong>
å¼€å‘æ¿ä¸Šè¿›è¡Œçš„å®éªŒä¸æ¢ç´¢ï¼Œ<code>version 0 - version 5</code> æ˜¯ä½¿ç”¨çš„ C
è¯­è¨€ï¼Œ<code>version 6 - version 9</code> åˆ™éƒ¨åˆ†ä½¿ç”¨äº†æ±‡ç¼–ï¼Œæ¶‰åŠåˆ°
<code>RISC-V V</code> æ‰©å±•æŒ‡ä»¤ã€‚</p>
<p>æ³¨æ„ï¼šä¸åŒäºå…¶ä»–çš„æŸäº›gemmä¼˜åŒ–å·¥ç¨‹ï¼Œåœ¨æœ¬å·¥ç¨‹ä¸­ï¼Œå…¨éƒ¨ä½¿ç”¨
<strong>è¡Œä¸»åº</strong> çš„çŸ©é˜µã€‚å› ä¸ºæˆ‘å–œæ¬¢ <strong>è¡Œä¸»åº</strong>ï¼</p>
<h1 id="é¢„å¤‡çŸ¥è¯†">é¢„å¤‡çŸ¥è¯†</h1>
<p><img src=/images/sgemm/pics/riscv.gif width=50% /></p>
<p><a href="https://riscv.org/">RISC-V</a> æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†æŒ‡ä»¤é›†æ¶æ„
(ISA)ï¼Œé€šè¿‡å¼€æ”¾åä½œå¼€å¯å¤„ç†å™¨åˆ›æ–°çš„æ–°æ—¶ä»£ã€‚</p>
<hr />
<p><img src=/images/sgemm/pics/GEMM.png width=70% /></p>
<p><a
href="https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms#Level_3">GEMM</a>
é€šç”¨çŸ©é˜µä¹˜æ³•ï¼ŒåŸºæœ¬çº¿æ€§ä»£æ•°å­ç¨‹åºä¹‹ä¸€ã€‚</p>
<hr />
<p><a
href="https://en.wikipedia.org/wiki/FLOPS">FLOPS</a>æ¯ç§’æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼Œäº¦ç§°æ¯ç§’å³°å€¼é€Ÿåº¦ï¼Œï¼ˆè‹±è¯­ï¼š<code>Floating-point operations per second</code>ï¼›ç¼©å†™ï¼š<code>FLOPS</code>ï¼‰ï¼Œå³æ¯ç§’æ‰€æ‰§è¡Œçš„æµ®ç‚¹è¿ç®—æ¬¡æ•°ã€‚ä¸€ä¸ª
<code>GFLOPS(gigaFLOPS)</code> ç­‰äºæ¯ç§’åäº¿ï¼ˆ10^9ï¼‰æ¬¡çš„æµ®ç‚¹è¿ç®—ï¼›</p>
<p>çŸ©é˜µä¹˜çš„è®¡ç®—é‡æ˜¯
<code>2 * M * N * K</code>ï¼Œè®¡ç®—é‡é™¤ä»¥è€—æ—¶å³ä¸ºå½“å‰gemmç‰ˆæœ¬çš„gflopsã€‚ -
ä¹˜ä»¥ 2 æ˜¯å› ä¸ºæ¯æ¬¡æ“ä½œåŒ…å«ä¸€æ¬¡ä¹˜æ³•å’Œä¸€æ¬¡åŠ æ³•</p>
<h1 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h1>
<p>ç›¸å…³ä»£ç ä½äº <code>./prepare/</code>ã€‚</p>
<h2 id="æµ‹è¯•äº¤å‰ç¼–è¯‘">æµ‹è¯•äº¤å‰ç¼–è¯‘</h2>
<p>æˆ‘ä½¿ç”¨çš„ <strong>å…¨å¿— Nezha D1</strong> å¼€å‘æ¿ï¼Œåœ¨<a
href="https://xuantie.t-head.cn/community/download?id=4090445921563774976">è¿™é‡Œ</a>ä¸‹è½½çš„äº¤å‰ç¼–è¯‘é“¾æ¥ã€‚</p>
<p>è¯¦ç»†æ•™ç¨‹è§<a
href="https://github.com/Zhao-Dongyu/sgemm_riscv/blob/main/prepare/README.md">readme</a></p>
<h2 id="å†…å­˜å¸¦å®½æµ‹è¯•">å†…å­˜å¸¦å®½æµ‹è¯•</h2>
<p>åˆ†åˆ«é€šè¿‡ä»¥ä¸‹å‡ ä¸ªå°å·¥ç¨‹å¯¹å¼€å‘æ¿å†…å­˜å¸¦å®½è¿›è¡Œæµ‹è¯•</p>
<ul>
<li><a
href="https://github.com/Zhao-Dongyu/sgemm_riscv/tree/main/prepare/2.memcpy_bandwidth_test">2.memcpy_bandwidth_test</a></li>
<li><a
href="https://github.com/Zhao-Dongyu/sgemm_riscv/tree/main/prepare/3.flw_bandwidth_test">3.flw_bandwidth_test</a></li>
<li><a
href="https://github.com/Zhao-Dongyu/sgemm_riscv/tree/main/prepare/4.vlw_bandwidth_test">4.vlw_bandwidth_test</a></li>
</ul>
<p><img src=/images/sgemm/prepare/imgs/memory_bandwidth_test.png width=70% /></p>
<h2 id="rooflineæ¨¡å‹">rooflineæ¨¡å‹</h2>
<p><a href="https://en.wikipedia.org/wiki/Roofline_model">Roofline</a>
æå‡ºäº†ä½¿ç”¨
<code>Operational Intensity</code>ï¼ˆè®¡ç®—å¼ºåº¦ï¼‰è¿›è¡Œå®šé‡åˆ†æçš„æ–¹æ³•ï¼Œå¹¶ç»™å‡ºäº†æ¨¡å‹åœ¨è®¡ç®—å¹³å°ä¸Šæ‰€èƒ½è¾¾åˆ°ç†è®ºè®¡ç®—æ€§èƒ½ä¸Šé™å…¬å¼ã€‚</p>
<p>æ ¹æ®<a href="https://zhuanlan.zhihu.com/p/474684731">OpenPPL å…¬å¼€è¯¾ |
RISC-V æŠ€æœ¯è§£æ</a>æ‰€è¯´ - <code>D1</code>çš„ç®—åŠ›å¯è¾¾
<code>4 GFlops(@1GHz)</code> - Memory : <code>2.727 GB/s</code> (DDR3
792 MHz)ã€‚ -
è™½ç„¶æˆ‘æµ‹å‡ºæ¥æœ€é«˜æ˜¯<code>2.592 GB/s</code>ï¼Œå¯èƒ½å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Ÿ -
å•†æ±¤è¿˜æ˜¯è¦ç›¸ä¿¡ä¸€ä¸‹çš„ï¼Œæš‚æ—¶ä»¥ä»–çš„ä¸ºå‡†å§</p>
<p><img src=/images/sgemm/pics/roofline.png width=70% /></p>
<h1 id="sgemmä¼˜åŒ–">sgemmä¼˜åŒ–</h1>
<p>ç›¸å…³ä»£ç ä½äº <code>./sgemm/</code>ã€‚</p>
<h2 id="ä½¿ç”¨è¯´æ˜">ä½¿ç”¨è¯´æ˜</h2>
<p>ä»¥ <code>step0</code> ä¸ºä¾‹ï¼Œä½ éœ€è¦å…ˆç¼–è¾‘ Makefile
ï¼Œé…ç½®è‡ªå·±çš„äº¤å‰ç¼–è¯‘é“¾ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> sgemm/step0/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">adb push test_bl_sgemm_step0.x ./.</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">adb shell <span class="string">&#x27;./test_bl_sgemm_step0.x&#x27;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="version-0-naiveç‰ˆæœ¬">Version 0: naiveç‰ˆæœ¬</h2>
<p>è¿™ä¸ªç‰ˆæœ¬æ€è·¯åœ¨æˆ‘çœ‹æ¥æ˜¯<strong>æœ€ç›´è§‚</strong>çš„ï¼Œæ¯•ç«Ÿæˆ‘å½“æ—¶å°±æ˜¯è¿™ä¹ˆ<strong>å­¦ä¹ </strong>ã€<strong>ç†è§£</strong>å’Œ<strong>è®¡ç®—</strong>çŸ©é˜µä¹˜æ³•çš„:
&gt; A çš„ä¸€è¡Œä¹˜ä»¥ B çš„ä¸€åˆ—å¾—åˆ° C çš„ä¸€ä¸ªå…ƒç´ ã€‚</p>
<p><img src=/images/sgemm/data/result_0.png width=70% /></p>
<p><img src=/images/sgemm/pics/step0.gif width=70% /></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i ++ ) &#123;              <span class="comment">// Start 2-th loop</span></span><br><span class="line">    <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j ++ ) &#123;          <span class="comment">// Start 1-nd loop</span></span><br><span class="line">        <span class="keyword">for</span> ( p = <span class="number">0</span>; p &lt; k; p ++ ) &#123;      <span class="comment">// Start 0-st loop</span></span><br><span class="line">            C( i, j ) += A( i, p ) * B( p, j );</span><br><span class="line">        &#125;                                 <span class="comment">// End   0-th loop</span></span><br><span class="line">    &#125;                                     <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                         <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘è®¤ä¸º<code>version 0</code>éå¸¸å¥‘åˆçš„è§£é‡Šäº† <span
class="math inline">\(C_{mn} = \sum_{k=1}^{K} A_{mk}B_{kn}\)</span>
è¿™ä¸ªå…¬å¼ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸ªç‰ˆæœ¬ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼šåœ¨ç†è®ºç®—åŠ›ä¸º <code>4 GFLOPS</code>
çš„å¹³å°ä»…å‘æŒ¥å‡ºæœ€å¤§ <code>0.03 GFLOPS</code>
çš„è®¡ç®—æ€§èƒ½ã€‚è¿™æ˜¯å› ä¸º<strong>å¯¹äºçŸ©é˜µBçš„è®¿é—®ï¼Œcacheå‘½ä¸­ç‡æä½ï¼Œå³ã€Œç©ºé—´å±€éƒ¨æ€§å¾ˆå·®ã€</strong>ã€‚æ•´ä¸ªè®¡ç®—ä¸‹æ¥ï¼Œç›¸å½“äºè®¿é—®çŸ©é˜µBçš„æ¬¡æ•°å¤šäº†å¾ˆå¤šå¾ˆå¤šæ¬¡ã€‚</p>
<p>å¯¹äºå¤šç»´æ•°ç»„çš„å…ƒç´ å°½é‡èƒ½æŒ‰ç…§é¡ºåºè®¿é—®ã€‚è¿™æ ·å¯ä»¥æ”¹å–„å†…å­˜è®¿é—®çš„ç©ºé—´å±€éƒ¨æ€§ï¼Œå¯¹ç¼“å­˜æ›´åŠ å‹å¥½ã€‚</p>
<p>å¦å¤–ï¼Œè§‚å¯Ÿåˆ°éšç€å°ºå¯¸çš„å¢åŠ ï¼Œæ€§èƒ½æœ‰è¾ƒå¤§çš„æŠ–åŠ¨ã€‚åˆ†ææ•°æ®å¯ä»¥çŸ¥é“ï¼šå½“<code>m=n=k</code>ä¸º
128 164 192 228 256 288 320 352 384 æ—¶æ€§èƒ½éƒ½å¾ˆå·®ã€‚è¿™å‡ ä¸ªæ•°ç›¸å·®32ï¼Œ32 *
4(<code>sizeof(float)</code>) = 128 Bã€‚</p>
<p>çŒœæµ‹æ€§èƒ½æŠ–åŠ¨ä¸<code>cacheline</code>ä»¥åŠ<code>ç¡¬ä»¶é¢„å–</code>æœ‰å…³â€”â€”
cacheline = 64Bï¼Œcache miss
åï¼Œç¡¬ä»¶é¢„å–å³<code>HWPrefetcher</code>ï¼Œå¤šè¯» 1 ä¸ª cachelineã€‚</p>
<h2 id="version-1-å¾ªç¯äº¤æ¢ç‰ˆæœ¬">Version 1: å¾ªç¯äº¤æ¢ç‰ˆæœ¬</h2>
<p>é‡å¤ä½¿ç”¨Cacheä¸­çš„æ•°æ®æ˜¯æœ€åŸºæœ¬çš„é«˜æ•ˆä½¿ç”¨Cacheæ–¹æ³•ã€‚å¯¹äºå¤šå±‚åµŒå¥—å¾ªç¯ï¼Œå¯ä»¥é€šè¿‡äº¤æ¢ä¸¤ä¸ªåµŒå¥—çš„å¾ªç¯ï¼ˆ<code>loop interchange</code>ï¼‰ã€é€†è½¬å¾ªç¯è¿­ä»£æ‰§è¡Œçš„é¡ºåºï¼ˆ<code>loop reversal</code>ï¼‰ã€å°†ä¸¤ä¸ªå¾ªç¯ä½“åˆå¹¶æˆä¸€ä¸ªå¾ªç¯ä½“ï¼ˆ<code>loop fusion</code>ï¼‰ã€å¾ªç¯æ‹†åˆ†ï¼ˆ<code>loop distribution</code>ï¼‰ã€å¾ªç¯åˆ†å—ï¼ˆ<code>loop tiling</code>ï¼‰ã€<code>loop unroll and jam</code>ç­‰å¾ªç¯å˜æ¢æ“ä½œã€‚</p>
<p>é€‰æ‹©é€‚å½“çš„å¾ªç¯å˜æ¢æ–¹å¼ï¼Œæ—¢èƒ½ä¿æŒç¨‹åºçš„è¯­ä¹‰ï¼Œåˆèƒ½æ”¹å–„ç¨‹åºæ€§èƒ½ã€‚</p>
<p><img src=/images/sgemm/data/result_1.png width=70% /></p>
<p><img src=/images/sgemm/pics/step1.gif width=70% /></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i ++ ) &#123;              <span class="comment">// Start 2-th loop</span></span><br><span class="line">    <span class="keyword">for</span> ( p = <span class="number">0</span>; p &lt; k; p ++ ) &#123;          <span class="comment">// Start 1-st loop</span></span><br><span class="line">        <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j ++ ) &#123;      <span class="comment">// Start 0-nd loop</span></span><br><span class="line">            C( i, j ) += A( i, p ) * B( p, j );</span><br><span class="line">        &#125;                                 <span class="comment">// End   0-th loop</span></span><br><span class="line">    &#125;                                     <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                         <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p>ç›¸è¾ƒäº<code>version 0</code>ï¼Œ<code>version 1</code>å¯¹äºçŸ©é˜µBçš„æ“ä½œï¼Œç©ºé—´å±€éƒ¨æ€§è¾ƒå¥½ï¼Œæ€§èƒ½æœ‰è¾ƒå¤§æå‡ï¼ˆå°¤å…¶æ˜¯å¯¹äºå°ºå¯¸è¾ƒå¤§çš„æƒ…å†µï¼Œè€Œåœ¨
m = n = k &lt;= 68 æ—¶ï¼Œç‰ˆæœ¬0çš„æ•ˆç‡æ›´é«˜ï¼‰ã€‚</p>
<p>è°ƒæ•´m,n,kçš„é¡ºåºï¼Œå¯¹ç»“æœæ²¡æœ‰å½±å“(å³ä¿æŒç¨‹åºçš„è¯­ä¹‰)ï¼Œä½†æ˜¯å¯ä»¥å½±å“æ€§èƒ½ã€‚
æµ‹è¯•ä¸åŒå¾ªç¯é¡ºåºçš„æ€§èƒ½ï¼ˆå…¨å¿—Nezha D1å¹³å°ï¼Œä»¥m=n=k=512ä¸ºä¾‹ï¼‰</p>
<table>
<thead>
<tr class="header">
<th>å¾ªç¯é¡ºåº</th>
<th>GFLOPS</th>
<th>åˆ†æ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MNK</td>
<td>0.012</td>
<td>è®¿é—®Bçš„cache missé«˜</td>
</tr>
<tr class="even">
<td>MKN</td>
<td>0.180</td>
<td></td>
</tr>
<tr class="odd">
<td>NMK</td>
<td>0.012</td>
<td>è®¿é—®Bçš„cache missé«˜</td>
</tr>
<tr class="even">
<td>NKM</td>
<td>0.009</td>
<td>è®¿é—®Açš„cache missé«˜</td>
</tr>
<tr class="odd">
<td>KMN</td>
<td>0.165</td>
<td></td>
</tr>
<tr class="even">
<td>KNM</td>
<td>0.009</td>
<td>è®¿é—®Açš„cache missé«˜</td>
</tr>
</tbody>
</table>
<p>ä½†æ˜¯ï¼Œ<code>version 1</code>
çš„ç¡¬ä»¶ä½¿ç”¨ç‡ä»ç„¶å¾ˆä½ï¼Œç»§ç»­æƒ³åŠæ³•ä¼˜åŒ–ã€‚</p>
<h2 id="version-2-åˆ†å—ç‰ˆæœ¬">Version 2: åˆ†å—ç‰ˆæœ¬</h2>
<p><img src=/images/sgemm/data/result_2.png width=70% /></p>
<p><img src=/images/sgemm/pics/step2.gif width=70% /></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i += DGEMM_MR ) &#123;          <span class="comment">// Start 2-nd loop</span></span><br><span class="line">    <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j += DGEMM_NR ) &#123;        <span class="comment">// Start 1-st loop</span></span><br><span class="line">        AddDot_4x4_opt( k, &amp;A( i, <span class="number">0</span> ), lda, &amp;B( <span class="number">0</span>, j ), ldb, &amp;C( i, j ), ldc );</span><br><span class="line">    &#125;                                          <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                              <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p><img src=/images/sgemm/pics/gemm_block.png width=70% /></p>
<p>ä¸ºäº†é¿å…å¤šä½™çš„ cache æ¢å…¥æ¢å‡ºï¼Œäºæ˜¯è¿›è¡Œåˆ†å—å¤„ç†ã€‚<a
href="https://zhuanlan.zhihu.com/p/342923482">æµ…è°ˆåˆ†å—çŸ©é˜µä¼˜åŒ–æ–¹æ³•ä¸ºä»€ä¹ˆæœ‰ç”¨</a>ä¸€æ–‡è®²çš„æŒºå¥½ï¼Œå»ºè®®é˜…è¯»å­¦ä¹ ã€‚</p>
<p>ç‰ˆæœ¬2è¿›è¡Œäº†åˆ†å—æ“ä½œåï¼Œæ€§èƒ½ä»ç„¶ä¸ç†æƒ³ï¼Œè¿™æ˜¯å› ä¸ºï¼Œè¿™ä¸ªç‰ˆæœ¬åªæ˜¯è¡¨é¢é€»è¾‘ä¸Šå®ç°äº†åˆ†å—ï¼Œå—å†…çš„è®¡ç®—è¿˜æœ‰ä¸€äº›å°æŠ€å·§æ²¡æœ‰åº”ç”¨ã€‚</p>
<h2 id="version-3-åˆ†å—ä¼˜åŒ–ç‰ˆæœ¬">Version 3: åˆ†å—ä¼˜åŒ–ç‰ˆæœ¬</h2>
<p><img src=/images/sgemm/data/result_3.png width=70% /></p>
<p><img src=/images/sgemm/pics/step3.gif width=70% /></p>
<p>å¢åŠ äº†AddDot_4x4_opt</p>
<p>åœ¨<a
href="https://github.com/flame/blislab/blob/master/tutorial.pdf">BLISlab-tutorial</a>ä¸­æåˆ°äº†å‡ ä¸ªå°æŠ€å·§ï¼š</p>
<ul>
<li>å¾ªç¯å±•å¼€ 2.4.2 Loop unrolling
<ul>
<li>Updating loop index i and the pointer cp every time through the
inner loop creates considerable overhead. For this reason, a compiler
will perform loop unrolling.</li>
</ul></li>
<li>å¯„å­˜å™¨ç¼“å­˜ 2.4.3 Register variables
<ul>
<li>Notice that computation can only happen if data is stored in
registers. A compiler will automatically transform code so that the
intermediate steps that place certain data in registers is
inserted.</li>
</ul></li>
</ul>
<p>ä½¿ç”¨äº†è¿™ä¸ªæŠ€å·§åï¼Œè¿™ä¸ªç‰ˆæœ¬æ€§èƒ½æœ‰äº†å¤§å¹…åº¦çš„æå‡ï¼</p>
<p>ç„¶è€Œï¼Œè¿™ä¸ªç‰ˆæœ¬å¯¹äºå°ºå¯¸è¾ƒå¤§çš„çŸ©é˜µï¼Œæ€§èƒ½ä»ç„¶æ¯”è¾ƒä½ã€‚æŸ¥æ‰¾åŸå› ï¼Œæ¯”å¦‚è®¿é—®B[0,0],
B[0,1], B[0,2],
B[0,3]åï¼Œè®¿é—®B[1,0]çš„æ—¶å€™ï¼Œå½“å°ºå¯¸è¾ƒå¤§çš„æ—¶å€™å¿…å®š<code>cache miss</code>ã€‚å› æ­¤ï¼Œå¦‚æœèƒ½æå‰æŠŠæ•°æ®é‡æ–°æ’åˆ—å°±å¥½äº†ã€‚</p>
<h2 id="version-4-b-prepackç‰ˆæœ¬">Version 4: B prepackç‰ˆæœ¬</h2>
<p><img src=/images/sgemm/data/result_4.png width=70% /></p>
<p><img src=/images/sgemm/pics/step4.gif width=70% /></p>
<p>æˆ‘é»˜è®¤çŸ©é˜µBæ˜¯<strong>å‚æ•°</strong>ï¼Œæ‰€ä»¥å¯ä»¥æå‰è¿›è¡Œ<code>pack</code>æ“ä½œã€‚ç‰ˆæœ¬4å¯¹çŸ©é˜µBè¿›è¡Œäº†<code>prepack</code>ï¼Œæ€§èƒ½æ›´è¿›ä¸€æ­¥ï¼</p>
<p>æ€§èƒ½æå‡çš„åŸå› å¾ˆæ˜æ˜¾ï¼šè®¿é—®çŸ©é˜µ B çš„ <code>cache miss</code>
æ˜æ˜¾å‡å°‘äº†ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ·±åˆ»æ„è¯†åˆ°æ¨¡å‹æ¨ç†å‰å¯¹ç¥ç»ç½‘ç»œæƒé‡åš<code>prepack</code>çš„é‡è¦æ€§ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“å°ºå¯¸æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œæ€§èƒ½è¿˜æ˜¯æœ‰æ‰€ä¸‹é™çš„ã€‚è¿™åº”è¯¥æ˜¯å¯¹çŸ©é˜µAè®¿é—®çš„
<code>cache miss</code> æ¯”è¾ƒå¤šã€‚è¦å¯¹Aåš <code>pack</code> å—ï¼Ÿ</p>
<p>æˆ‘é»˜è®¤çŸ©é˜µAæ˜¯<strong>è¾“å…¥</strong>ï¼Œå› æ­¤å¯¹Aåš <code>pack</code>
çš„è¯æ˜¯ä¸èƒ½æå‰åšçš„ï¼Œæ˜¯è¦ç®—åœ¨æ•´ä½“æ—¶é—´å†…çš„ã€‚é‚£ä¹ˆï¼Œæœ‰å¿…è¦å—ï¼Ÿ</p>
<h2 id="version-5-a-pack-b-prepackç‰ˆæœ¬">Version 5: A pack &amp; B
prepackç‰ˆæœ¬</h2>
<p><img src=/images/sgemm/data/result_5.png width=70% /></p>
<p><img src=/images/sgemm/pics/step5.gif width=70% /></p>
<p>åœ¨ç‰ˆæœ¬4çš„åŸºç¡€ä¸Šï¼Œç‰ˆæœ¬5å¯¹çŸ©é˜µAè¿›è¡Œäº†<code>pack</code></p>
<p>è¿™é‡Œé»˜è®¤çŸ©é˜µAæ˜¯<strong>è¾“å…¥</strong>ï¼Œæ‰€ä»¥éœ€è¦åœ¨è®¡ç®—è¿‡ç¨‹ä¸­è¿›è¡Œ<code>pack</code>æ“ä½œï¼Œè¿™ä¸ªè€—æ—¶æ˜¯è¦æ”¾åœ¨è®¡æ—¶é‡Œé¢çš„ã€‚</p>
<p>ç»“æœè¿˜æ˜¯è®©äººæ¬£å–œçš„ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å°ºå¯¸çŸ©é˜µä¸Šï¼Œå–å¾—äº†è¿›ä¸€æ­¥çš„æ€§èƒ½æå‡ã€‚</p>
<p>æˆ‘æœ¬æ¥æ˜¯è¯•ä¸€è¯•çš„å¿ƒæ€åšäº†è¿™ä¸ªå°è¯•ï¼Œæ¯•ç«Ÿè¿™ä¸ªæ“ä½œä¼šå¤šè¯»ä¸€é<code>A</code>ä»¥åŠå†™ä¸€é<code>packA</code>ã€‚çœ‹æ¥æ¥ä¸‹æ¥ä¸»è¦å°±æ˜¯ä¸<code>cache miss</code>ä½œæ–—äº‰äº†ã€‚</p>
<p>ç›®å‰æ€è·¯æ–¹é¢çš„ä¼˜åŒ–åŸºæœ¬åˆ°å¤´äº†ï¼Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­åšä¸€äº›<code>preload</code>æ˜¯å€¼å¾—å°è¯•ä¸€ä¸‹çš„ã€‚</p>
<p>æ¥ä¸‹æ¥ä¸Šæ±‡ç¼–ï¼Œæå‘é‡è®¡ç®—ï¼Œä»¥åŠåœ¨æ±‡ç¼–é‡Œé¢åš<code>preload</code>ã€‚</p>
<h2 id="version-6-æ±‡ç¼–ç‰ˆæœ¬">Version 6: æ±‡ç¼–ç‰ˆæœ¬</h2>
<p><img src=/images/sgemm/data/result_6.png width=70% /></p>
<p>ç®€è¦è¯´æ˜ï¼šAæ²¡æœ‰<code>pack</code>ï¼ŒBè¿›è¡Œäº†16ä¸ªæ•°çš„<code>prepack</code>ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i += DGEMM_MR ) &#123;       <span class="comment">// Start 2-nd loop</span></span><br><span class="line">    <span class="type">int</span> mb = DGEMM_MR;</span><br><span class="line">    <span class="keyword">if</span>((m - i) &lt; DGEMM_MR) mb = m - i; </span><br><span class="line">    <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j += DGEMM_NR ) &#123;   <span class="comment">// Start 1-st loop</span></span><br><span class="line">        <span class="type">int</span> nb = DGEMM_NR;</span><br><span class="line">        <span class="keyword">if</span>((n - j) &lt; DGEMM_NR) nb = n - j; </span><br><span class="line">        RvvSgemm4x16(   nb,                 <span class="comment">// nr &lt;= 16, a0</span></span><br><span class="line">                        mb,                 <span class="comment">// mr &lt;= 4,  a1</span></span><br><span class="line">                        k,                  <span class="comment">// astride = k*sizeof(float), a2</span></span><br><span class="line">                        &amp;A[i * k],          <span class="comment">// mr * k,   a3</span></span><br><span class="line">                        &amp;packB[j * k],      <span class="comment">// k * 16,   a4</span></span><br><span class="line">                        &amp;C( i, j ),         <span class="comment">// mr * nr,  a5</span></span><br><span class="line">                        n * <span class="keyword">sizeof</span>(<span class="type">float</span>),  <span class="comment">// Len(N) * sizeof(float), a6</span></span><br><span class="line">                        bias</span><br><span class="line">                    );</span><br><span class="line">    &#125;                                       <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                           <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p>å…³äº <code>rvv</code> æŒ‡ä»¤çš„ä½¿ç”¨ï¼Œæˆ‘è®¤ä¸º<code>vsetvli</code>
æ˜¯çµé­‚ï¼Œ<code>vfmacc.vf</code> æ˜¯ä¸»åŠ›ã€‚</p>
<p>å…³äºè¿™äº›å†…å®¹ï¼Œæˆ‘ä»<a
href="https://zhuanlan.zhihu.com/p/474684731">OpenPPL å…¬å¼€è¯¾ | RISC-V
æŠ€æœ¯è§£æ</a>å­¦åˆ°äº†å¾ˆå¤šï¼Œä»–ä»¬å¯çœŸä¸“ä¸šå•Šï¼å»ºè®®ç†è®ºæŒ‡å¯¼å’ŒçŸ¥è¯†ç‚¹å­¦ä¹ å»ä»–ä»¬é‚£é‡Œå­¦ï¼Œå‘
<code>OpenPPL</code> è‡´æ•¬ï¼</p>
<p>è‡³äºæ±‡ç¼–ç®—å­ï¼Œæ±‡ç¼–é‡Œé¢çš„å°ç»†èŠ‚å°±å¤šäº†ï¼Œå¼ºçƒˆåæ§½ï¼š<strong>å†™æ±‡ç¼–çœŸçƒ¦äººå•Šï¼å°¤å…¶æ˜¯
debug è¿‡ç¨‹ï¼Œå¾ˆæŠ˜ç£¨äººã€‚</strong>
æˆ‘ä¸Šæ¬¡å†™æ±‡ç¼–è¿˜æ˜¯æœ¬ç§‘ä¸Šè¯¾çš„æ—¶å€™ï¼Œé‡æ–°æ‹¾èµ·è¿˜æ˜¯æœ‰ä¸€äº›æ–°å¥‡å’Œå…´å¥‹çš„ï¼Œè€Œä¸”èƒ½å¤Ÿéå¸¸ç»†ç²’åº¦çš„æ§åˆ¶ç®—å­æ‰§è¡Œï¼Œæˆå°±æ„Ÿè¿˜æ˜¯å¾ˆå¤§çš„ã€‚</p>
<p>å…³äºæ±‡ç¼–æ–‡ä»¶å…·ä½“æ€ä¹ˆå®ç°çš„ï¼Œæˆ‘è®¤ä¸ºæœ€å¿«çš„æ–¹å¼å°±æ˜¯å»çœ‹æ±‡ç¼–ä»£ç ã€‚è¿™é‡Œå°±ä¸å¤šåšè§£é‡Šäº†</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç‰ˆæœ¬æ•ˆæœå¾ˆå·®ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿåˆæ˜¯
<strong>å¾ªç¯é¡ºåº</strong> çš„é—®é¢˜ã€‚</p>
<h2 id="version-7-æ±‡ç¼–ç‰ˆæœ¬-è°ƒæ¢å¾ªç¯é¡ºåº">Version 7: æ±‡ç¼–ç‰ˆæœ¬
è°ƒæ¢å¾ªç¯é¡ºåº</h2>
<p><img src=/images/sgemm/data/result_7.png width=70% /></p>
<p>ç®€è¦è¯´æ˜ï¼šAæ²¡æœ‰<code>pack</code>ï¼ŒBè¿›è¡Œäº†16ä¸ªæ•°çš„<code>prepack</code>ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; n; j += DGEMM_NR ) &#123;       <span class="comment">// Start 2-st loop</span></span><br><span class="line">    <span class="type">int</span> nb = DGEMM_NR;</span><br><span class="line">    <span class="keyword">if</span>((n - j) &lt; DGEMM_NR) nb = n - j; </span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; m; i += DGEMM_MR ) &#123;   <span class="comment">// Start 1-nd loop</span></span><br><span class="line">        <span class="type">int</span> mb = DGEMM_MR;</span><br><span class="line">        <span class="keyword">if</span>((m - i) &lt; DGEMM_MR) mb = m - i; </span><br><span class="line">        RvvSgemm4x16(   nb,                 <span class="comment">// nr &lt;= 16, a0</span></span><br><span class="line">                        mb,                 <span class="comment">// mr &lt;= 4,  a1</span></span><br><span class="line">                        k,                  <span class="comment">// astride = k*sizeof(float), a2</span></span><br><span class="line">                        &amp;A[i * k],          <span class="comment">// mr * k,   a3</span></span><br><span class="line">                        &amp;packB[j * k],      <span class="comment">// k * 16,   a4</span></span><br><span class="line">                        &amp;C( i, j ),         <span class="comment">// mr * nr,  a5</span></span><br><span class="line">                        n * <span class="keyword">sizeof</span>(<span class="type">float</span>),  <span class="comment">// Len(N) * sizeof(float), a6</span></span><br><span class="line">                        bias</span><br><span class="line">                    );</span><br><span class="line">    &#125;                                       <span class="comment">// End   1-st loop</span></span><br><span class="line">&#125;                                           <span class="comment">// End   2-nd loop</span></span><br></pre></td></tr></table></figure>
<p>è°ƒæ¢äº†å¾ªç¯çš„æ¬¡åºï¼Œå…ˆnæ–¹å‘åmæ–¹å‘ï¼Œæ€§èƒ½å¤§å¤§æå‡ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¤§å°ºå¯¸çŸ©é˜µçš„æ€§èƒ½è¿˜ä¸æ˜¯å¾ˆå¥½ã€‚ç©¶å…¶åŸå› ï¼Œè¿˜æ˜¯åœ¨è®¿å­˜ä¸Šã€‚å¤§å°ºå¯¸çŸ©é˜µçš„è®¡ç®—åœ¨<code>roofline</code>æ¨¡å‹é‡Œå±äºæ˜¯<strong>è®¡ç®—å¯†é›†å‹</strong>ï¼Œç†æƒ³æƒ…å†µæ˜¯<strong>è®¡ç®—çš„æ—¶é—´</strong>å’Œ<strong>è®¿å­˜çš„æ—¶é—´</strong>å°½å¯èƒ½é‡å ï¼Œè€Œç°åœ¨åŸºæœ¬æ˜¯èŠ±å¾ˆå¤šæ—¶é—´åœ¨è®¿å­˜äº†ï¼ˆåˆæ˜¯å› ä¸º<code>cache miss</code>ï¼ï¼‰ã€‚</p>
<h2 id="version-8-æ±‡ç¼–ç‰ˆæœ¬-åŠ å…¥preload">Version 8: æ±‡ç¼–ç‰ˆæœ¬
åŠ å…¥preload</h2>
<p><img src=/images/sgemm/data/result_8.png width=70% /></p>
<p>ç®€è¦è¯´æ˜ï¼šAæ²¡æœ‰<code>pack</code>ï¼ŒBè¿›è¡Œäº†16ä¸ªæ•°çš„<code>prepack</code>ï¼Œåšäº†
<code>preload</code> æ“ä½œã€‚</p>
<p>æ€§èƒ½ç›¸å¯¹çˆ†ç‚¸ï¼æœ€é«˜è¾¾åˆ°äº† <code>2.212 GFLOPS</code>ã€‚</p>
<p>æ ¸å¿ƒæ“ä½œï¼š <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vfmacc.vf v16,  ft0, v0</span><br><span class="line">vlw.v v4, (bp0)         # b0&#x27;-&gt;v4</span><br><span class="line">flw fs4, 384(bp0)       # pre-load B</span><br><span class="line">addi bp0,bp0,64</span><br><span class="line">vfmacc.vf v20,  ft1, v0</span><br></pre></td></tr></table></figure> åœ¨ <code>vfmacc.vf</code> ä¹‹é—´åŠ å…¥ä¸€äº›
<code>load</code>
æ“ä½œï¼ŒæŠŠä¹‹åè¦ç”¨åˆ°çš„æ•°æ®æå‰<code>load</code>åˆ°<code>cache</code>ä¸­ï¼Œå¯ä»¥å¤§å¤§é™ä½
<code>cache miss</code>ã€‚</p>
<p>æˆ‘æœ€å¼€å§‹å¾ˆç–‘æƒ‘â€”â€”è¿™æ ·çœ‹ä»£ç æ˜æ˜ä¹Ÿæ˜¯é¡ºåºè®¡ç®—ï¼Œæ€ä¹ˆåšåˆ°<strong>è®¡ç®—çš„æ—¶é—´</strong>å’Œ<strong>è®¿å­˜çš„æ—¶é—´</strong>é‡å çš„å‘¢ï¼Ÿç›´åˆ°åæ¥äº†è§£åˆ°<code>cacheline</code>çš„åŸç†æ‰æ˜ç™½è¿™é‡Œçš„ç²¾é«“ï¼Œæœç„¶åŸºç¡€çŸ¥è¯†å¾ˆé‡è¦å•Šã€‚</p>
<h2 id="version-9-æ±‡ç¼–ç‰ˆæœ¬-aåšpack">Version 9: æ±‡ç¼–ç‰ˆæœ¬ Aåšpack</h2>
<p><img src=/images/sgemm/data/result_9.png width=70% /></p>
<p>æŒ‰ç…§ä¹‹å‰çš„ç»éªŒï¼Œä¹Ÿå°è¯•å¯¹ çŸ©é˜µA åšäº†ä¸€ä¸‹
<code>pack</code>ï¼Œå‡ºä¹æ„æ–™çš„æ˜¯ç»“æœä¸æ˜¯å¾ˆå¥½ã€‚ç¨å¾®åˆ†æäº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯è¿™ä¸ªç‰ˆæœ¬çš„æ±‡ç¼–å¯¹
çŸ©é˜µA çš„<code>preload</code>å†™å¾—ä¸æ˜¯å¾ˆå¥½ã€‚</p>
<p>ä¸Šä¸ªç‰ˆæœ¬è™½ç„¶å¯¹Aæ²¡æœ‰packï¼Œä½†æ˜¯å¯¹4æ’çš„Aéƒ½æœ‰<code>preload</code>ï¼Œæ‰€ä»¥ä¹Ÿç®—æ˜¯è§£å†³äº†çŸ©é˜µAçš„
<code>cache miss</code>çš„ç—›ç‚¹å§ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¦æƒ³ç»§ç»­ä¼˜åŒ–è¿™ä¸ªç®—å­ï¼Œåç»­è¦åšçš„äº‹æƒ…è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚åœ¨æ±‡ç¼–é‡Œé¢é‡æ’æµæ°´çº¿ã€‚</p>
<p>åœ¨<a href="https://zhuanlan.zhihu.com/p/474684731">OpenPPL å…¬å¼€è¯¾ |
RISC-V æŠ€æœ¯è§£æ</a>ä¸­ä¹Ÿæåˆ°ï¼Œå¦‚æœä½¿ç”¨ vf æŒ‡ä»¤ï¼Œèƒ½å¤Ÿè¾¾åˆ°å®ƒç†è®ºå³°å€¼çš„
80%ï¼Œå³
4*80%ï¼Œ3.2GFLOPsã€‚æˆ‘ç°åœ¨åªæœ‰<code>2.121 GFLOPS</code>ï¼Œç†è®ºä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤§ä¼˜åŒ–ç©ºé—´çš„ã€‚</p>
<p>å¦å¤–ï¼Œ
RVVç›®å‰ç”¨çš„æ˜¯<code>0.7.1</code>ç‰ˆæœ¬ï¼Œæ„Ÿè§‰RVVçš„æŒ‡ä»¤ä¼˜åŒ–è¿˜æ˜¯æœ‰å¾ˆå¤šå·¥ä½œè¦åšï¼Œæ¯”å¦‚ï¼Œç›®å‰é‡åˆ°æœ€ä¸¥é‡çš„<code>vlw</code>æ•ˆç‡ä½çš„é—®é¢˜ã€‚</p>
<p>æ€»ä¹‹ï¼Œåšè¿™äº›å·¥ä½œè®©æˆ‘ä»å¾ˆå¤šå¤§ä½¬é‚£é‡Œå­¦åˆ°äº†å¾ˆå¤šçŸ¥è¯†ï¼Œéå¸¸æ„Ÿè°¢ã€‚åŒæ—¶ä¹Ÿå¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©åˆ°æ›´å¤šçš„äººã€‚</p>
<h1 id="è‡´è°¢">è‡´è°¢</h1>
<ul>
<li><p><a href="https://github.com/flame/blislab">BLISlab: A Sandbox for
Optimizing GEMM</a></p>
<p>è¿™ä¸ªé¡¹ç›®è®©æˆ‘äº†è§£äº†å¦‚ä½•ä¼˜åŒ–GEMMã€‚</p></li>
<li><p><a
href="https://github.com/surez-ok/blislab_riscv">riscvå¹³å°ä¼˜åŒ–çŸ©é˜µä¹˜(åŸºäºblislabä¼˜åŒ–å®è·µ)</a></p>
<p>æˆ‘åŸºäºè¿™ä¸ªé¡¹ç›®è¿›è¡Œäº†å®éªŒå’Œæ¢ç´¢ã€‚</p></li>
<li><p>æ„Ÿè°¢ä¸å¤§ä½¬çš„æŒ‡å¯¼ã€‚</p></li>
</ul>
<h1 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h1>
<p><a href="https://zhuanlan.zhihu.com/p/474684731">OpenPPL å…¬å¼€è¯¾ |
RISC-V æŠ€æœ¯è§£æ</a></p>
<p><a href="http://riscvbook.com/">RISC-V-Reader</a></p>
<p><a
href="https://github.com/riscv/riscv-v-spec/releases">riscv-v-spec-0.7.1</a></p>
<p><a
href="https://www.cs.utexas.edu/users/pingali/CS378/2008sp/papers/gotoPaper.pdf">Anatomy
of High-Performance Matrix Multiplication</a></p>
<p><a
href="https://developer.huawei.com/consumer/cn/forum/topic/0201105374686101528">ç¼–è¯‘å™¨ä¼˜åŒ–ä¸¨Cacheä¼˜åŒ–</a></p>
<p><a
href="https://www.leiphone.com/category/yanxishe/Puevv3ZWxn0heoEv.html">OpenBLASé¡¹ç›®ä¸çŸ©é˜µä¹˜æ³•ä¼˜åŒ–
| AI ç ”ä¹ ç¤¾</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/34204282">Roofline
Modelä¸æ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ€§èƒ½åˆ†æ</a></p>
<p><a
href="https://zhuanlan.zhihu.com/p/342923482">æµ…è°ˆåˆ†å—çŸ©é˜µä¼˜åŒ–æ–¹æ³•ä¸ºä»€ä¹ˆæœ‰ç”¨</a></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>RISCV</tag>
        <tag>GEMM</tag>
        <tag>HPC</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2018/09/10/0_hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very
first post. Check <a href="https://hexo.io/docs/">documentation</a> for
more info. If you get any problems when using Hexo, you can find the
answer in <a
href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or
you can ask me on <a
href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>
<h2 id="quick-start">Quick Start</h2>
<h3 id="create-a-new-post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a
href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a
href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a
href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>ä¸‡ç‰©çš†å¯RSS</title>
    <url>/2023/06/29/67_RSS/</url>
    <content><![CDATA[<p>ä¸‡ç‰©çš†å¯RSSï¼</p>
<span id="more"></span>
<p><a href="https://sspai.com/post/60781">æŒ‡è·¯æ–‡ç« </a></p>
<p><a
href="https://www.bilibili.com/video/BV1oU4y1s7o8/?spm_id_from=333.337.search-card.all.click&amp;vd_source=a706cf2a9a33f4c298a6ef4764cea661">å…¥å‘è§†é¢‘æ•™ç¨‹</a></p>
<p><a
href="https://www.runningcheese.com/rss-subscriptions">å…¥å‘æ–‡ç« æŒ‡å—</a></p>
<blockquote>
<p>RSSï¼Œè‹±æ–‡å…¨ç§°Really Simple
Syndicationï¼Œä¸­æ–‡è¯‘ä½œç®€æ˜“ä¿¡æ¯èšåˆï¼ˆä¹Ÿå«èšåˆå†…å®¹ï¼‰ï¼Œæ˜¯ä¸€ç§åŸºäºXMLæ ‡å‡†ï¼Œåœ¨äº’è”ç½‘ä¸Šè¢«å¹¿æ³›é‡‡ç”¨çš„å†…å®¹åŒ…è£…ç›’æŠ•é€’åè®®ã€‚å®ƒèƒ½å¤Ÿæè¿°å’ŒåŒæ­¥ç½‘ç«™å†…å®¹ï¼Œè€ŒRSSè®¢é˜…è¿™ç§å½¢å¼åˆ™å¯ä»¥æ›´å¿«åœ°è·å–æœ€æ–°ä¿¡æ¯ã€‚</p>
</blockquote>
<ul>
<li><p>ç¢ç‰‡åŒ–é˜…è¯»</p>
<blockquote>
<p>ç¢ç‰‡åŒ–é˜…è¯»æ˜¯æŒ‡ä¸€ç§é€šè¿‡æ‰‹æœºã€ç”µå­ä¹¦ã€è®¡ç®—æœºç­‰è¿›è¡Œçš„ä¸å®Œæ•´çš„ã€æ–­æ–­ç»­ç»­çš„é˜…è¯»æ¨¡å¼ã€‚</p>
</blockquote></li>
<li><p>ä¿¡æ¯èŒ§æˆ¿ &gt;
ä¿¡æ¯èŒ§æˆ¿æ¦‚å¿µæ˜¯ç”±å“ˆä½›å¤§å­¦æ³•å­¦é™¢æ•™æˆã€å¥¥å·´é©¬æ€»ç»Ÿçš„æ³•å¾‹é¡¾é—®å‡¯æ–¯Â·æ¡‘æ–¯å¦åœ¨å…¶2006å¹´å‡ºç‰ˆçš„è‘—ä½œã€Šä¿¡æ¯ä¹Œæ‰˜é‚¦â€”â€”ä¼—äººå¦‚ä½•ç”Ÿäº§çŸ¥è¯†ã€‹ä¸­æå‡ºçš„ã€‚é€šè¿‡å¯¹äº’è”ç½‘çš„è€ƒå¯Ÿï¼Œæ¡‘æ–¯å¦æŒ‡å‡ºï¼Œåœ¨ä¿¡æ¯ä¼ æ’­ä¸­ï¼Œå› å…¬ä¼—è‡ªèº«çš„ä¿¡æ¯éœ€æ±‚å¹¶éå…¨æ–¹ä½çš„ï¼Œå…¬ä¼—åªæ³¨æ„è‡ªå·±é€‰æ‹©çš„ä¸œè¥¿å’Œä½¿è‡ªå·±æ„‰æ‚¦çš„é€šè®¯é¢†åŸŸï¼Œä¹…è€Œä¹…ä¹‹ï¼Œä¼šå°†è‡ªèº«æ¡æ¢äºåƒèš•èŒ§ä¸€èˆ¬çš„â€œèŒ§æˆ¿â€ä¸­ã€‚</p></li>
</ul>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬èº«å¤„ä¸€ä¸ªä¿¡æ¯çˆ†ç‚¸çš„ç½‘ç»œå¤§æ•°æ®æ—¶ä»£ï¼Œå†åŠ ä¸Šæ•°æ®åŸ‹ç‚¹ã€äººç¾¤ç”»åƒç­‰ç²¾å‡†è¥é”€æ‰‹æ®µï¼Œå¾€å¾€ä¼šäº§ç”Ÿè¿™æ ·çš„ä¸€ä¸ªç»“æœï¼š<strong>æˆ‘ä»¬ç»å¸¸ä¼šè¢«è¿«æ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å•†æä¾›çš„ï¼Œç»ç”±å¤§æ•°æ®ç®—æ³•æ£€éªŒè®¤ä¸ºçš„â€œæ‰€è°“åŒ¹é…æˆ‘ä»¬â€çš„ä¿¡æ¯ã€‚</strong></p>
<p>è€Œè¿™äº›â€œç²¾å‡†åŒ¹é…çš„ä¸ªæ€§åŒ–â€ä¿¡æ¯ä¼šä¸æ–­ç¼©å°æˆ‘ä»¬çš„è®¤çŸ¥èŒƒå›´ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œæ¸æ¸æˆ‘ä»¬ä¼šå¤±å»å¯¹ä¿¡æ¯çš„æ•æ„Ÿï¼Œå¤„äºä¸€ç§â€œ<strong>åˆ«äººæ¨èä»€ä¹ˆï¼Œä½ å°±çœ‹ä»€ä¹ˆ</strong>â€çš„çŠ¶æ€ä¸­ã€‚è¿™æ˜¯å¾ˆå¯æ€•çš„ï¼ï¼</p>
<p>æˆ‘ä»¬æ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼Œåº”å½“æ˜¯â€œè‡ªç”±â€çš„ã€‚è¿™ä»½è‡ªç”±ä¸­è‡ªç„¶åŒ…å«ç€â€œæ€æƒ³è‡ªç”±â€ï¼šä¸ªäººæ‹¥æœ‰æˆ–æ€è€ƒç‹¬ç«‹äºä»–äººä¹‹å¤–çš„è§‚ç‚¹ã€äº‹å®ã€æ€æƒ³ä¹‹è‡ªç”±ã€‚</p>
<p>--æ‘˜è‡ª<a href="https://sspai.com/post/60781">æŒ‡è·¯æ–‡ç« </a></p>
<h1 id="rsshub-feedly-reederæ­é…">RSSHub + Feedly + Reederæ­é…</h1>
<p>RSSHubæ˜¯ä¸€ä¸ªå¼€æºã€ç®€å•æ˜“ç”¨ã€æ˜“äºæ‰©å±•çš„ RSS
ç”Ÿæˆå™¨ï¼Œå¯ä»¥ç»™ä»»ä½•å¥‡å¥‡æ€ªæ€ªçš„å†…å®¹ç”Ÿæˆ RSS
è®¢é˜…æºã€‚ç›®å‰å€ŸåŠ©äºå¼€æºç¤¾åŒºçš„åŠ›é‡å¿«é€Ÿå‘å±•ä¸­ï¼Œå·²ç»é€‚é…æ•°ç™¾å®¶ç½‘ç«™çš„ä¸Šåƒé¡¹å†…å®¹ã€‚</p>
<ul>
<li>RSSHubå¯ä»¥ä¸ºå‡ ä¹æ‰€æœ‰ç½‘ç«™æä¾›RSSè®¢é˜…æºï¼Œæ¯”å¦‚çŸ¥ä¹ã€è™æ‰‘ã€åšå®¢ã€å¾®ä¿¡å…¬ä¼—å·ã€Bç«™ã€èµ·ç‚¹ç­‰åª’ä½“ç«™ç‚¹ã€‚ç”šè‡³å³ä½¿è¯¥ç«™ç‚¹ä¸æä¾›RSSè®¢é˜…æœåŠ¡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åŸºäºå®ƒæ¥åˆ¶ä½œä¸€ä¸ªRSSè®¢é˜…æºï¼Œå¯è°“éå¸¸å¼ºå¤§</li>
</ul>
<p>Feedlyæ˜¯ä¸€ä¸ªRSSèšåˆå™¨åº”ç”¨ç¨‹åºï¼Œæ”¯æŒå„ç§ç½‘é¡µæµè§ˆå™¨å’Œè¿è¡ŒiOSæˆ–Androidçš„ç§»åŠ¨è®¾å¤‡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåŸºäºäº‘ç«¯çš„æœåŠ¡ã€‚å…¶ä»å„ç§åœ¨çº¿èµ„æºèšåˆç”¨æˆ·è‡ªå®šçš„æ–°é—»è®¢é˜…æºï¼Œå¹¶å¯ä¸ä»–äººåˆ†äº«ã€‚</p>
<ul>
<li>é€‰æ‹©Feedlyåˆ™æ˜¯å› ä¸ºå…¶æä¾›äº†æ–‡ä»¶å¤¹åˆ†ç±»åŠŸèƒ½ï¼Œä¸”ä¹Ÿæ‹¥æœ‰æ•°é‡ä¸è²çš„è®¢é˜…æºï¼Œåœ¨å¯¹RSSè®¢é˜…æºçš„ç®¡ç†ä¸Šååˆ†æ–¹ä¾¿ï¼ŒåŒæ—¶æ°å¥½ä¹Ÿåœ¨Reederæ”¯æŒçš„ç¬¬ä¸‰æ–¹è®¢é˜…æœåŠ¡åˆ—è¡¨ä¸­ã€‚</li>
</ul>
<p>Reederæ˜¯ä¸€æ¬¾è¯„ä»·æé«˜çš„iOSç«¯RSSé˜…è¯»åº”ç”¨ã€‚å…¶æ”¯æŒä¸Feedbinã€Feedlyã€Inoreaderç­‰RSSç¬¬ä¸‰æ–¹æœåŠ¡äº‘ç«¯åŒæ­¥ï¼Œç”šè‡³ä¹Ÿæ”¯æŒä¸FreshRSSã€Readerã€Feverç­‰è‡ªå»ºRSSæœåŠ¡åŒæ­¥æ•°æ®ã€‚</p>
<ul>
<li>ä½¿ç”¨Reederåˆ™ä»…ä»…æ˜¯å› ä¸ºå®ƒæ˜¯iOSä¸Šå¹¿å—å¥½è¯„çš„RSSé˜…è¯»ç«¯APPï¼Œè€Œæˆ‘è´­ä¹°åä½“éªŒçš„æ•ˆæœä¹Ÿå¾ˆæ»¡æ„ã€‚</li>
</ul>
<p>--æ‘˜è‡ª<a href="https://sspai.com/post/60781">æŒ‡è·¯æ–‡ç« </a></p>
<p>æˆ‘ç»•äº†ä¸€å¤§åœˆï¼Œçœ‹å„ç§èµ„æ–™ï¼Œæœ€ç»ˆçš„é€‰æ‹©ä¹Ÿæ°å·§æ˜¯å¦‚æ­¤ã€‚</p>
<h1 id="æˆ‘çš„ä¸€äº›æ“ä½œ">æˆ‘çš„ä¸€äº›æ“ä½œï¼š</h1>
<h2 id="macå®‰è£…reeder4">1ã€macå®‰è£…Reeder4</h2>
<p>ç¨‹åºä½“ç§¯æ¯”æˆ‘æƒ³è±¡çš„è¦å°</p>
<p>æ–°å»ºäº†ä¸ªè´¦æˆ·ï¼Œicloudçš„feedsã€‚</p>
<p>è®¢é˜…äº†ä¸€ä¸‹è‡ªå·±çš„åšå®¢ï¼Œé˜…è¯»ä½“éªŒè¿˜å¯ä»¥ã€‚</p>
<h2 id="iphoneå®‰è£…reeder5">2ã€iphoneå®‰è£…Reeder5</h2>
<p>é‡æ–°æ³¨å†Œäº†ä¸ªç¾åŒºè´¦å·ï¼Œ<a
href="https://mp.weixin.qq.com/s/s9fMsBzVu4nXBbBuYym9mA">æ­¥éª¤</a></p>
<p>ä½¿ç”¨ç¤¼å“å¡çš„æ–¹å¼ä¸‹è½½äº†Reeder5</p>
<p>æ–°å»ºäº†ä¸ªè´¦æˆ·ï¼Œicloudçš„feedsï¼Œå’Œç”µè„‘çš„è®¢é˜…åŒæ­¥ä¸Šäº†ï½</p>
<h2 id="æµè§ˆå™¨å®‰è£…rssæ’ä»¶">3ã€æµè§ˆå™¨å®‰è£…<a
href="https://greasyfork.org/zh-CN/scripts/373252-rss-show-site-all-rss">RSS+æ’ä»¶</a></h2>
<p>å®‰è£…åï¼Œåœ¨ç½‘é¡µçš„å³ä¸‹è§’ä¼šæœ‰ä¸€ä¸ªâ€œè“è‰²åœ†ç‚¹â€ï¼Œæ˜¾ç¤ºå½“å‰ç½‘é¡µæœ‰å¤šå°‘ä¸ªå¯ç”¨
RSS æºï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¸ä¼šæ˜¾ç¤ºã€‚</p>
<p>æœ‰äº†å®ƒï¼Œæˆ‘ä»¬å°±å†ä¹Ÿä¸éœ€è¦åˆ°å¤„æ‰¾ RSS è®¢é˜…æºã€‚</p>
<p>åªéœ€è¦å’Œå¹³æ—¶ä¸Šç½‘ä¸€æ ·ï¼Œé‡åˆ°å–œæ¬¢çš„ RSS æºï¼Œä¸€é”®æ·»åŠ å³å¯ã€‚</p>
<h2 id="æ³¨å†Œfeedly">4ã€æ³¨å†Œfeedly</h2>
<p>https://feedly.com/</p>
<p>ä½†æ˜¯ï¼Œ<a href="https://www.v2ex.com/t/797931">Reeder 4 æ— æ³•æ·»åŠ 
feedly</a></p>
<p>å†³å®šä¹°Reeder5ï¼Œæ—¢ç„¶æ‹¥æœ‰å›½å¤–ä¿¡ç”¨å¡æ˜¯æ—©æ™šçš„äº‹ï¼Œé‚£å°±æ—©ç‚¹åšå§ã€‚</p>
<h2 id="æ³¨å†Œå¸å®‰">5ã€æ³¨å†Œå¸å®‰</h2>
<p><a href="https://www.binance.com/zh-CN">å¸å®‰</a></p>
<p><a
href="https://www.youtube.com/watch?v=sWm0RgSapp8">å¸å®‰ä½¿ç”¨æ–¹å¼</a></p>
<p>æ¬§æ˜“ä¼¼ä¹æ›´å¥½ç”¨ï¼Œä½†æˆ‘è¿˜æ˜¯å…ˆå…¥ä¸ºä¸»äº†ã€‚</p>
<h2 id="æ³¨å†Œonekey-visaå¡">6ã€æ³¨å†Œonekey visaå¡</h2>
<p>åœ¨<a
href="https://card.onekey.so/?i=S1RXT8">è¿™é‡Œ</a>æ³¨å†Œç¾å›½è™šæ‹Ÿä¿¡ç”¨å¡</p>
<p><a href="https://www.youtube.com/watch?v=nIfFC7hFZ90">æ•™ç¨‹</a></p>
<p>æˆ‘æ˜¯ç”¨å¸å®‰å‘onekeyæç°USDTå®ç°æ¿€æ´»çš„ï¼ŒæœŸé—´æ‰£é™¤äº†1USDTçš„æ‰‹ç»­è´¹ã€‚ä»¥åŠonekeyæœ‰1$çš„å¼€å¡è´¹å’Œä¸€ç‚¹æ‰‹ç»­è´¹ã€‚</p>
<h2 id="æ·»åŠ feedlyè´¦æˆ·">7ã€æ·»åŠ feedlyè´¦æˆ·</h2>
<p>ä¸‹è½½Reeder5ä¹‹åï¼Œå°±å¯ä»¥ç»‘å®šFeedlyè´¦æˆ·äº†ã€‚</p>
<hr />
<p>ç›®å‰æˆ‘æ˜¯<code>RSS+æ’ä»¶</code>çš„é‡åº¦ä½¿ç”¨è€…</p>
<hr />
<h1 id="rssçœŸé¦™"><strong>RSSçœŸé¦™ï¼</strong></h1>
]]></content>
      <tags>
        <tag>RSS</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeXå­¦ä¹ </title>
    <url>/2023/05/30/69_LaTeX/</url>
    <content><![CDATA[<p>ä»Šå¤©çœ‹çš„è®ºæ–‡çš„æ’ç‰ˆçœŸçš„å¤ªå¥½çœ‹äº†ï¼å¼€å§‹å­¦ä¹ <code>LaTeX</code>ï¼Œæ•´ä¸ªè¿‡ç¨‹è®°å½•ä¸€ä¸‹ã€‚</p>
<span id="more"></span>
<p><code>mactex</code>ä¸‹è½½åœ°å€ï¼š<a
href="https://www.tug.org/mactex/">https://www.tug.org/mactex/</a></p>
<pre><code>MacTeX.pkg.
The Size is 5.2G - 15 March 2023
The MD5 sum is 64416e6da409609c48970e23906e7642
The SHA512 sum is 0ff569be6af3e658b4a60e2b89bf10c41b9bae38bdaee60021c69aea238d2436886c0883954ab0a64394d9a6e080958b2fc82f91ac5c4dfe9e1de32df46efd49</code></pre>
<p><a
href="https://www.tug.org/mactex/READ_ME_FIRST.pdf">READ_ME_FIRST</a>ç»™äº†æˆ‘å¾ˆå¤§å¸®åŠ©ã€‚</p>
<ul>
<li>2023.05.31</li>
</ul>
<p>çœ‹äº†<a href="https://www.doc88.com/p-9773781953864.html">LaTeX Notes
v1.20</a>ï¼Œ<a
href="https://www.dralpha.com/">ä½œè€…</a>å¾ˆæœ‰æ„æ€ï¼Œä¹Ÿç»™æˆ‘æ‰“å¼€äº†<code>LaTeX</code>å¤§é—¨ã€‚</p>
<p>æ–°çš„ç‰ˆæœ¬ä½äº<a
href="https://github.com/huangxg/lnotes">https://github.com/huangxg/lnotes</a>,<a
href="https://github.com/huangxg/lnotes/blob/master/lnotes2.pdf">PDFæ–‡æ¡£</a>ã€‚</p>
<p>åœ¨<a
href="https://zhuanlan.zhihu.com/p/521649367">çŸ¥ä¹</a>çœ‹åˆ°ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« </p>
<p>ã€æ›´æ–°ä¸­ã€‘</p>
]]></content>
      <tags>
        <tag>LaTeX</tag>
        <tag>study</tag>
      </tags>
  </entry>
  <entry>
    <title>git</title>
    <url>/2023/06/19/73_git/</url>
    <content><![CDATA[<p>æ—¥å¸¸çš„ä¸€äº›gitæ“ä½œå…¶å®å·²ç»éå¸¸ç†Ÿæ‚‰äº†ï¼Œæ¯”è¾ƒæ¬ ç¼ºçš„æ˜¯å›¢é˜Ÿåä½œé‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚</p>
<p>åœ¨æ­¤è®°å½•ä¸€ä¸‹éœ€è¦ç»å¸¸æŸ¥é˜…çš„æƒ…æ™¯ã€‚</p>
<span id="more"></span>
<h1
id="gitå°†å½“å‰ä¿®æ”¹çš„å†…å®¹æäº¤åˆ°æ–°çš„åˆ†æ”¯ä¸Š">Gitï¼šå°†å½“å‰ä¿®æ”¹çš„å†…å®¹æäº¤åˆ°æ–°çš„åˆ†æ”¯ä¸Š</h1>
<h2 id="å‰è¨€">å‰è¨€ï¼š</h2>
<p>æœ‰æ—¶å€™åœ¨å‚åŠ ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œæ‰§è¡Œcloneå¾—åˆ°masteråˆ†æ”¯ï¼Œ
ä¸€å¼€å§‹åªæ˜¯æƒ³çœ‹çœ‹æºç æˆ–è€…å¿˜è®°äº†è‡ªå·±æ²¡æœ‰æ–°å»ºåˆ†æ”¯ï¼Œç»“æœåé¢è‡ªå·±æ ¹æ®éœ€æ±‚æ·»åŠ äº†ä»£ç <code>æ·»åŠ åæ²¡æœ‰æ‰§è¡Œcommit</code>,
ä½†æ˜¯æ­¤æ—¶çš„ä¿®æ”¹éƒ½åœ¨masteråˆ†æ”¯ï¼Œ
æäº¤å¿…ç„¶æ˜¯ä¸å¯ä»¥çš„ï¼Œè¿˜æ˜¯è¦æ–°å»ºåˆ†æ”¯<code>æ‰€æœ‰ä¿®æ”¹éƒ½è¦åœ¨æ–°å»ºåˆ†æ”¯ä¸Šè¿›è¡Œ</code>ï¼Œæœ€ååœ¨åˆ†æ”¯æ‰§è¡Œé€šè¿‡åï¼Œæ‰èƒ½åˆå¹¶åˆ°masteråˆ†æ”¯ã€‚
é‚£ä¹ˆï¼Œè¿™æ—¶å€™å¦‚ä½•åŠ›æŒ½ç‹‚æ¾œï¼Œå¦‚ä½•åœ¨ä¿å­˜è¿™äº›ä¿®æ”¹çš„å‰æä¸‹ï¼Œæ–°å»ºåˆ†æ”¯å¹¶æäº¤å‘¢ï¼Ÿ</p>
<h2 id="æ“ä½œæ€è·¯">æ“ä½œæ€è·¯ï¼š</h2>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­¥éª¤1ï¼šåœ¨å½“å‰çš„masteråˆ†æ”¯ä¸Šçš„ä¿®æ”¹æš‚å­˜èµ·æ¥</span></span><br><span class="line">git stash</span><br><span class="line"><span class="comment">//æ­¥éª¤2ï¼šæš‚å­˜ä¿®æ”¹åï¼Œåœ¨æœ¬åœ°æ–°å»ºåˆ†æ”¯ï¼ˆnew_branchä¸ºæ–°åˆ†æ”¯çš„åå­—ï¼‰</span></span><br><span class="line">git checkout -b new_branch</span><br><span class="line"><span class="comment">//æ­¥éª¤3ï¼šå°†æš‚å­˜çš„ä¿®æ”¹æ”¾åˆ°æ–°å»ºåˆ†æ”¯ä¸­</span></span><br><span class="line">git stash pop</span><br><span class="line"><span class="comment">//æ­¥éª¤4ï¼šä½¿ç”¨TortoiseGitè¿›è¡Œcommitï¼Œæ¯”å¦‚addã€modifyã€delete...</span></span><br><span class="line"><span class="comment">//æ­¥éª¤5ï¼šå°†æäº¤çš„å†…å®¹pushåˆ°è¿œç¨‹æœåŠ¡å™¨</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒOruiznã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0
BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/Oruizn/article/details/111294375</p>
<h1
id="gitåˆ›å»ºæœ¬åœ°åˆ†æ”¯å¹¶å…³è”è¿œç¨‹åˆ†æ”¯">gitåˆ›å»ºæœ¬åœ°åˆ†æ”¯å¹¶å…³è”è¿œç¨‹åˆ†æ”¯</h1>
<h2 id="åˆ›å»ºæœ¬åœ°åˆ†æ”¯">1. åˆ›å»ºæœ¬åœ°åˆ†æ”¯</h2>
<p><code>git branch åˆ†æ”¯å</code></p>
<p>ä¾‹å¦‚ï¼š<code>git branch dev</code>ï¼Œè¿™æ¡å‘½ä»¤æ˜¯åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºçš„æœ¬åœ°åˆ†æ”¯ï¼Œå‡è®¾å½“å‰åˆ†æ”¯æ˜¯master(è¿œç¨‹åˆ†æ”¯)ï¼Œåˆ™æ˜¯åŸºäºmasteråˆ†æ”¯åˆ›å»ºçš„æœ¬åœ°åˆ†æ”¯devã€‚</p>
<h2 id="åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯">2. åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯</h2>
<p><code>git checkout åˆ†æ”¯å</code></p>
<p>ä¾‹å¦‚ï¼š<code>git checkout dev</code>ï¼Œè¿™æ¡å‘½ä»¤è¡¨ç¤ºä»å½“å‰masteråˆ†æ”¯åˆ‡æ¢åˆ°devåˆ†æ”¯ã€‚
## 3. åˆ›å»ºæœ¬åœ°åˆ†æ”¯å¹¶åˆ‡æ¢</p>
<p><code>git checkout -b åˆ†æ”¯å</code></p>
<p>ä¾‹å¦‚ï¼š<code>git checkout -b dev</code>ï¼Œè¿™æ¡å‘½ä»¤æŠŠåˆ›å»ºæœ¬åœ°åˆ†æ”¯å’Œåˆ‡æ¢åˆ°è¯¥åˆ†æ”¯çš„åŠŸèƒ½ç»“åˆèµ·æ¥äº†ï¼Œå³åŸºäºå½“å‰åˆ†æ”¯masteråˆ›å»ºæœ¬åœ°åˆ†æ”¯devå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ä¸‹ã€‚</p>
<h2 id="æäº¤æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“">4. æäº¤æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</h2>
<p><code>git push origin æœ¬åœ°åˆ†æ”¯å</code></p>
<p>ä¾‹å¦‚ï¼š<code>git push origin dev</code>ï¼Œè¿™æ¡å‘½ä»¤è¡¨ç¤ºæŠŠæœ¬åœ°devåˆ†æ”¯æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œå³åˆ›å»ºäº†è¿œç¨‹åˆ†æ”¯devã€‚</p>
<blockquote>
<p>æ³¨ï¼šè¦æƒ³å’Œå…¶ä»–äººåˆ†äº«æŸä¸ªæœ¬åœ°åˆ†æ”¯ï¼Œä½ éœ€è¦æŠŠå®ƒæ¨é€åˆ°ä¸€ä¸ªä½ æ‹¥æœ‰å†™æƒé™çš„è¿œç¨‹ä»“åº“ã€‚ä½ åˆ›å»ºçš„æœ¬åœ°åˆ†æ”¯ä¸ä¼šå› ä¸ºä½ çš„å†™å…¥æ“ä½œè€Œè¢«è‡ªåŠ¨åŒæ­¥åˆ°ä½ å¼•å…¥çš„è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œä½ éœ€è¦æ˜ç¡®åœ°æ‰§è¡Œæ¨é€åˆ†æ”¯çš„æ“ä½œã€‚æ¢å¥è¯è¯´ï¼Œå¯¹äºæ— æ„åˆ†äº«çš„åˆ†æ”¯ï¼Œä½ å°½ç®¡ä¿ç•™ä¸ºç§äººåˆ†æ”¯å¥½äº†ï¼Œè€Œåªæ¨é€é‚£äº›ååŒå·¥ä½œè¦ç”¨åˆ°çš„ç‰¹æ€§åˆ†æ”¯ã€‚</p>
</blockquote>
<h2 id="æ–°å»ºæœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å…³è”">5.æ–°å»ºæœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å…³è”</h2>
<p><code>git branch â€“set-upstream æœ¬åœ°æ–°å»ºåˆ†æ”¯å origin/è¿œç¨‹åˆ†æ”¯å</code></p>
<p>æˆ–è€…</p>
<p><code>git branch â€“set-upstream-to=origin/è¿œç¨‹åˆ†æ”¯å</code></p>
<p>ä¾‹å¦‚ï¼š<code>git branch â€“set-upstream-to=origin/dev</code>ï¼ŒæŠŠæœ¬åœ°devåˆ†æ”¯å’Œè¿œç¨‹devåˆ†æ”¯ç›¸å…³è”ã€‚</p>
<blockquote>
<p>æ³¨ï¼šæœ¬åœ°æ–°å»ºåˆ†æ”¯ï¼Œ
pushåˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šä¹‹åï¼Œä½¿ç”¨<code>git pull</code>æˆ–è€…<code>git pull</code>
æ‹‰å–æˆ–æäº¤æ•°æ®æ—¶ä¼šæŠ¥é”™ï¼Œå¿…é¡»ä½¿ç”¨å‘½ä»¤ï¼š<code>git pull origin dev</code>ï¼ˆæŒ‡å®šè¿œç¨‹åˆ†æ”¯ï¼‰ï¼›å¦‚æœæƒ³ç›´æ¥ä½¿ç”¨<code>git pull</code>æˆ–<code>git push</code>æ‹‰å»æäº¤æ•°æ®å°±å¿…é¡»åˆ›å»ºæœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„å…³è”ã€‚</p>
</blockquote>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒEntyIUã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0
BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/weixin_59244784/article/details/129170582</p>
<hr />
<p>æ¨gité‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼š</p>
<p><code>remote: fatal: pack exceeds maximum allowed size</code>ã€‚</p>
<p>ä¼°è®¡ä»¥åä¹Ÿä¼šå†æ¬¡é‡åˆ°ï¼Œè®°å½•ä¸€ä¸‹è§£å†³æ­¥éª¤ã€‚</p>
<!-- more -->
<h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2>
<p>ç¬¬ä¸€ååº”å½“ç„¶æ˜¯googleä¸€ä¸‹ï¼Œé¡ºåˆ©æ‰¾åˆ°<a
href="https://stackoverflow.com/questions/67086183/git-push-remote-fatal-pack-exceeds-maximum-allowed-size">è§£å†³æ–¹æ¡ˆ</a></p>
<p>First, you can use <code>git-sizer</code> to get an idea of what is
taking too much space in your current local repository (that you fail to
push)</p>
<ul>
<li><p>if it is because of a commit too big, you can:</p>
<ul>
<li><code>git reset @~</code> to cancel that commit</li>
<li>remake several smaller commits</li>
<li>try and push again</li>
</ul></li>
<li><p>if it is because of a file too big, you can try and activate
<code>Git LFS</code>, but that is limited by quota and going above might
include a non-free service.</p></li>
</ul>
<p>More generally, a "large project" might need to be split up into
several Git repositories.</p>
<h2 id="å®è·µæ“ä½œ">å®è·µæ“ä½œ</h2>
<p>1ã€å®‰è£…git-sizer</p>
<p>https://formulae.brew.sh/formula/git-sizer</p>
<p><code>brew install git-sizer</code></p>
<p>2ã€åˆ†ææ–‡ä»¶å¤§å°</p>
<p>åœ¨gité¡¹ç›®å†…æ‰§è¡Œ<code>git-sizer</code></p>
<pre><code>Processing blobs: 6673                        
Processing trees: 1053                        
Processing commits: 2                        
Matching commits to trees: 2                        
Processing annotated tags: 0                        
Processing references: 3                        
| Name                         | Value     | Level of concern               |
| ---------------------------- | --------- | ------------------------------ |
| Biggest objects              |           |                                |
| * Blobs                      |           |                                |
|   * Maximum size         [1] |  60.9 MiB | ******                         |
|                              |           |                                |
| Biggest checkouts            |           |                                |
| * Maximum path depth     [2] |    10     | *                              |
| * Maximum path length    [2] |   146 B   | *                              |
| * Total size of files    [2] |  1.40 GiB | *                              |

[1]  ***********(delete)*********** (refs/heads/main:toolchain/***********(delete)***********)
[2]  ***********(delete)*********** (refs/heads/main^&#123;tree&#125;)</code></pre>
<p>å¥½åƒä¹Ÿæ²¡æœ‰å¤ªå¤§çš„æ–‡ä»¶ï¼Œæœ€å¤§çš„ä¹Ÿå°±æ˜¯64MBã€‚é‚£åº”è¯¥æ˜¯æ•´ä¸ªcommitå¤ªå¤§äº†ã€‚</p>
<p>äºæ˜¯æˆ‘æ‹†å¼€å¤šä¸ªåˆ†åˆ«pushï¼Œè§£å†³äº†é—®é¢˜ã€‚</p>
<h2 id="lfs">LFS</h2>
<p>ä¸‹æ¬¡é‡åˆ°ä¸å¾—ä¸ä½¿ç”¨LFSçš„æ—¶å€™å†æ¥è¡¥å……åç»­çš„åšå®¢</p>
<p><a href="https://www.jianshu.com/p/493b81544f80">Git
LFSçš„ä½¿ç”¨</a></p>
<p>brew install git-lfs</p>
<p>git lfs install</p>
]]></content>
      <tags>
        <tag>git</tag>
        <tag>branch</tag>
      </tags>
  </entry>
  <entry>
    <title>Final Cut study notes</title>
    <url>/2023/07/08/75_Final-cut-study-notes/</url>
    <content><![CDATA[<p>å­¦ä¹ Final Cut Proçš„ç¬”è®°ï¼Œæé«˜ç”Ÿäº§åŠ›ã€‚</p>
<span id="more"></span>
<h1 id="é…ç½®">é…ç½®</h1>
<hr />
<h1 id="æ’ä»¶">æ’ä»¶</h1>
<h2 id="motion-vfx"><a href="https://www.motionvfx.com/">MOTION
VFX</a></h2>
<p>ä¸€ä¸ªæ’ä»¶é›†åˆçš„ç½‘ç«™ï¼Œå·¨å¥½ç”¨ï¼</p>
<h3 id="mcamrigæ‘„åƒæœºè¿åŠ¨"><a
href="https://www.motionvfx.com/store,mcamrig,p2219.html?category=63&amp;irgwc=1&amp;irgwc=1">mCamRig</a>æ‘„åƒæœºè¿åŠ¨</h3>
<ul>
<li>å¯¹å‡ºæ•™ç¨‹çš„UPä¸»ç‰¹åˆ«æœ‰ç”¨</li>
<li>å¯ä»¥å¿«é€Ÿåˆ¶ä½œç¼©æ”¾ã€æ—‹è½¬ï¼Œæ·»åŠ é•œå¤´æ¨¡ç³Šã€é•œå¤´è¿åŠ¨æ•ˆæœ</li>
<li>ç”¨æ³•ï¼š
<ul>
<li>å­—å¹•é‡Œæ‰¾åˆ°æ’ä»¶ï¼Œæ‹‰åˆ°å¯¹åº”çš„ç‰‡æ®µä¸Š</li>
</ul></li>
</ul>
<h3 id="mverticalæ‰‹æœºè§†é¢‘èƒŒæ™¯è™šåŒ–"><a
href="https://www.motionvfx.com/store,mvertical,p2176.html?irgwc=1">mVertical</a>æ‰‹æœºè§†é¢‘èƒŒæ™¯è™šåŒ–</h3>
<ul>
<li>æ¨ªç‰ˆè§†é¢‘æ’å…¥ç«–ç‰ˆè§†é¢‘æ—¶ï¼Œå¡«å……ä¸¤è¾¹çš„é»‘è‰²</li>
<li>å®ç°èƒŒæ™¯é‡å çš„èƒŒæ™¯è™šåŒ–</li>
<li>å°æŠ€å·§
<ul>
<li>é€‰æ‹©ç‰‡æ®µï¼ŒæŒ‰ä¸€ä¸‹Xï¼Œå°±è‡ªåŠ¨é€‰æ‹©è¿™ä¸ªç‰‡æ®µé•¿åº¦</li>
<li>åœ¨å­—å¹•é‡Œæ‰¾åˆ°mVerticalï¼ŒæŒ‰Qï¼Œå°±å¯ä»¥æ•´æ®µé™„ç€åˆ°è¿™ä¸ªç‰‡æ®µ</li>
</ul></li>
</ul>
<h2 id="commandpostæœ€å¼ºè¾…åŠ©"><a
href="https://commandpost.io">Commandpost</a>æœ€å¼ºè¾…åŠ©</h2>
<h1 id="æ¸…ç†ç¼“å­˜">æ¸…ç†ç¼“å­˜</h1>
<p>èµ„æºåº“ å³é”® æ˜¾ç¤ºåŒ…å†…å®¹</p>
<h1 id="é«˜æ•ˆæŠ€å·§">é«˜æ•ˆæŠ€å·§</h1>
<p>æ·»åŠ è§†é¢‘æ—¶ï¼Œè¿›è¡Œäº†éƒ¨åˆ†é€‰æ‹©ï¼Œæ ‡è®° -&gt; æ¸…é™¤æ‰€é€‰èŒƒå›´ï¼ˆå¿«æ·é”®ï¼šOption +
X å–æ¶ˆé€‰æ‹©ï¼‰</p>
<p>æ·»åŠ å­—å¹•ï¼šæŒ‰enterä¼šæ¢è¡Œï¼ŒæŒ‰commond+enteré€€å‡ºç¼–è¾‘çŠ¶æ€</p>
<p>æŠŠå½“å‰ç‰‡æ®µæ‹‰é•¿ï¼ˆæŸä¸€å¸§æ‹‰é•¿ï¼‰ - ç¼–è¾‘ -&gt; æ·»åŠ é™å¸§ - å¿«æ·é”®ï¼šshift +
Hï¼Œç‰‡æ®µæ˜¯å®Œæ•´çš„æ²¡æœ‰è¢«åˆ‡å‰²</p>
<p>å›ºå®šéŸ³ä¹ä½ç½® - ç¬¬ä¸€å¸§æœ€å‰é¢åŠ ä¸€ä¸ªç©ºéš™ Edit -&gt; Insert Generator
-&gt; Gap(option+W) - é€‰æ‹©Gapï¼Œcontrol+Dï¼Œè¾“å…¥1ï¼ˆ1å¸§æ—¶é•¿ï¼‰ -
æŠŠéŸ³ä¹æ”¾æœ€å‰é¢ - åˆ é™¤çš„æ—¶å€™ï¼ŒOption + commond + Delete</p>
<p>è°ƒæ•´å˜é€Ÿï¼Œä¸å½±å“æ•´ä½“æ—¶é•¿ - å³é”®ï¼Œ Lift from storyline - Overwrite to
Primary Storyline</p>
<p>æ·»åŠ çš„æ—¶å€™åªè¦è¦ç”»é¢ï¼Œä¸è¦å£°éŸ³</p>
<p>Final cut pro 1. èµ„æºç®¡ç† - å…³ç³»ï¼š èµ„æºåº“ -&gt; äº‹ä»¶ -&gt; é¡¹ç›® -
å¯¼å…¥ç´ æ - æŒ‰ä½ commandï¼Œ æ‰‹åŠ¨ç‚¹å‡»ç´ æï¼Œæ‰¹é‡é€‰æ‹©</p>
<p>2.æ·»åŠ  ç´ æåˆ°æ—¶é—´çº¿ï¼ŒåŸºæœ¬æ“ä½œ - 1. ç‰‡æ®µé€‰æ‹© - é€‰æ‹©å…¥ç‚¹ï¼š I - é€‰æ‹©å‡ºç‚¹
ï¼š O - æ·»åŠ åˆ°æ—¶é—´çº¿ï¼š E - å–æ¶ˆé€‰æ‹© - Option + X - 2. é¢„è§ˆç´ æ -
é¡ºåºæ’­æ”¾ï¼š L - åŠ é€Ÿï¼š è¿ç»­æŒ‰2,3æ¬¡L - æš‚åœ ï¼šK - å€’åºæ’­æ”¾ ï¼šJ -
3.æ·»åŠ å­—å¹• - æ·»åŠ åˆ°é€‰å®šæ—¶é—´ç‚¹ï¼š Q - 4. åœ¨2ä¸ªç´ æä¹‹é—´å¿«é€Ÿæ’å…¥ï¼š W - 5.
è¿›é˜¶å­¦ä¹  - ä¸ªäººæ”¶è— - å…³é”®è¯ - 3.å‰ªè¾‘ - 1. åˆ‡å‰²å·¥å…· - B - 2. å»¶é•¿ ç¼©çŸ­
é€‰æ‹©çš„è§†é¢‘ - é€—å· å’Œ å¥å· - 3. åˆ‡å‰²å¹¶é€‰ä¸­ - command + B - 4.
èŒƒå›´é€‰æ‹©å·¥å…· - æŒ‰ä½Rä¸æ¾ - 5. åˆ é™¤ æ’­æ”¾å¤´å¼€å§‹ åˆ° é€‰ä¸­ä½ç½® - Option + [ -
6. åˆ é™¤ é€‰ä¸­ä½ç½® åˆ° ç´ æç»“æŸä½ç½® - Option + ] - 7. åˆ é™¤ ä¸»æ—¶é—´çº¿è§†é¢‘ï¼Œ
åŒæ—¶ä¸åˆ é™¤è¿æ¥çš„è§†é¢‘ ï¼Œ ä¸”ä¿ç•™ B-roll - Option + command + delete - 8.
é€Ÿåº¦æ¡<br />
- command + R - 9. é€Ÿåº¦æ¡ åˆ†æ®µ - shift + B - 10. å®Œæ•´ æ˜¾ç¤ºæ—¶é—´çº¿ - shift
+ Z - 11. å¸é™„ å¼€å…³ - N - 12. æ‰“ä¸Šæ ‡è®° - M - 13. é¢„è§ˆ å¼€å…³ - S - 14.
éŸ³é¢‘ - éŸ³é‡è°ƒèŠ‚ - Control + or Control - - 15. å­—å¹• - æ·»åŠ å­—å¹• åˆ° æµè§ˆå¤´
å³è¾¹ - Q - æ·»åŠ å­—å¹• åˆ° æµè§ˆå¤´ å·¦è¾¹ - shift + Q - ç›´æ¥æ·»åŠ  åŸºæœ¬å­—å¹• -
control + T - 16. è½¬åœº - æ·»åŠ é»˜è®¤è½¬åœº - command + T - 17. æ·»åŠ  é™æ­¢å¸§ -
Shift + H - 18. æ·»åŠ  ç¼éš™ - Option + W - -&gt; Control + D ï¼ˆè®¾ç½®å¸§æ•°ï¼‰
- 19. ä»æ•…äº‹æƒ…èŠ‚ä¸­ æå– - ä¸å½±å“ æ—¶é—´çº¿ option + command + å‘ä¸Š</p>
]]></content>
      <tags>
        <tag>finalcut</tag>
        <tag>notes</tag>
      </tags>
  </entry>
  <entry>
    <title>flatc</title>
    <url>/2023/06/28/71_flatc/</url>
    <content><![CDATA[<p>è®°å½•ä¸€ä¸‹flatbufferçš„å­¦ä¹ </p>
<span id="more"></span>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/google/flatbuffers.git</span><br><span class="line"></span><br><span class="line">cmake -G &quot;Unix Makefiles&quot; -DCMAKE_BUILD_TYPE=Release</span><br><span class="line"></span><br><span class="line">make</span><br></pre></td></tr></table></figure>
<p><a
href="https://stackoverflow.com/questions/24275803/how-to-build-flatbuffers-on-osx">reference</a></p>
<p>./flatc -t schema.fbs -- test.tflite</p>
<p>./flatc -t ~/Projects/tensorflow/tensorflow/lite/schema/schema.fbs --
~/Downloads/encoder.tflite</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a
href="https://www.jianshu.com/p/523968b82e74?tdsourcetag=s_pcqq_aiomsg">iOSä¸­FlatBuffersçš„ä½¿ç”¨</a></p>
]]></content>
  </entry>
  <entry>
    <title>Roofline modelå­¦ä¹ </title>
    <url>/2023/06/05/77_Roofline/</url>
    <content><![CDATA[<blockquote>
<p>ç»™å®šç‰¹å®šçš„è®¡ç®—å¹³å°ï¼Œæˆ‘ä»¬çš„ç®—æ³•å®ç°æ˜¯ä¸æ˜¯å·²ç»æ¦¨å¹²ç¡¬ä»¶å¹³å°çš„æœ€å¤§èƒ½åŠ›ï¼Œè¿˜æœ‰æ²¡æœ‰è¿›ä¸€æ­¥æ”¹å–„çš„ç©ºé—´ï¼Ÿè¿™äº›é—®é¢˜å¯»å¯»è§…è§…ç­”æ¡ˆï¼ŒçœŸåƒé›¾é‡Œçœ‹èŠ±ï¼Œæˆ‘ä»¬æ¸´æœ›æœ‰ä¸€åŒæ…§çœ¼ï¼Œå¸®æˆ‘ä»¬ç©¿é€è¿·æ´¥ã€‚</p>
</blockquote>
<p>å­¦ä¹ Rooflineï¼Œæœ‰ä¸€ç§ç†è®ºæŒ‡å¯¼å®è·µçš„æ„Ÿè§‰ã€‚</p>
<span id="more"></span>
<p>é˜…è¯»è®ºæ–‡ï¼š<a
href="https://people.eecs.berkeley.edu/~kubitron/cs252/handouts/papers/RooflineVyNoYellow.pdf">Roofline:
An Insightful Visual Performance Model for Floating-Point Programs and
Multicore Architectures</a></p>
<p>åšå®¢ï¼š<a
href="https://blog.csdn.net/21cnbao/article/details/116213606?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168593229216800222880877%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168593229216800222880877&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-116213606-null-null.142%5Ev88%5Einsert_down1,239%5Ev2%5Einsert_chatgpt&amp;utm_term=Roofline%3A%20An%20Insightful%20Visual%20Performance%20Model&amp;spm=1018.2226.3001.4187">Rooflineæ¨¡å‹åˆæ­¥</a></p>
<p>çŸ¥ä¹ï¼š<a href="https://zhuanlan.zhihu.com/p/34204282">Roofline
Modelä¸æ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ€§èƒ½åˆ†æ</a></p>
<p>æˆ‘çš„æ€»ç»“ï¼š</p>
<p>ã€æ›´æ–°ä¸­ã€‘</p>
]]></content>
      <tags>
        <tag>study</tag>
        <tag>Roofline</tag>
      </tags>
  </entry>
  <entry>
    <title>gdb</title>
    <url>/2023/06/19/79_gdb/</url>
    <content><![CDATA[<p>ä»Šå¤©é‡åˆ°æ®µé”™è¯¯ï¼Œæ—è§‚å¤§ä½¬ä¸€ç•ªæ“ä½œå®šä½è§£å†³ã€‚</p>
<p>å¤§å¤§æé«˜å¼€å‘æ•ˆç‡çš„å…³é”®å‡ æ­¥ï¼Œå€¼å¾—è®°å½•ä¸€ä¸‹ã€‚</p>
<span id="more"></span>
<p><code>gdb --args è¿è¡Œå‘½ä»¤</code></p>
<p><code>r</code></p>
<p><code>bt</code></p>
<p><code>p</code></p>
<h2 id="gdbè°ƒè¯•ä¼ å‚args">gdbè°ƒè¯•ä¼ å‚args</h2>
<p>å‡è®¾æˆ‘ä»¬çš„å¯æ‰§è¡Œç¨‹åºæ˜¯worker,gdbæ—¶éœ€è¦ä¼ é€’å‚æ•°arg1å’Œarg2ï¼Œæœ‰3ç§æ–¹å¼ï¼š</p>
<ul>
<li><p>æ–¹å¼1</p>
<p><code>gdb --args worker arg1 arg2</code></p></li>
<li><p>æ–¹å¼2: è¿›å…¥gdbç•Œé¢ï¼Œç„¶åè®¾ç½®å‚æ•°</p>
<p><code>gdb worker</code></p>
<p><code>set args arg1 arg2</code></p>
<p><code>show args</code></p></li>
<li><p>æ–¹å¼3: åœ¨runæŒ‡ä»¤åé¢ç›´æ¥è·Ÿå‚æ•°</p>
<p><code>gdb worker</code></p>
<p><code>r arg1 arg2</code></p></li>
</ul>
<h2 id="å‘½ä»¤">å‘½ä»¤</h2>
<p>run/<code>r</code> è¿è¡Œ</p>
<p>continue/c ç»§ç»­è¿è¡Œ</p>
<p>next/n å•æ­¥è¿è¡Œ</p>
<p>quit/ctrl+d é€€å‡ºGDB</p>
<p>print/<code>p</code> var æ‰“å°å˜é‡çš„å€¼</p>
<p>print/p &amp;var æ‰“å°å˜é‡åœ°å€</p>
<p>printf/p *addr æ‰“å°åœ°å€çš„å€¼</p>
<p><code>bt</code> æŸ¥çœ‹å‡½æ•°back trace</p>
]]></content>
      <tags>
        <tag>study</tag>
        <tag>gdb</tag>
      </tags>
  </entry>
  <entry>
    <title>FasterTransformer</title>
    <url>/2023/07/06/83_FasterTransformer/</url>
    <content><![CDATA[<p>è®°å½•ä¸€ä¸‹éƒ¨ç½²å¤§æ¨¡å‹çš„ç»å†</p>
<p>ã€æ›´æ–°ä¸­ã€‘</p>
<span id="more"></span>
<p><code>git clone https://github.com/NVIDIA/FasterTransformer.git</code></p>
<p>æŸ¥çœ‹<code>docs/bert_guide.md</code></p>
<p>https://github.com/NVIDIA/nvidia-docker</p>
<p><a href="https://fanjunyu.com/posts/bb9b6d25/">NVIDIA Docker
çš„å®‰è£…å’Œä½¿ç”¨</a> å¥½æ–‡ï¼</p>
<p>æœŸé—´éœ€è¦æ³¨æ„è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯æˆ‘æœ€åä¸€å¥æ”¹æˆäº†<code>docker run --rm --gpus all nvidia/cuda:11.0.3-base-ubuntu20.04 nvidia-smi</code></p>
<pre><code>é‡åˆ°é—®é¢˜
`permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &quot;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/version&quot;: dial unix /var/run/docker.sock: connect: permission denied`

è§£å†³æ–¹å¼ï¼š

dockerå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šé»˜è®¤èµ‹äºˆåå­—ä¸ºdockerçš„ç”¨æˆ·ç»„è¯»å†™Unix socketçš„æƒé™ï¼Œå› æ­¤åªè¦åˆ›å»ºdockerç”¨æˆ·ç»„ï¼Œå¹¶å°†å½“å‰ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­ï¼Œé‚£ä¹ˆå½“å‰ç”¨æˆ·å°±æœ‰æƒé™è®¿é—®Unix socketäº†ï¼Œè¿›è€Œä¹Ÿå°±å¯ä»¥æ‰§è¡Œdockerç›¸å…³å‘½ä»¤</code></pre>
<p>äº‹å®ä¸Šï¼Œåæ¥æˆ‘è·Ÿç€<a
href="https://blog.csdn.net/biejieyu1016/article/details/120874915">è¿™ç¯‡æ•™ç¨‹</a>åšçš„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo groupadd docker #æ·»åŠ dockerç”¨æˆ·ç»„</span><br><span class="line">sudo gpasswd -a $USER docker  #å°†ç™»é™†ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­</span><br><span class="line">newgrp docker #æ›´æ–°ç”¨æˆ·ç»„</span><br><span class="line">docker images    #æµ‹è¯•dockerå‘½ä»¤æ˜¯å¦å¯ä»¥ä½¿ç”¨sudoæ­£å¸¸ä½¿ç”¨</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           24.0.3</span><br><span class="line"> API version:       1.43</span><br><span class="line"> Go version:        go1.20.5</span><br><span class="line"> Git commit:        3713ee1</span><br><span class="line"> Built:             Wed Jul  5 20:44:55 2023</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          24.0.3</span><br><span class="line">  API version:      1.43 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.20.5</span><br><span class="line">  Git commit:       1d9c861</span><br><span class="line">  Built:            Wed Jul  5 20:44:55 2023</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.6.21</span><br><span class="line">  GitCommit:        3dce8eb055cbb6872793272b4f20ed16117344f8</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.1.7</span><br><span class="line">  GitCommit:        v1.1.7-0-g860f061</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        de40ad0</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹<code>nvidia-smi</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Fri Jul  7 14:04:28 2023       </span><br><span class="line">+---------------------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 535.54.03              Driver Version: 535.54.03    CUDA Version: 12.2     |</span><br><span class="line">|-----------------------------------------+----------------------+----------------------+</span><br><span class="line">| GPU  Name                 Persistence-M | Bus-Id        Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp   Perf          Pwr:Usage/Cap |         Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                                         |                      |               MIG M. |</span><br><span class="line">|=========================================+======================+======================|</span><br><span class="line">|   0  Quadro P620                    Off | 00000000:01:00.0  On |                  N/A |</span><br><span class="line">| 34%   41C    P8              N/A /  N/A |    191MiB /  2048MiB |      0%      Default |</span><br><span class="line">|                                         |                      |                  N/A |</span><br><span class="line">+-----------------------------------------+----------------------+----------------------+</span><br><span class="line">                                                                                         </span><br><span class="line">+---------------------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                            |</span><br><span class="line">|  GPU   GI   CI        PID   Type   Process name                            GPU Memory |</span><br><span class="line">|        ID   ID                                                             Usage      |</span><br><span class="line">|=======================================================================================|</span><br><span class="line">|    0   N/A  N/A      1833      G   /usr/lib/xorg/Xorg                           72MiB |</span><br><span class="line">|    0   N/A  N/A      1949    C+G   ...libexec/gnome-remote-desktop-daemon       38MiB |</span><br><span class="line">|    0   N/A  N/A      1990      G   /usr/bin/gnome-shell                         73MiB |</span><br><span class="line">|    0   N/A  N/A      4784      G   gnome-control-center                          1MiB |</span><br><span class="line">+---------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>
<p><a
href="https://hub.docker.com/r/nvidia/cuda/tags?page=1&amp;name=22.04">æŸ¥æ‰¾nvidia/cudaé•œåƒ</a></p>
]]></content>
      <tags>
        <tag>LLM</tag>
        <tag>notes</tag>
        <tag>tech</tag>
      </tags>
  </entry>
  <entry>
    <title>è¸ä¸ŠChatGPTæ—…ç¨‹</title>
    <url>/2023/05/26/85_ChatGPT/</url>
    <content><![CDATA[<p>å¼€å§‹ä½¿ç”¨å¹¶å­¦ä¹ ChatGPTä»¥åŠç›¸å…³çš„<code>LLM(Large Language Model)</code>ï¼Œä¸ç„¶å°±è¢«æ—¶ä»£æ·˜æ±°äº†ï½</p>
<span id="more"></span>
<h1 id="å†™åœ¨å‰é¢">0.å†™åœ¨å‰é¢</h1>
<p>ä»å»å¹´11æœˆåº•ChatGPTå‘å¸ƒï¼Œåˆ°åæ¥çˆ†ç«ï¼Œæ”¹å˜äº’è”ç½‘ï¼Œè¿™åŠå¹´æ—¶é—´æˆ‘å¯¹ChatGPTè¿˜æ˜¯æ¯”è¾ƒå†·æ¼ çš„ã€‚</p>
<p>æœŸé—´æˆ‘ä¹Ÿä½“éªŒäº†ä¸€ä¸‹ï¼Œä»¥åŠä½“éªŒäº†<code>cursor</code>ï¼ˆä¸€ä¸ªä½¿ç”¨chatgpt-4çš„aiè¾…åŠ©ç¼–ç¨‹å·¥å…·ï¼‰ï¼Œä½†è‡ªå§‹è‡³ç»ˆè¿˜æ˜¯å……æ»¡äº†ä¸ä¿¡ä»»æ„Ÿã€‚æ‰€ä»¥ä¹Ÿä¸€ç›´æ²¡æ³¨å†Œè´¦å·ï¼Œæ²¡æƒ³è¿›ä¸€æ­¥æ¢ç´¢ã€‚</p>
<p>ç›´åˆ°ä»Šå¤©ï¼Œæˆ‘æ”¹å˜äº†å¯¹å®ƒçœ‹æ³•ï¼Œæˆ–è€…è¯´æˆ‘æ”¹å˜äº†çœ‹å®ƒçš„è§’åº¦ã€‚</p>
<p>ä»¥å‰æ½œæ„è¯†é‡Œæ˜¯è§‰å¾—ChatGPTæ˜¯æ™ºå›Šã€å†›å¸ˆã€ç®¡å®¶ä¹‹ç±»çš„èº«ä»½ï¼Œè§‰å¾—äººçš„ä¸»è§‚èƒ½åŠ¨æ€§å—åˆ°é™åˆ¶ï¼Œæ‰€ä»¥ä¼šæŠµåˆ¶ã€‚</p>
<p>ç°åœ¨æˆ‘æƒ³æŠŠå®ƒå½“å·¥å…·ï¼Œæ¥ä¾¿åˆ©æˆ‘çš„å·¥ä½œå’Œç”Ÿæ´»ï¼Œä¾¿æ²¡æœ‰äº†å¿ƒç†é˜»ç¢ã€‚</p>
<p>äºæ˜¯ï¼ŒChatGPTæ—…ç¨‹ï¼Œå‡ºå‘ï½</p>
<h1 id="æ³¨å†Œchatgpt">1. æ³¨å†ŒChatGPT</h1>
<p>æˆ‘å‚è€ƒäº†è¿™ç¯‡æ–‡ç« <a
href="https://www.xnbeast.com/create-openai-chatgpt-account/">ChatGPTæ³¨å†Œæ•™ç¨‹æ”»ç•¥ï¼šè§£å†³æ‰‹æœºæ— æ³•æ¥æ”¶éªŒè¯ç é—®é¢˜ï¼ˆäº²æµ‹æœ‰æ•ˆï¼‰</a>
ï¼Œåœ¨<a
href="https://sms-activate.org/">sms-activate</a>è´­ä¹°äº†ä¸´æ—¶å›½å¤–æ‰‹æœºå·â€”â€”</p>
<ul>
<li><p>ä¹°äº†ä¸ªè‹±å›½çš„æ‰‹æœºå·ï¼Œç»“æœ</p>
<p><code>Your account was flagged for potential abuse. If you feel this is an error, please contact us at help.openai.com</code></p></li>
<li><p>æ¢äº†ä¸ªç¾å›½çš„ä¹Ÿä¸è¡Œ</p></li>
<li><p>æœ€åæ¢äº†ä¸ªå°åº¦å°¼è¥¿äºšçš„æ‰‹æœºå·ï¼Œé¡ºåˆ©æ³¨å†Œï¼Œä½†æ˜¯è¿›å…¥ChatGPTåˆæ˜¾ç¤º</p>
<p><code>Sorry, you have been blocked</code></p></li>
</ul>
<p>å‡ºå¸ˆä¸åˆ©å•Šâ€¦â€¦çªç„¶æƒ³èµ·æ¥æˆ‘ä¹°çš„VPNçš„ç»´æŠ¤è€…è¯´è¿‡ï¼Œè¿™ä¸ªvpnä¸æchatGPTé‚£ç ´ç©æ„å„¿ã€‚äºæ˜¯åœ¨tgä¸Šæ‰¾äº†ä¸ª<code>@chatgptzs_bot</code>ï¼Œæš‚æ—¶å…ˆç”¨ç€ï¼Œä¹ŸæŒºå¥½ç”¨çš„ã€‚</p>
<p>ä½†æ˜¯è¿˜ä¸ç”˜å¿ƒï¼Œä¹‹åæˆ‘ç”¨<code>è‡ªç”±é²¸</code>çš„æ¬§æ´²èŠ‚ç‚¹ï¼Œå¼€å¯å…¨å±€æ¨¡å¼ï¼Œèƒ½æ­£å¸¸ä½¿ç”¨ChatGPTäº†ã€‚ä¸è¿‡ç›®å‰ä¸æ˜¯ä»˜è´¹ç”¨æˆ·ï¼Œæ‰€ä»¥æ²¡æœ‰è”ç½‘åŠŸèƒ½å’Œæ’ä»¶åŠŸèƒ½ã€‚</p>
<h1 id="chatgptä½¿ç”¨æŠ€å·§">2. ChatGPTä½¿ç”¨æŠ€å·§</h1>
<p>æ˜¨æ™šåœ¨Bç«™çœ‹åˆ°ä¸€ä¸ªè§†é¢‘æŒºå¥½çš„â€”â€”</p>
<p><a
href="https://b23.tv/XCclvE1">å­¦å®Œè¿™ä¸ªè§†é¢‘ï¼Œç®€å†åŠ ä¸€æ¡ï¼šç†Ÿç»ƒæŒæ¡ChatGPTè§£å†³å¤æ‚é—®é¢˜ï½œChatGPTä½¿ç”¨æ•™ç¨‹-å“”å“©å“”å“©</a></p>
<p>è¯´å®è¯ï¼Œæˆ‘ä¹Ÿæ˜¯æœ‰ä¸€éƒ¨åˆ†è¢«è¿™ä¸ªè§†é¢‘é©±åŠ¨æ¥æChatGPTçš„ã€‚</p>
<h2 id="ä¹”å“ˆé‡Œjohariæ²Ÿé€šè§†çª—">ä¹”å“ˆé‡Œ(Johari)æ²Ÿé€šè§†çª—</h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>ä½ çŸ¥é“</th>
<th>ä½ ä¸çŸ¥é“</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GPTçŸ¥é“</td>
<td>å…¬å¼€åŒº</td>
<td>ç›²åŒº</td>
</tr>
<tr class="even">
<td>GPTä¸çŸ¥é“</td>
<td>éšç§åŒº</td>
<td>æœªçŸ¥åŒº</td>
</tr>
</tbody>
</table>
<ul>
<li><p>ç›²åŒºï½œé—®æ³•1:
<code>æˆ‘æƒ³äº†è§£xxxï¼Œæˆ‘åº”è¯¥å‘ä½ é—®å“ªäº›é—®é¢˜ï¼Ÿ</code></p></li>
<li><p>ç›²åŒºï½œé—®æ³•2:<code>è¯·ç»™æˆ‘åˆ—å‡ºxxxé¢†åŸŸ/è¡Œä¸šç›¸å…³çš„ï¼Œæœ€å¸¸ç”¨çš„50ä¸ªæ¦‚å¿µï¼Œå¹¶åšç®€å•è§£é‡Šã€‚å¦‚æœæœ‰è‹±æ–‡ç¼©å†™ï¼Œè¯·ç»™å‡ºå®Œæ•´çš„è‹±æ–‡è§£é‡Šã€‚</code></p></li>
<li><p>ç›²åŒºï½œé—®æ³•3:<code>è¯·è¯¦ç»†ä»‹ç»ä¸€ä¸‹xxxçš„ä¸»è¦ç”Ÿå¹³äº‹è¿¹ã€‚</code>
<code>è¯·è¯¦ç»†ä»‹ç»ä¸€ä¸‹xxxå…¬å¸çš„å‘å±•å†ç¨‹ã€‚</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ£€éªŒè®¤çŸ¥:<code>å¯¹äºxxxä¸»é¢˜/æŠ€èƒ½ï¼Œä½ è®¤ä¸ºå“ªäº›æ˜¯æˆ‘å¿…é¡»ç†è§£å’ŒæŒæ¡çš„æ ¸å¿ƒè¦ç‚¹ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ£€éªŒè®¤çŸ¥:<code>æˆ‘ç†è§£çš„xxxæ˜¯è¿™æ ·çš„ï¼Œä½ è§‰å¾—æˆ‘çš„ç†è§£å¯¹å—ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ£€éªŒè®¤çŸ¥:<code>æˆ‘å¯¹xxxæœ‰ä¸€äº›æƒ³æ³•ï¼Œä½ èƒ½å¸®æˆ‘æ‰¹åˆ¤æ€§åœ°åˆ†æä¸€ä¸‹è¿™äº›æƒ³æ³•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹å—ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ£€éªŒè®¤çŸ¥:<code>æˆ‘æ­£åœ¨è€ƒè™‘xxxçš„å†³å®šï¼Œä½ èƒ½å¸®æˆ‘åˆ†æä¸€ä¸‹å¯èƒ½çš„ç»“æœå’Œå½±å“å—ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ‰©å……è®¤çŸ¥:<code>æˆ‘çŸ¥é“xxxçš„æ¦‚å¿µï¼Œæˆ‘æƒ³çŸ¥é“æ›´å¤šå…³äºxxxçš„ä¿¡æ¯ã€‚</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ‰©å……è®¤çŸ¥:<code>æˆ‘åœ¨xxxé—®é¢˜ä¸Šé‡åˆ°å›°éš¾ï¼Œä½ èƒ½æä¾›ä¸€äº›å¯èƒ½çš„è§£å†³æ–¹æ¡ˆæˆ–å»ºè®®å—ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ‰©å……è®¤çŸ¥:<code>æˆ‘æƒ³è¦æ·±å…¥å­¦ä¹ xxxï¼Œä½ èƒ½æ¨èä¸€äº›è¿›é˜¶çš„å­¦ä¹ èµ„æºæˆ–å­¦ä¹ è·¯å¾„å—ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ‰©å……è®¤çŸ¥:<code>æˆ‘æƒ³è¦åœ¨xxxé¢†åŸŸæœ‰æ‰€åˆ›æ–°ï¼Œä½ èƒ½æä¾›ä¸€äº›å¯å‘æˆ–æƒ³æ³•å—ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ‰©å……è®¤çŸ¥:<code>æˆ‘æƒ³åœ¨xxxé¢†åŸŸæå‡è‡ªå·±ï¼Œä½ èƒ½æ ¹æ®æœ€æ–°çš„ç ”ç©¶å’Œè¶‹åŠ¿ç»™æˆ‘ä¸€äº›å»ºè®®å—ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ‰©å……è®¤çŸ¥:<code>æˆ‘æ­£åœ¨è€ƒè™‘å­¦ä¹ xxxï¼Œä½ èƒ½ç»™æˆ‘ä¸€äº›å…³äºè¿™ä¸ªé¢†åŸŸæœªæ¥å‘å±•çš„è§‚ç‚¹å—ï¼Ÿ</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ‰©å……è®¤çŸ¥:<code>ï¼ˆèƒŒæ™¯ä¿¡æ¯ï¼‰æˆ‘è¦åšå…³äºxxxçš„ç ”ç©¶ï¼Œæˆ‘è®¤ä¸ºåŸå› æ˜¯ï¼Œè¿˜æœ‰å…¶ä»–å¯èƒ½çš„åŸå› å—ï¼Ÿç»™å‡ºä¸€äº›å¯èƒ½çš„ç ”ç©¶å‡è®¾ã€‚</code></p></li>
<li><p>å…¬å¼€åŒºï½œæ‰©å……è®¤çŸ¥:<code>æˆ‘æ˜¯ä¸€ä¸ªxxè¡Œä¸šæ–°æ‰‹ï¼Œé©¬ä¸Šè¦é‡‡è®¿è¿™ä¸ªè¡Œä¸šçš„èµ„æ·±å¤§ä½¬ï¼Œæˆ‘åº”è¯¥å‘ä»–è¯·æ•™å“ªäº›æœ‰ä»·å€¼çš„é—®é¢˜ï¼Ÿ</code></p></li>
<li><p>ç›²åŒºï½œé—®æ³•1: <code>ä½ æ€ä¹ˆçœ‹å¾…è¿™ç§ç°è±¡ï¼Ÿ</code></p></li>
<li><p>ç›²åŒºï½œé—®æ³•2: <code>å¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ</code></p></li>
<li><p>ç›²åŒºï½œé—®æ³•3: <code>è¿™ä¼šå¯¹xxxäº§ç”Ÿä»€ä¹ˆæ ·çš„å½±å“ï¼Ÿ</code></p></li>
<li><p>ç›²åŒºï½œé—®æ³•4: <code>ä½ è§‰å¾—xxxåº”è¯¥æ€ä¹ˆåšï¼Ÿ</code></p></li>
<li><p>æœªçŸ¥åŒºï½œé—®æ³•1:
<code>å¦‚æœxxxï¼Œè¿™å¯¹ç¤¾ä¼šä¼šäº§ç”Ÿä»€ä¹ˆå½±å“ï¼Ÿ</code></p></li>
<li><p>æœªçŸ¥åŒºï½œåå‘æé—®:
<code>ä¸ºäº†æµ‹è¯•æˆ‘å¯¹xxxçš„äº†è§£ç¨‹åº¦ï¼Œä½ ä¼šé—®æˆ‘ä»€ä¹ˆé—®é¢˜æ¥æ£€éªŒæˆ‘çš„æ°´å¹³ï¼Œæœ€å°‘10ä¸ª</code></p></li>
<li><p>æœªçŸ¥åŒºï½œåå‘æé—®:
<code>æˆ‘æ˜¯xxé¢†åŸŸçš„ä¸“å®¶ï¼Œä½ ä¼šé—®æˆ‘å“ªäº›é—®é¢˜æ¥æ£€éªŒæˆ‘çš„ä¸“ä¸šæ°´å¹³ï¼Ÿæœ€å°‘10ä¸ªã€‚</code></p></li>
<li><p>æœªçŸ¥åŒºï½œåå‘æé—®:
<code>ç°åœ¨æˆ‘ä»¬ç©ä¸ªâ€œä½ é—®æˆ‘ç­”â€çš„æ¸¸æˆï¼Œç›®çš„æ˜¯ä¸ºäº†æµ‹è¯•æˆ‘åœ¨xxxxæ–¹é¢çš„ä¸“ä¸šæ°´å¹³ã€‚ä½ è´Ÿè´£æé—®ï¼Œæˆ‘è´Ÿè´£å›ç­”ã€‚ä½ è¦æ ¹æ®æˆ‘çš„ç­”æ¡ˆè¿›è¡Œåé¦ˆã€è¯„ä»·ã€è¡¥å……ã€‚å¦‚æœæˆ‘è¯´ä¸çŸ¥é“ï¼Œä½ å°±ç›´æ¥è¾“å‡ºæ­£ç¡®ç­”æ¡ˆï¼Œç„¶åä½ ç»§ç»­æé—®ã€‚</code></p></li>
<li><p>æœªçŸ¥åŒºï½œåå‘æé—®:
<code>æˆ‘å·²ç»å¾ˆç²¾é€šxxxäº†ï¼Œæˆ‘æƒ³çŸ¥é“æˆ‘æ˜¯å¦è¿˜æœ‰éœ€è¦å­¦ä¹ çš„åœ°æ–¹ï¼Ÿ</code></p></li>
</ul>
<p>1 çŸ¥é“è‡ªå·±è¦å¹²ä»€ä¹ˆï¼Œä½†æ˜¯ä¸çŸ¥é“ChatGPTèƒ½å¸®ä½ ä»€ä¹ˆã€‚ -
<code>æˆ‘è¦åšxxxï¼Œä½ èƒ½å¸®æˆ‘åšä»€ä¹ˆï¼Ÿ</code></p>
<p>2 çŸ¥é“è¦ChatGPTå¸®ä½ åšä»€ä¹ˆï¼Œä½†æ˜¯ä½ ä¸çŸ¥é“ç»™å®ƒè¾“å…¥ä»€ä¹ˆå…·ä½“çš„ä¿¡æ¯ã€‚ -
<code>æˆ‘æƒ³è¦ä½ xxxï¼Œæˆ‘åº”è¯¥ç»™ä½ è¾“å…¥ä»€ä¹ˆä¿¡æ¯ï¼Ÿ</code></p>
<p>3 ç›´æ¥ç»™ChatGPTæŒ‡ä»¤ã€‚ä»»åŠ¡ç›®æ ‡ã€èƒŒæ™¯ä¿¡æ¯ã€è¾“å‡ºè¦æ±‚éƒ½éå¸¸æ¸…æ™°ã€‚ -
<code>è¯·æ¨èï¼ˆä¹¦åã€ç”µè§†å‰§ã€ç”µå½±ã€ç½‘ç«™ã€åšä¸»ã€ä¸“å®¶ã€å­¦ä¹ èµ„æºï¼‰ ç­‰ç­‰ã€‚è¯·ç¿»è¯‘.è¯·æ€»ç»“.è¯·æ¶¦è‰²ã€‚</code></p>
<h1 id="llmå­¦ä¹ ">3. LLMå­¦ä¹ </h1>
<p>æˆ‘ï¼šç»™æˆ‘æ¨èä¸€äº›å­¦ä¹ å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„èµ„æ–™å§</p>
<blockquote>
<p>å½“ç„¶ï¼ä»¥ä¸‹æ˜¯ä¸€äº›å­¦ä¹ å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„èµ„æ–™æ¨èï¼š 1.
è®ºæ–‡å’Œç ”ç©¶æ–‡ç« ï¼šæ·±å…¥äº†è§£å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„åŸç†å’ŒæŠ€æœ¯ï¼Œå¯ä»¥é˜…è¯»ç›¸å…³çš„è®ºæ–‡å’Œç ”ç©¶æ–‡ç« ï¼Œä¾‹å¦‚ã€ŠTransformers:
Attention Is All You Needã€‹ã€ã€ŠBERT: Pre-training of Deep Bidirectional
Transformers for Language Understandingã€‹å’Œã€ŠGPT (Generative Pre-trained
Transformer)ã€‹ã€‚ 2.
åšå®¢æ–‡ç« å’Œæ•™ç¨‹ï¼šæœ‰è®¸å¤šåšå®¢æ–‡ç« å’Œæ•™ç¨‹å¯ä¾›å­¦ä¹ ï¼Œè¿™äº›æ–‡ç« ä¼šè§£é‡Šå¤§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„æ¦‚å¿µã€å®ç°å’Œåº”ç”¨ã€‚å¯ä»¥æŸ¥æ‰¾åƒTowards
Data Scienceã€Mediumå’ŒOpenAI Blogç­‰å¹³å°ä¸Šçš„ç›¸å…³æ–‡ç« ã€‚ 3. GitHub
ä¸Šçš„ä»£ç åº“ï¼šå­¦ä¹ å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„å®ç°å’Œä»£ç ç»†èŠ‚ï¼Œå¯ä»¥æŸ¥çœ‹GitHubä¸Šçš„å¼€æºä»£ç åº“ï¼Œå¦‚Hugging
Faceçš„transformersåº“ã€OpenAIçš„GPTä»£ç åº“ç­‰ã€‚ 4.
è§†é¢‘æ•™ç¨‹å’Œåœ¨çº¿è¯¾ç¨‹ï¼šæœ‰ä¸€äº›åœ¨çº¿è¯¾ç¨‹å’Œè§†é¢‘æ•™ç¨‹ä¸“é—¨ä»‹ç»å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹ã€‚ä¾‹å¦‚ï¼ŒCoursera
ä¸Šçš„ "Natural Language Processing with Sequence Models" å’Œ YouTube ä¸Šçš„
"The Transformer Explained" ç­‰ã€‚ 5.
ç¤¾åŒºå’Œè®ºå›ï¼šåŠ å…¥ä¸è‡ªç„¶è¯­è¨€å¤„ç†å’Œå¤§è§„æ¨¡è¯­è¨€æ¨¡å‹ç›¸å…³çš„ç¤¾åŒºå’Œè®ºå›ï¼Œä¸å…¶ä»–äººäº¤æµè®¨è®ºï¼Œè·å–å®è·µç»éªŒå’Œæœ€æ–°åŠ¨æ€ã€‚</p>
<p>è¿™äº›èµ„æºå¯ä»¥å¸®åŠ©ä½ æ·±å…¥äº†è§£å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„èƒŒååŸç†ã€åº”ç”¨å’Œå®ç°ã€‚å¸Œæœ›å¯¹ä½ çš„å­¦ä¹ æœ‰æ‰€å¸®åŠ©ï¼å¦‚éœ€æ›´å…·ä½“çš„èµ„æºæˆ–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚</p>
</blockquote>
<h2 id="å­¦ä¹ è§†é¢‘">å­¦ä¹ è§†é¢‘</h2>
<p>Google Cloud Tech</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=zizonToFXDs">Introduction
to Large Language Models</a></li>
</ul>
<p>ZOMI</p>
<ul>
<li><p><a
href="https://www.youtube.com/watch?v=XujuQB9AxGA">ChatGPTç‹‚é£™åŸç†å‰–æï¼šGPTç³»åˆ—è¯¦è§£ï¼ã€ChatGPTã€‘ç³»åˆ—ç¬¬01ç¯‡</a></p></li>
<li><p><a
href="https://www.youtube.com/watch?v=qf2zcev7mHQ">ChatGPTç‹‚é£™ï¼šå¼ºåŒ–å­¦ä¹ RLHFä¸PPOï¼ã€ChatGPTã€‘ç³»åˆ—ç¬¬02ç¯‡</a></p></li>
<li><p><a
href="https://www.youtube.com/watch?v=Oy-8BqwXck8&amp;t=1s">ChatGPTç‹‚é£™ï¼šInstructGPTè§£æï¼ã€ChatGPTã€‘åŸç†ç¬¬03ç¯‡</a></p></li>
<li><p>ã€ChatGPTç‹‚é£™ï¼šInstructGPTè§£æï¼ã€‘æ€è€ƒï¼š</p>
<ul>
<li>å¤§æ¨¡å‹é€šè¿‡è®¡ç®—çš„æ–¹å¼æ¨¡æ‹Ÿäººç±»çš„æ€è€ƒï¼Œç±»ä¼¼äºChatGPTçš„RLHFæŠ€æœ¯æ˜¯å¦ä¼šç»™ä¸–ç•Œå¸¦æ¥æ–°çš„æŠ€æœ¯äº§ä¸šé©å‘½ï¼Ÿ</li>
<li>ChatGPT ä½¿ç”¨äº† Ray ä½œä¸ºç»†ç²’åº¦çš„å¹¶è¡Œè®¡ç®—å’Œæ˜‡æ„è®¡ç®—ï¼Œç®¡ç†åˆ†é…
RLIDLæ¨¡å‹å®Œæˆå¤æ‚è®­ç»ƒä»»åŠ¡ï¼Œæ–¹ä¾¿åˆ©ç”¨å¼ºåŒ–å­¦ä¹ å¯¹ç¯å¢ƒå’Œè®¡ç®—ä»»åŠ¡è¿›è¡Œæ§åˆ¶ï¼Œè¿™å¯¹Aæ¡†æ¶çš„åˆ†å¸ƒå¼èƒ½åŠ›è¾¹ç•Œå¸¦æ¥å“ªäº›æ–°çš„å†²å‡»ï¼Ÿ</li>
<li>ChatGPT
éå¸¸é‡æ•°æ®äº¤äº’ï¼Œå­˜ç®—ä¸€ä½“æŠ€æœ¯ä¼šä¸ä¼šé’ˆå¯¹ChatGPTç­‰åº”ç”¨çš„ç°ä¸“ç”¨èŠ¯ç‰‡å’Œæ–°çš„æ¶æ„?</li>
</ul></li>
</ul>
<p><a
href="https://imzhanghao.com/2023/02/24/chatgpt/">ChatGPTæ¨¡å‹çš„ä¸‰å±‚ç†è§£</a></p>
<p><a
href="https://github.com/dalinvip/Awesome-ChatGPT">Awesome-ChatGPT</a></p>
<p>2023.6.1 å­¦ä¹ <a
href="https://www.youtube.com/watch?v=nzqlFIcCSWQ">Transformerè®ºæ–‡é€æ®µç²¾è¯»</a></p>
]]></content>
      <tags>
        <tag>LLM</tag>
        <tag>tech</tag>
        <tag>ChatGPT</tag>
      </tags>
  </entry>
  <entry>
    <title>Using Ubuntu from scratch</title>
    <url>/2023/06/30/87_Using-Ubuntu-from-scratch/</url>
    <content><![CDATA[<p>åŸæ¥çš„Ubuntuç³»ç»Ÿçš„ç”¨æˆ·æƒé™æå´©äº†ï¼Œä»å¤´å¼€å§‹æä¸€ä¸ªï½</p>
<span id="more"></span>
<h1 id="ç³»ç»Ÿå®‰è£…">1.ç³»ç»Ÿå®‰è£…</h1>
<h2 id="ä¸‹è½½">1.1 ä¸‹è½½</h2>
<p><a href="http://mirrors.aliyun.com/ubuntu-releases/20.04/">Ubuntu
20.4é•œåƒ</a></p>
<h2 id="æŠŠisoé•œåƒæ–‡ä»¶è½¬æ¢æˆdmgæ–‡ä»¶">1.2 æŠŠisoé•œåƒæ–‡ä»¶è½¬æ¢æˆdmgæ–‡ä»¶</h2>
<p><code>cd Downloads</code></p>
<p><code>hdiutil convert -format UDRW -o ubuntu.iso ubuntu-20.04.6-desktop-amd64.iso</code></p>
<ul>
<li><p><code>-format</code>ä¸ºç”Ÿæˆæ–‡ä»¶çš„æƒé™ï¼›</p></li>
<li><p><code>UDRW</code> :è¡¨ç¤ºè½¬æ¢æˆæœ‰read/writeçš„æƒé™çš„é•œåƒã€‚</p></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Reading Driver Descriptor Map (DDM : 0)â€¦</span><br><span class="line">Reading Ubuntu 20.04.6 LTS amd64         (Apple_ISO : 1)â€¦</span><br><span class="line">Reading Apple (Apple_partition_map : 2)â€¦</span><br><span class="line">Reading Ubuntu 20.04.6 LTS amd64         (Apple_ISO : 3)â€¦</span><br><span class="line">.....................................................</span><br><span class="line">Reading EFI (Apple_HFS : 4)â€¦</span><br><span class="line">.....................................................</span><br><span class="line">Reading Ubuntu 20.04.6 LTS amd64         (Apple_ISO : 5)â€¦</span><br><span class="line">...............................................................................</span><br><span class="line">Elapsed Time:  4.971s</span><br><span class="line">Speed: 834.8MB/s</span><br><span class="line">Savings: 0.0%</span><br><span class="line">created: /Users/zhaodongyu/Downloads/ubuntu.iso.dmg</span><br></pre></td></tr></table></figure>
<h2 id="çƒ§å½•è‡³ä¼˜ç›˜">1.3 çƒ§å½•è‡³ä¼˜ç›˜</h2>
<p>æ³¨æ„æ‰¾åˆ°Uç›˜çš„è·¯å¾„ï¼Œä½¿ç”¨<code>diskutil list</code>å‘½ä»¤æŸ¥è¯¢ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/dev/disk4 (external, physical):</span><br><span class="line"><span class="meta prompt_">   #</span><span class="language-bash">:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:     FDisk_partition_scheme                        *16.0 GB    disk4</span><br><span class="line">   1:             Windows_FAT_32 NO NAME                 16.0 GB    disk4s1</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°Uç›˜çš„è·¯å¾„ä¸º/dev/disk4ï¼Œå¹¶ä½¿ç”¨å‘½ä»¤è¡Œå¸è½½Uç›˜ï¼š</p>
<p><code>diskutil unmountDisk /dev/disk4</code></p>
<p>æ˜¾ç¤ºä¿¡æ¯ï¼šUnmount of all volumes on disk4 was successful</p>
<p>æŠŠisoæ–‡ä»¶å†™å…¥Uç›˜ <code>mv ubuntu.iso.dmg ubuntu.iso</code></p>
<p><code>sudo dd if=./ubuntu.iso of=/dev/disk4 bs=1m</code></p>
<p>ç­‰äº†å‡ åˆ†é’Ÿåï¼Œæ˜¾ç¤º <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">4149+1 records in</span><br><span class="line">4149+1 records out</span><br><span class="line">4351463424 bytes transferred in 369.833082 secs (11766020 bytes/sec)</span><br></pre></td></tr></table></figure></p>
<p>å¼¹å‡ºä¼˜ç›˜</p>
<p><code>sudo eject /dev/disk4</code></p>
<h1 id="ç³»ç»Ÿè®¾ç½®">2.ç³»ç»Ÿè®¾ç½®</h1>
<h2 id="å¼€å¯sshè¿æ¥">2.1 å¼€å¯SSHè¿æ¥</h2>
<p><a
href="https://blog.csdn.net/jackghq/article/details/54974141">ubuntuå¼€å¯SSHæœåŠ¡è¿œç¨‹ç™»å½•</a></p>
<p><code>sudo apt-get install openssh-server</code></p>
<p>å¯ä»¥sshè¿æ¥äº†</p>
<h2 id="æ›´æ–°vim">2.2 æ›´æ–°vim</h2>
<ul>
<li><p>å¸è½½æ—§ç‰ˆçš„viï¼šsudo apt-get remove vim-common</p></li>
<li><p>å®‰è£…æ–°ç‰ˆçš„vimï¼šsudo apt-get install vim</p></li>
</ul>
<h2 id="æŒ‚è½½ç¡¬ç›˜">2.3 æŒ‚è½½ç¡¬ç›˜</h2>
<p>æŸ¥çœ‹ç£ç›˜ä¿¡æ¯å‘½ä»¤: <code>sudo fdisk -l</code></p>
<p>å…¶ä¸­æœ‰ï¼š <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Disk /dev/sdb: 931.51 GiB, 1000204886016 bytes, 1953525168 sectors</span><br><span class="line">Disk model: ST1000DM003-1SB1</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br></pre></td></tr></table></figure></p>
<p>æŸ¥çœ‹ç¡¬ç›˜çš„UUIDå‘½ä»¤: <code>sudo blkid</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/dev/sdb: UUID=&quot;2b4d86ff-3fb8-40c4-b5ef-dd840f65f94f&quot; BLOCK_SIZE=&quot;4096&quot; TYPE=&quot;ext4&quot;</span><br></pre></td></tr></table></figure>
<p>mkdiråˆ›å»ºæŒ‚è½½ç‚¹data</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zhaodongyu@portal:/$ sudo mkdir data</span><br><span class="line">zhaodongyu@portal:/$ ls</span><br><span class="line">bin   cdrom  dev  home  lib32  libx32      media  opt   root  sbin  srv       sys  usr</span><br><span class="line">boot  data   etc  lib   lib64  lost+found  mnt    proc  run   snap  swapfile  tmp  var</span><br></pre></td></tr></table></figure>
<p>æ‰‹åŠ¨æŒ‚è½½</p>
<p><code>sudo mount /dev/sdb /data</code></p>
<p>æ°¸ä¹…æ€§æŒ‚è½½åˆ†åŒºï¼Œä¿®æ”¹åˆ†åŒºæ–‡ä»¶ï¼Œè¾“å…¥å‘½ä»¤<code>sudo vi /etc/fstab</code>ï¼Œå¢åŠ 
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UUID=2b4d86ff-3fb8-40c4-b5ef-dd840f65f94f /data           ext4    defaults          0       0</span><br></pre></td></tr></table></figure></p>
<p>æŸ¥çœ‹æŒ‚è½½å¥½çš„ç¡¬ç›˜ä¿¡æ¯ <code>df -hT</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/dev/sdb       ext4   916G  207G  663G  24% /data</span><br></pre></td></tr></table></figure>
<h2 id="å®‰è£…-vs-code">2.4 å®‰è£… VS code</h2>
<p>æ‰“å¼€ Ubuntu
è½¯ä»¶ä¸­å¿ƒï¼Œå¹¶ä¸”æœç´¢<code>Visual Studio Code</code>,ç„¶åå®‰è£…åº”ç”¨</p>
<h2 id="å®‰è£…make">2.5 å®‰è£…make</h2>
<p><code>sudo apt install make</code></p>
<h2 id="cmakeå‡çº§">2.5 cmakeå‡çº§</h2>
<p><a
href="https://blog.csdn.net/Boys_Wu/article/details/104940575">å‚è€ƒ</a></p>
<p>æˆ‘åœ¨<a
href="https://cmake.org/download/">cmakeå®˜ç½‘</a>ä¸‹è½½äº†<code>cmake-3.27.0-rc4-linux-x86_64.tar.gz</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf cmake-3.27.0-rc4-linux-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line">sudo mv cmake-3.27.0-rc4-linux-x86_64 /opt/cmake-3.27.0</span><br><span class="line"></span><br><span class="line">sudo ln -sf /opt/cmake-3.27.0/bin/* /usr/bin/</span><br><span class="line"></span><br><span class="line">cmake --version</span><br><span class="line">    cmake version 3.27.0-rc4</span><br><span class="line"></span><br><span class="line">sudo vim ~/.bashrc </span><br><span class="line">    export  PATH=$PATH:/opt/cmake-3.27.0/bin</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<h2 id="gccé™çº§">2.6 gccé™çº§</h2>
<p>åŸæ¥çš„gccç‰ˆæœ¬æ˜¯9.4</p>
<p><code>sudo apt-get install gcc-9</code></p>
<p><code>sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 100</code></p>
<p>sudo apt-get install g++-9</p>
<p>sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-9
100</p>
]]></content>
      <tags>
        <tag>notes</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Crawler</title>
    <url>/2020/05/19/89_Crawler/</url>
    <content><![CDATA[<p>èƒŒæ™¯ï¼šå›½å†…è¡¨æƒ…è¯†åˆ«çš„æ•°æ®é›†å¤ªå°‘äº† &amp;
è¡¨æƒ…æ•°æ®é›†åŸºæœ¬éƒ½æ˜¯å¤–å›½äººè„¸ï¼Œè®­å‡ºæ¥çš„æ¨¡å‹å®é™…ä½¿ç”¨æ•ˆæœä¸å¥½ã€‚</p>
<p>äºæ˜¯ï¼Œåœ¨ç™¾åº¦ä¸Šçˆ¬äº†ä¸€æ‰¹æ•°æ®ä¸‹æ¥è¡¥å……åˆ°æ•°æ®é›†é‡Œé¢ã€‚</p>
<p>[çˆ¬è™«æœ‰é£é™©ï¼Œæ“ä½œéœ€è°¨æ…]</p>
<span id="more"></span>
<h1 id="å†™åœ¨å‰é¢çš„è¯">å†™åœ¨å‰é¢çš„è¯</h1>
<p>ä¸€å…±ä¸¤ä¸ªæ–‡ä»¶</p>
<ul>
<li><p>crawler.py</p>
<p>ä¸»ç¨‹åºï¼šå®ç°çˆ¬è™«åŠŸèƒ½ï¼Œçˆ¬å–çš„å…³é”®è¯åœ¨keywords.txté‡Œé¢</p></li>
<li><p>keywords.txt</p>
<p>å…³é”®è¯ï¼šæ¯”å¦‚çˆ¬å¼€å¿ƒçš„å›¾ï¼Œå°±å¯ä»¥è®¾ç½® happy é«˜å…´ é«˜å…´è¡¨æƒ… é«˜å…´çš„äºº
é«˜å…´è„¸ å¼€å¿ƒ å¼€å¿ƒè„¸ å¼€å¿ƒçš„äºº å¼€å¿ƒè¡¨æƒ… æ¬¢æ„‰ æ„‰æ‚¦ æ„‰æ‚¦è¡¨æƒ… æ¬¢æ„‰è¡¨æƒ…
å¹¸ç¦è¡¨æƒ… å¹¸ç¦çš„è„¸ å¹¸ç¦çš„äºº æ„‰æ‚¦è¡¨æƒ… æ¬¢æ¬£è¡¨æƒ… æ¬¢å–œè¡¨æƒ… å–œæ‚¦</p>
<p><strong>æ¯ä¸ªå…³é”®è¯ç”¨æ¢è¡Œåˆ†éš”</strong></p></li>
</ul>
<p>è¿è¡Œpythonæ–‡ä»¶åï¼Œéœ€è¦ç­‰å¾…ä¸€ä¼šï¼ˆæ­£åœ¨è·å–å›¾ç‰‡çš„<code>url</code>ï¼‰ï¼Œç„¶åå°±æ˜¾ç¤ºä¸‹è½½logäº†ã€‚</p>
<p>ç»“æœä¼šä¿å­˜åˆ°<code>image</code>æ–‡ä»¶å¤¹å†…ï¼Œåç»­éœ€è¦è¿›ä¸€æ­¥æ‰¹å¤„ç†æ–‡ä»¶ä»¥åŠè¿›è¡Œäººè„¸æå–ã€å¯¹é½ã€æ¸…æ´—ç­‰å·¥ä½œã€‚</p>
<p>æ¸…æ´—æ•°æ®é›†è¿˜æ˜¯ç›¸å½“ç¹ççš„ï¼Œå»ºè®®ä¸è¦æµªè´¹æ—¶é—´åœ¨æ•°æ®æ¸…æ´—ä¸Šï¼Œè‡ªå·±æƒ³åŠæ³•æ‰¾é€”å¾„å¤„ç†ã€‚</p>
<pre><code>[çˆ¬è™«æœ‰é£é™©ï¼Œæ“ä½œéœ€è°¨æ…]

å¸Œæœ›ä½ èƒ½æŠŠè¿™ä¸ªä»£ç ç”¨åœ¨æ­£é€”ï¼Œé€ ç¦ç¤¾ä¼š:)

å¸Œæœ›ä½ èƒ½å¼€æºæ•°æ®é›†ï¼Œå‡å°‘ç¤¾ä¼šæ•´ä½“çš„æˆæœ¬:)</code></pre>
<h1 id="pythonä»£ç ">pythonä»£ç </h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line">download_path = <span class="string">&#x27;./image/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_onepage_urls</span>(<span class="params">onepageurl</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è·å–å•ä¸ªç¿»é¡µçš„æ‰€æœ‰å›¾ç‰‡çš„urls+å½“å‰ç¿»é¡µçš„ä¸‹ä¸€ç¿»é¡µçš„url&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> onepageurl:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;å·²åˆ°æœ€åä¸€é¡µ, ç»“æŸ&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> [], <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = requests.get(onepageurl)</span><br><span class="line">        html.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">        html = html.text</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">        pic_urls = []</span><br><span class="line">        fanye_url = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> pic_urls, fanye_url</span><br><span class="line">    pic_urls = re.findall(<span class="string">&#x27;&quot;objURL&quot;:&quot;(.*?)&quot;,&#x27;</span>, html, re.S)</span><br><span class="line">    fanye_urls = re.findall(re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;a href=&quot;(.*)&quot; class=&quot;n&quot;&gt;ä¸‹ä¸€é¡µ&lt;/a&gt;&#x27;</span>), html, flags=<span class="number">0</span>)</span><br><span class="line">    fanye_url = <span class="string">&#x27;http://image.baidu.com&#x27;</span> + fanye_urls[<span class="number">0</span>] <span class="keyword">if</span> fanye_urls <span class="keyword">else</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> pic_urls, fanye_url</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">down_pic</span>(<span class="params">pic_urls,label</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç»™å‡ºå›¾ç‰‡é“¾æ¥åˆ—è¡¨, ä¸‹è½½æ‰€æœ‰å›¾ç‰‡&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment">#for i, pic_url in tqdm(enumerate(pic_urls)):</span></span><br><span class="line">    <span class="keyword">for</span> i,pic_url <span class="keyword">in</span> <span class="built_in">enumerate</span>(pic_urls):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            pic = requests.get(pic_url, timeout=<span class="number">15</span>)</span><br><span class="line">            string = download_path + label + <span class="string">&#x27;_baidu/&#x27;</span> + <span class="built_in">str</span>(i + <span class="number">1</span>) + <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(string, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(pic.content)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;æˆåŠŸä¸‹è½½ç¬¬(%s/%s)å¼ å›¾ç‰‡: %s&#x27;</span> % (<span class="built_in">str</span>(i + <span class="number">1</span>), <span class="built_in">str</span>(<span class="built_in">len</span>(pic_urls)), <span class="built_in">str</span>(pic_url)))</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;ä¸‹è½½ç¬¬%så¼ å›¾ç‰‡æ—¶å¤±è´¥: %s&#x27;</span> % (<span class="built_in">str</span>(i + <span class="number">1</span>), <span class="built_in">str</span>(pic_url)))</span><br><span class="line">            <span class="comment">#print(e)</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;keywords.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        lines = f.read().splitlines()</span><br><span class="line">        <span class="built_in">print</span>(lines)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> tqdm(lines):</span><br><span class="line">        file_path = os.path.join(download_path, line)</span><br><span class="line">        file_path = file_path + <span class="string">&#x27;_baidu&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file_path):</span><br><span class="line">            os.makedirs(file_path, <span class="number">0o755</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            shutil.rmtree(file_path)</span><br><span class="line">            os.makedirs(file_path, <span class="number">0o755</span>)</span><br><span class="line"></span><br><span class="line">        url_init_first = <span class="string">r&#x27;http://image.baidu.com/search/flip?tn=baiduimage&amp;ipn=r&amp;ct=201326592&amp;cl=2&amp;lm=-1&amp;st=-1&amp;fm=result&amp;fr=&amp;sf=1&amp;fmq=1497491098685_R&amp;pv=&amp;ic=0&amp;nc=1&amp;z=&amp;se=1&amp;showtab=0&amp;fb=0&amp;width=&amp;height=&amp;face=0&amp;istype=2&amp;ie=utf-8&amp;ctd=1497491098685%5E00_1519X735&amp;word=&#x27;</span></span><br><span class="line">        url_init = url_init_first + urllib.parse.quote(line, safe=<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        all_pic_urls = []</span><br><span class="line">        onepage_urls, fanye_url = get_onepage_urls(url_init)</span><br><span class="line">        all_pic_urls.extend(onepage_urls)</span><br><span class="line"></span><br><span class="line">        fanye_count = <span class="number">0</span>  <span class="comment"># ç´¯è®¡ç¿»é¡µæ•°</span></span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            onepage_urls, fanye_url = get_onepage_urls(fanye_url)</span><br><span class="line">            fanye_count += <span class="number">1</span></span><br><span class="line">            <span class="comment">#print(&#x27;ç¬¬é¡µ&#x27; % str(fanye_count))</span></span><br><span class="line">            <span class="keyword">if</span> fanye_url == <span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> onepage_urls == []:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            all_pic_urls.extend(onepage_urls)</span><br><span class="line"></span><br><span class="line">        down_pic(<span class="built_in">list</span>(<span class="built_in">set</span>(all_pic_urls)),line)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="é™„keywords.txt">é™„<code>keywords.txt</code></h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é„™è§†è„¸</span><br><span class="line">é„™è§†è¡¨æƒ…</span><br><span class="line">å«Œæ¶</span><br><span class="line">æ¶å¿ƒè¡¨æƒ…</span><br><span class="line">è…»çƒ¦è¡¨æƒ…</span><br><span class="line">åŒçƒ¦è¡¨æƒ…</span><br><span class="line">æ†æ¶è¡¨æƒ…</span><br><span class="line">åæ„Ÿè¡¨æƒ…</span><br><span class="line">ä¸è€çƒ¦</span><br><span class="line">ä¸è€çƒ¦è¡¨æƒ…</span><br><span class="line">å«Œå¼ƒè¡¨æƒ…</span><br><span class="line">fear</span><br><span class="line">ææƒ§</span><br><span class="line">ææƒ§è¡¨æƒ…</span><br><span class="line">ææƒ§çš„äºº</span><br><span class="line">ææƒ§è„¸</span><br><span class="line">å®³æ€•</span><br><span class="line">å®³æ€•è¡¨æƒ…</span><br><span class="line">å®³æ€•è„¸</span><br><span class="line">ææ…Œ</span><br><span class="line">ææ…Œè¡¨æƒ…</span><br><span class="line">ææ…Œè„¸</span><br><span class="line">æƒŠå“</span><br><span class="line">æƒŠæ€–è¡¨æƒ…</span><br><span class="line">å¯éª‡è¡¨æƒ…</span><br><span class="line">æ€¯ç”Ÿç”Ÿè¡¨æƒ…</span><br><span class="line">èƒ†æ€¯è¡¨æƒ…</span><br><span class="line">èƒ†æ€¯è„¸</span><br><span class="line">ææ…Œçš„äºº</span><br><span class="line">æƒ§æ€•è¡¨æƒ…</span><br><span class="line">æƒ§æ€•çš„äºº</span><br><span class="line">happy</span><br><span class="line">é«˜å…´</span><br><span class="line">é«˜å…´è¡¨æƒ…</span><br><span class="line">é«˜å…´çš„äºº</span><br><span class="line">é«˜å…´è„¸</span><br><span class="line">å¼€å¿ƒ</span><br><span class="line">å¼€å¿ƒè„¸</span><br><span class="line">å¼€å¿ƒçš„äºº</span><br><span class="line">å¼€å¿ƒè¡¨æƒ…</span><br><span class="line">æ¬¢æ„‰</span><br><span class="line">æ„‰æ‚¦</span><br><span class="line">æ„‰æ‚¦è¡¨æƒ…</span><br><span class="line">æ¬¢æ„‰è¡¨æƒ…</span><br><span class="line">å¹¸ç¦è¡¨æƒ…</span><br><span class="line">å¹¸ç¦çš„è„¸</span><br><span class="line">å¹¸ç¦çš„äºº</span><br><span class="line">æ„‰æ‚¦è¡¨æƒ…</span><br><span class="line">æ¬¢æ¬£è¡¨æƒ…</span><br><span class="line">æ¬¢å–œè¡¨æƒ…</span><br><span class="line">å–œæ‚¦</span><br><span class="line">sad</span><br><span class="line">æ‚²ä¼¤</span><br><span class="line">æ‚²ä¼¤è¡¨æƒ…</span><br><span class="line">æ‚²ä¼¤çš„äºº</span><br><span class="line">æ‚²ä¼¤è„¸</span><br><span class="line">ä¼¤å¿ƒ</span><br><span class="line">ä¼¤å¿ƒè¡¨æƒ…</span><br><span class="line">éš¾è¿‡</span><br><span class="line">éš¾è¿‡è¡¨æƒ…</span><br><span class="line">éš¾è¿‡çš„äºº</span><br><span class="line">ä¼¤å¿ƒçš„äºº</span><br><span class="line">ä¼¤æ„Ÿè¡¨æƒ…</span><br><span class="line">æ‚²ç—›è¡¨æƒ…</span><br><span class="line">å“€ä¼¤</span><br><span class="line">å¿ƒé…¸è¡¨æƒ…</span><br><span class="line">æ‚²æˆšè¡¨æƒ…</span><br><span class="line">å“€ç—›çš„äºº</span><br><span class="line">æ‚²ç—›çš„äºº</span><br><span class="line">å“€ä¼¤è„¸</span><br><span class="line">å¿ƒé…¸è„¸</span><br><span class="line">surprise</span><br><span class="line">æƒŠè®¶</span><br><span class="line">æƒŠè®¶è¡¨æƒ…</span><br><span class="line">æƒŠè®¶çš„äºº</span><br><span class="line">æƒŠè®¶è„¸</span><br><span class="line">è¯§å¼‚</span><br><span class="line">æƒŠå¥‡</span><br><span class="line">æƒŠå¥‡è¡¨æƒ…</span><br><span class="line">æƒŠå¥‡è„¸</span><br><span class="line">è¯§å¼‚è„¸</span><br><span class="line">è¯§å¼‚è¡¨æƒ…</span><br><span class="line">åƒæƒŠ</span><br><span class="line">åƒæƒŠè¡¨æƒ…</span><br><span class="line">åƒæƒŠè„¸</span><br><span class="line">åƒæƒŠçš„äºº</span><br><span class="line">æƒŠè¯§</span><br><span class="line">æƒŠæ„•</span><br><span class="line">æƒŠè¯§è¡¨æƒ…</span><br><span class="line">æƒŠå«è¡¨æƒ…</span><br><span class="line">æƒŠå«è„¸</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>tech</tag>
        <tag>crawler</tag>
      </tags>
  </entry>
  <entry>
    <title>vtype_register</title>
    <url>/2023/06/14/81_vtype-register/</url>
    <content><![CDATA[<p>æœ€è¿‘æäº†ærisc-v vï¼Œvtypeå¯„å­˜å™¨å¯è°“æ˜¯çµé­‚çš„å­˜åœ¨äº†ã€‚</p>
<p>åœ¨æ­¤è®°å½•ä¸€ä¸‹å…³äºvtypeå¯„å­˜å™¨ç›¸å…³çš„çŸ¥è¯†å’Œç»“è®ºã€‚</p>
<span id="more"></span>
<h2 id="background">Background</h2>
<blockquote>
<p>With a vector length specific (VLS) SIMD instruction set the main
problem is to pick the right vector register size. Of course there is a
trade-off between the amount of data-level parallelism and hardware
costs. Due to Moore's law, vector register sizes can be increased over
time without making the CPU chip more expensive. Also, some users are
interested in powerful CPUs with wider vector registers while the
average user is fine with averagely sized register. Thus, there is no
one right vector register size.</p>
</blockquote>
<p>å¯¹äºå‘é‡é•¿åº¦ç‰¹å®š (VLS) SIMD
æŒ‡ä»¤é›†ï¼Œä¸»è¦é—®é¢˜æ˜¯é€‰æ‹©æ­£ç¡®çš„å‘é‡å¯„å­˜å™¨å¤§å°ã€‚
å½“ç„¶ï¼Œåœ¨æ•°æ®çº§å¹¶è¡Œæ€§å’Œç¡¬ä»¶æˆæœ¬ä¹‹é—´å­˜åœ¨æƒè¡¡ã€‚
ç”±äº<code>æ‘©å°”å®šå¾‹</code>ï¼Œ<code>çŸ¢é‡å¯„å­˜å™¨çš„å¤§å°</code>å¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»è€Œå¢åŠ ï¼Œè€Œä¸ä¼šå¢åŠ 
CPU èŠ¯ç‰‡çš„æˆæœ¬ã€‚ æ­¤å¤–ï¼Œä¸€äº›ç”¨æˆ·å¯¹å…·æœ‰<code>æ›´å®½</code>å‘é‡å¯„å­˜å™¨çš„å¼ºå¤§
CPU æ„Ÿå…´è¶£ï¼Œè€Œæ™®é€šç”¨æˆ·åˆ™å¯¹<code>å¹³å‡å¤§å°</code>çš„å¯„å­˜å™¨æ„Ÿå…´è¶£ã€‚
å› æ­¤ï¼Œ<code>æ²¡æœ‰ä¸€ä¸ªæ­£ç¡®çš„å‘é‡å¯„å­˜å™¨å¤§å°</code>ã€‚</p>
<blockquote>
<p>The solution to all this is to design a variable length vector
instruction set. In that way the instructions are then agnostic to the
vector register size of a concrete CPU implementation. Thus, the binary
code is portable between low, middle and high-end CPUs, and
automatically makes use of wider registers in newer CPUs.</p>
</blockquote>
<p>è§£å†³æ–¹æ¡ˆæ˜¯<code>è®¾è®¡ä¸€ä¸ªå¯å˜é•¿åº¦çš„å‘é‡æŒ‡ä»¤é›†</code>ã€‚
è¿™æ ·ï¼ŒæŒ‡ä»¤å°±ä¸å…·ä½“ CPU å®ç°çš„å‘é‡å¯„å­˜å™¨å¤§å°æ— å…³ã€‚
å› æ­¤ï¼ŒäºŒè¿›åˆ¶ä»£ç å¯åœ¨ä½ç«¯ã€ä¸­ç«¯å’Œé«˜ç«¯ CPU ä¹‹é—´ç§»æ¤ï¼Œå¹¶è‡ªåŠ¨åœ¨è¾ƒæ–°çš„ CPU
ä¸­ä½¿ç”¨æ›´å®½çš„å¯„å­˜å™¨ã€‚</p>
<p>ä¸ªäººæ„Ÿè§‰ï¼ŒRISC-Vè¿™ä¸ªåèµ·ä¹‹ç§€å°±èƒœåœ¨ä¸ç”¨é¡¾åŠå†å²ç§¯ç´¯ï¼Œå¯ä»¥å¾ˆè½»æ˜“çš„ä»å¤´å¼€å§‹ã€‚</p>
<h2 id="design-challenges-opcode-space">Design Challenges: Opcode
Space</h2>
<p>Community wanted to stay with 32-bit instruction encoding</p>
<ul>
<li>Low-end embedded systems have 32-bit instruction fetch</li>
<li>Harder to support mixed-length instruction streams, 16,32,48, &amp;
64 bits</li>
<li>Static code size matters on embedded platforms</li>
</ul>
<p>But wanted vast array of datatypes and custom datatypes, and large
set of operations</p>
<h2 id="opcode-solution">Opcode Solution</h2>
<p>There are two registers used when operating vectors in RVV</p>
<h3 id="å¯„å­˜å™¨vtype-vector-type.">å¯„å­˜å™¨<strong>vtype: Vector
Type.</strong></h3>
<p>Added a control register to hold some information about current
setting of vector unit</p>
<p>vtype describes
<code>the type of vector we are going to operate</code> and includes</p>
<p>vtype fields (total additional 6-7 state bits) - vsew: standard
element width (SEW=8,16,32,â€¦,1024) - Size in bits of the elements being
operated - <code>8 â‰¤ sew â‰¤ ELEN</code> - vlmul: vector length multiplier
(LMUL=1,2,4,8) - <span class="math inline">\(lmul = 2^k\)</span> where
-3 â‰¤ k â‰¤ 3 (i.e., lmul âˆˆ {1/8, 1/4, 1/2, 1, 2, 4, 8}) - å¯„å­˜å™¨åˆ†ç»„
Groups registers to form â€œlonger vectorâ€ - Number of registers in each
group is LMUL - ä¸¾ä¾‹ï¼šå½“ LMUL=2æ—¶ï¼Œ<code>vadd v2, v4, v6</code> æ„å‘³ç€
<code>(v2,v3) := (v4,v5) + (v6,v7)</code> - vediv: vector element
divider (EDIV=1,2,4,8)</p>
<p>Encoding only occupies 1.5 major opcodes</p>
<p>Full 64-bit instruction encoding also planned - Can view current
32-bit encoding as compressed form of full encoding</p>
<h3
id="å¯„å­˜å™¨vl-vector-length-not-to-be-confused-with-vlen">å¯„å­˜å™¨<strong>vl:
Vector Length</strong> (not to be confused with VLEN!)</h3>
<p>vl describes <code>how many elements of the vector</code> (starting
from the element zero) <code>we are going to operate</code></p>
<ul>
<li><p>$ 0 â‰¤ vl â‰¤ vlmax(sew, lmul) $</p></li>
<li><p>$ vlmax(sew, lmul) = (VLEN / sew) Ã— lmul $</p></li>
</ul>
<p>Vector length <span class="math inline">\(vl\)</span> set to min(AVL,
VLMAX)</p>
<h2 id="rvv-defines-32-vector-registers-of-size-vlen-bits">RVV defines
32 vector registers of size VLEN bits</h2>
<ul>
<li>v0 to v31</li>
<li>VLEN is a <code>constant parameter</code> chosen by the implementor
and must be a power of two
<ul>
<li>Zv* standard extensions constraint VLEN to be at least 64 or
128</li>
</ul></li>
<li>E.g., VLEN=512 would be equivalent in size to Intel AVX-512</li>
<li>VLEN is not a great name so read it as
â€œ<strong><code>vector register size (in bits)</code></strong>â€</li>
</ul>
<h2 id="vectors-in-rvv-are-divided-in-elements.">Vectors in RVV are
divided in elements.</h2>
<ul>
<li>The size of elements in bits is at least 8 bits up to ELEN bits</li>
<li>ELEN is a constant parameter chosen by the implementor</li>
<li>Must be a power of two and 8 â‰¤ ELEN â‰¤ VLEN
<ul>
<li>Zv* standard extensions constrain ELEN to be at least 32 or 64</li>
</ul></li>
</ul>
<h2 id="vector-length-control">Vector Length control</h2>
<p>Current maximum vector length is register length in bits divided by
current element width setting:</p>
<p><span class="math display">\[VLMAX = VLEN/SEW\]</span></p>
<ul>
<li>E.g., <code>VLEN = 512b, SEW=32b</code> =&gt;
<code>VLMAX = 16</code></li>
</ul>
<p>Current active vector length set by vl register</p>
<p><span class="math display">\[0&lt;=vl&lt;=VLMAX\]</span></p>
<h2 id="vsetvlivsetvl-instructions">vsetvli/vsetvl instructions</h2>
<p><span class="math inline">\(vsetvli\)</span> instruction sets both
vector configuration and vector length:</p>
<p><code>vsetvli rdï¼Œrs1ï¼Œvtypei(e8/e16/e32/e64)ï¼Œmulti-num(m1-m8)</code></p>
<p>rd - Returns setting of vector length in scalar register -
è¿”å›å€¼ï¼Œå‘Šè¯‰ç¡¬ä»¶æ¥ä¸‹å»è¿è¡Œå‡½æ•°æ‰€éœ€è¦çš„æ“ä½œå…ƒç´ ä¸ªæ•°çš„é‡</p>
<p>rs1 - Application vector length (AVL) - è®¾ç½®æ“ä½œå…ƒç´ </p>
<p>vtypei - æ¯ä¸ªå…ƒç´ çš„ä½å®½å¤§å°</p>
<p>multi-num - å¯„å­˜å™¨çš„è¿ç”¨æ•°é‡</p>
<hr />
<p>åœ¨ rv64 çš„ç¼–å†™ä¸­ï¼Œå¦‚æœ rd
çš„è¿”å›å€¼ä¸å®¹ï¼Œä¼šå¯¼è‡´ç¡¬ä»¶éƒ¨åˆ†ä¸­å¿ƒè¿›è¡Œè®¾ç½®ï¼Œæ­¤æ­¥éª¤æå¤§çš„å ç”¨è¿è¡Œæ—¶é—´ï¼Œæ‰€ä»¥<code>åœ¨ç¼–å†™çš„æ—¶å€™éœ€è¦å°½é‡å¯èƒ½çš„å‡å°‘ rd æ•°å€¼çš„å˜æ¢</code>ã€‚</p>
<p>rv64 ä¸­æ¯ä¸ª vector å¯„å­˜å™¨æ€»ä½å®½æ˜¯å¤§äºç­‰äº 128-bit,
ä»¥128ä¸ºä¾‹å­ï¼Œå¯¹äºå¦‚ä½•å¯¹ rd
è¿›è¡Œæ•°å€¼çš„å˜æ¢ï¼Œå…¬å¼æ–¹é¢æœ‰ä¸€ä¸ªå¾ˆç®€å•çš„æ¢ç®—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rd == rs1 &lt;= (vtypei * multi-num ) ? rs1 : (vtypei * multi-num )</span><br><span class="line">ä¸¾ä¸ªä¾‹å­ï¼š</span><br><span class="line"></span><br><span class="line">vsetvli rd, rs1 == 8ï¼Œ vtypei == e8ï¼Œ multi-num == m1</span><br><span class="line">è¿”å›å€¼ä¾¿æ˜¯ rd == 8 (128 / e8 == 16 &gt;= rs1 =&gt; 8)</span><br><span class="line"></span><br><span class="line">vsetvli rd, rs1 == 32ï¼Œvtypei == e16ï¼Œ multi-num == m1</span><br><span class="line">è¿”å›å€¼ä¾¿æ˜¯ rd == 16 (128 / e16 = 16)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸€æ®µä»£ç ä¸­åŒæ—¶å­˜åœ¨ä¸Šè¿°ä¸¤æ¡æŒ‡ä»¤ï¼Œé‚£ä¹ˆä¾¿ä¼šå‡ºç°ç¡¬ä»¶é‡è®¾ç½®æƒ…å†µï¼Œå¯¹ä»£ç æ•´ä½“çš„æ€§èƒ½ä¼šäº§ç”Ÿè´Ÿé¢å½±å“ã€‚</p>
<hr />
<h2 id="simple-memcpy-example">Simple memcpy example</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># void*memcpy(void*dest,const void*src, size_t n)</span><br><span class="line"># a0=dest, a1=src, a2=n</span><br><span class="line">memcpy:</span><br><span class="line">mv a3, a0 # Copy destination</span><br><span class="line">loop:</span><br><span class="line">vsetvli t0, a2, e8 # Vectors of 8b</span><br><span class="line">vlb.v v0, (a1) # Load bytes</span><br><span class="line">add a1, a1, t0 # Bump pointer</span><br><span class="line">sub a2, a2, t0 # Decrement count</span><br><span class="line">vsb.v v0, (a3) # Store bytes</span><br><span class="line">add a3, a3, t0 # Bump pointer</span><br><span class="line">bnez a2, loop # Any more?</span><br><span class="line">ret # Return</span><br></pre></td></tr></table></figure>
<h2 id="usability-code">usability code</h2>
<p>é€šè¿‡intrinsicçš„æ–¹å¼ï¼ŒæŸ¥è¯¢<code>vlenb</code>ï¼Œè¿›è€Œå¯ä»¥å…¼å®¹ä¸åŒä½å®½çš„è®¾å¤‡ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">int</span> <span class="title function_">csrr_vl</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;csrr %0, vl&quot;</span></span></span><br><span class="line"><span class="params">                 : <span class="string">&quot;=r&quot;</span>(a)</span></span><br><span class="line"><span class="params">                 :</span></span><br><span class="line"><span class="params">                 : <span class="string">&quot;memory&quot;</span>)</span>;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">int</span> <span class="title function_">csrr_vtype</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;csrr %0, vtype&quot;</span></span></span><br><span class="line"><span class="params">                 : <span class="string">&quot;=r&quot;</span>(a)</span></span><br><span class="line"><span class="params">                 :</span></span><br><span class="line"><span class="params">                 : <span class="string">&quot;memory&quot;</span>)</span>;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">int</span> <span class="title function_">csrr_vlenb</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(<span class="string">&quot;csrr %0, vlenb&quot;</span></span></span><br><span class="line"><span class="params">                 : <span class="string">&quot;=r&quot;</span>(a)</span></span><br><span class="line"><span class="params">                 :</span></span><br><span class="line"><span class="params">                 : <span class="string">&quot;memory&quot;</span>)</span>;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•´ç†çš„å¾ˆä¹±ï¼Œæš‚æ—¶æ²¡æ—¶é—´ä»”ç»†æ¢³ç†äº†ã€‚</p>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://gms.tf/riscv-vector.html">Programming with RISC-V
Vector Instructions</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/363901274">RISC-V
å°ç™½ä¼˜åŒ–å­¦ä¹ </a></p>
<p><a
href="https://riscv.org/wp-content/uploads/2019/06/17.40-Vector_RISCV-20190611-Vectors.pdf">Vector
Extension Update</a></p>
<p><a
href="https://llvm.org/devmtg/2019-04/slides/TechTalk-Kruppe-Espasa-RISC-V_Vectors_and_LLVM.pdf">Adventures
with RISC-V Vectors and LLVM</a></p>
]]></content>
      <tags>
        <tag>tech</tag>
        <tag>risc-v</tag>
      </tags>
  </entry>
  <entry>
    <title>tflite-micro</title>
    <url>/2023/10/27/91_tflite-micro/</url>
    <content><![CDATA[<p>æœ€è¿‘åˆæäº†ä¸€æ¬¡tflite-microï¼Œä¸Šä¸€æ¬¡æè¿˜æ˜¯åœ¨ä¸¤å¹´å‰ï¼Œé‚£æ—¶å€™ç®€ç›´æ˜¯ä¸ªå·¥ç¨‹å°ç™½ï¼Œé‡åˆ°ä¸ªé—®é¢˜å°±å¡ä½äº†ã€‚è¿™ä¸€æ¬¡ç›¸å¯¹æ¯”è¾ƒé¡ºåˆ©ï¼Œè®°å½•ä¸€éè¿‡ç¨‹ã€‚</p>
<span id="more"></span>
<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2010.08678">TensorFlow Lite
Micro: Embedded Machine Learning on TinyML Systems</a></p>
<h1 id="å…‹éš†ä»“åº“">å…‹éš†ä»“åº“</h1>
<p>åœ¨tensorflowçš„<a
href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/micro">gité‡Œé¢</a>ï¼Œçœ‹åˆ°gitå·²ç»è¿ç§»è‡³ä¸€ä¸ªå•ç‹¬çš„<a
href="https://github.com/tensorflow/tflite-micro">ä»“åº“</a>ã€‚</p>
<ul>
<li>As of June 25, 2021, the TFLM codebase has moved to a <a
href="https://github.com/tensorflow/tflite-micro">stand-alone github
repository</a>.</li>
</ul>
<p>äºæ˜¯åœ¨ubuntuæ‰§è¡Œå‘½ä»¤ï¼š</p>
<p><code>git clone https://github.com/tensorflow/tflite-micro.git</code></p>
<p>æ­¤æ—¶<code>commit 7ac0b662b6402c1fccc8ec8d1db84f0f34dd4a85</code></p>
<h1 id="ç¼–è¯‘é™æ€åº“">ç¼–è¯‘é™æ€åº“</h1>
<p>æ±‚åŠ©äº†ChatGPT 4.0ï¼š</p>
<p>ã€Œåœ¨è¿™ä¸ª https://github.com/tensorflow/tflite-micro ï¼Œ
æ€ä¹ˆç¼–è¯‘é™æ€åº“ï¼Ÿã€</p>
<p>åœ¨TensorFlow Lite
Microçš„GitHubä»“åº“ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤æ¥ç¼–è¯‘é™æ€åº“ï¼š</p>
<ol type="1">
<li>é¦–å…ˆï¼Œä½ éœ€è¦å…‹éš†ä»“åº“ï¼š</li>
</ol>
<p><code>git clone https://github.com/tensorflow/tflite-micro.git</code></p>
<ol start="2" type="1">
<li>è¿›å…¥å…‹éš†ä¸‹æ¥çš„ä»“åº“ç›®å½•ï¼š</li>
</ol>
<p><code>cd tflite-micro</code></p>
<ol start="3" type="1">
<li>ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘é™æ€åº“ï¼š</li>
</ol>
<p><code>make -f tensorflow/lite/micro/tools/make/Makefile TARGET=&lt;TARGET&gt; TARGET_ARCH=&lt;ARCH&gt; microlite</code></p>
<p>åœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œ<code>&lt;TARGET&gt;</code>åº”æ›¿æ¢ä¸ºä½ çš„ç›®æ ‡å¹³å°ï¼ˆå¦‚<code>linux</code>ï¼‰ï¼Œ<code>&lt;ARCH&gt;</code>åº”æ›¿æ¢ä¸ºä½ çš„ç›®æ ‡æ¶æ„ï¼ˆå¦‚<code>x86_64</code>ï¼‰ã€‚è¿™å°†åœ¨<code>tensorflow/lite/micro/tools/make/gen/&lt;TARGET&gt;_&lt;ARCH&gt;/lib/</code>ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º<code>libtensorflow-microlite.a</code>çš„é™æ€åº“ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚å’Œç¯å¢ƒæ¥ä¿®æ”¹è¿™äº›æ­¥éª¤ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦å®‰è£…é¢å¤–çš„ä¾èµ–åº“ï¼Œæˆ–è€…ä¿®æ”¹makefileæ¥åŒ…å«ä½ éœ€è¦çš„ç‰¹æ€§ã€‚</p>
<p>çœŸæ˜¯å¤ªæ£’äº†ï¼Œäºæ˜¯æˆ‘æ‰§è¡ŒæŒ‡ä»¤ï¼š</p>
<p><code>make -f tensorflow/lite/micro/tools/make/Makefile TARGET=linux TARGET_ARCH=x86_64 microlite</code></p>
<p>åœ¨ <code>make/download/</code>
ç›®å½•ä¸‹ï¼Œåˆ†åˆ«ä¸‹è½½äº†<code>flatbuffers</code>ã€<code>gemmlowp</code>ã€<code>kissfft</code>ã€<code>pigweed</code>ã€<code>ruy</code>ã€‚</p>
<p>ç¼–è¯‘å®Œæˆåï¼Œå¾—åˆ°äº†é™æ€åº“æ–‡ä»¶</p>
<p><code>ar: creating gen/linux_x86_64_default/lib/libtensorflow-microlite.a</code></p>
<h1 id="ç¼–å†™-demo-debug">ç¼–å†™ demo &amp; debug</h1>
<p>ä»¿ç…§helloworldå·¥ç¨‹å†™äº†ä¸€ä¸ªå°demo</p>
<h2 id="é‡åˆ°é—®é¢˜">é‡åˆ°é—®é¢˜ï¼š</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Failed to allocate tail memory. Requested: 2760, available 1376, missing: 1384</span><br><span class="line">Failed to allocate memory for context-&gt;eval_tensors, 2760 bytes required</span><br><span class="line">Failed starting model allocation.</span><br></pre></td></tr></table></figure>
<h2 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•ï¼š</h2>
<p>å…ˆæš‚æ—¶å¢å¤§ArenaSizeï¼Œåé¢å†æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´å›æ¥ï¼š</p>
<p><code>constexpr int kTensorArenaSize = 300000;</code></p>
<h2 id="é‡åˆ°é—®é¢˜-1">é‡åˆ°é—®é¢˜ï¼š</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Didn&#x27;t find op for builtin opcode &#x27;LEAKY_RELU&#x27;</span><br><span class="line">Failed to get registration from op code LEAKY_RELU</span><br><span class="line"></span><br><span class="line">Segmentation fault (core dumped)</span><br></pre></td></tr></table></figure>
<h2 id="è§£å†³æ–¹æ³•-1">è§£å†³æ–¹æ³•ï¼š</h2>
<p>å¢åŠ ç®—å­æ³¨å†Œ
<code>TF_LITE_ENSURE_STATUS(op_resolver.AddLeakyRelu());</code></p>
<h2 id="é‡åˆ°é—®é¢˜-2">é‡åˆ°é—®é¢˜</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Couldn&#x27;t register builtin op #98, resolver size </span><br><span class="line">is too small (1).</span><br></pre></td></tr></table></figure>
<h2 id="è§£å†³æ–¹æ³•-2">è§£å†³æ–¹æ³•</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">using HelloWorldOpResolver = tflite::MicroMutableOpResolver&lt;1&gt;;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„1ä»£è¡¨æ³¨å†Œä¸ªæ•°ï¼Œè‰ç‡äº†ï¼Œåº”è¯¥<code>op_resolver</code> add
äº†å‡ ä¸ªè¿™é‡Œå°±å†™å‡ çš„ã€‚</p>
<h2 id="é‡åˆ°é—®é¢˜-3">é‡åˆ°é—®é¢˜</h2>
<p>ä¸€æ—¦æ‰§è¡Œåˆ°<code>interpreter.input(0)-&gt;data.f[0] = 1.f;</code>å°±æ®µé”™è¯¯ã€‚</p>
<h2 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h2>
<p><code>CFLAGS = -DTF_LITE_STATIC_MEMORY</code></p>
<h1 id="è¿›ä¸€æ­¥å‡å°åº“ä½“ç§¯">è¿›ä¸€æ­¥å‡å°åº“ä½“ç§¯</h1>
<p>ä¸ºäº†å‹ç¼©ä½“ç§¯ï¼Œ<code>BUILD_TYPE</code>ä½¿ç”¨äº†<code>release</code>è¿›è¡Œç¼–è¯‘ï¼Œè¿™æœŸé—´ä¼šé‡åˆ°<code>MicroPrintf</code>ä¸æ”¯æŒçš„é—®é¢˜ï¼ˆrelease_with_logsæ˜¯å¯ä»¥çš„ï¼‰ï¼Œè¿›è¡Œä¸€äº›æ³¨é‡Šå°±å¯ä»¥ã€‚</p>
<p>ä»¥åŠè¿›è¡Œ<code>-Os</code>ç¼–è¯‘ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šä½“ç§¯å ç”¨ã€‚</p>
]]></content>
      <tags>
        <tag>notes</tag>
        <tag>tech</tag>
        <tag>tflite-micro</tag>
        <tag>TinyML</tag>
      </tags>
  </entry>
  <entry>
    <title>å†…å­˜å¯¹é½çš„å®ç°</title>
    <url>/2022/12/13/95_memory-align/</url>
    <content><![CDATA[<p>å„ä¸ªç¡¬ä»¶å¹³å°å¯¹å­˜å‚¨ç©ºé—´çš„å¤„ç†ä¸Šæœ‰å¾ˆå¤§çš„ä¸åŒã€‚ä¸€äº›å¹³å°å¯¹æŸäº›<code>ç‰¹å®šç±»å‹çš„æ•°æ®</code>åªèƒ½ä»æŸäº›<code>ç‰¹å®šåœ°å€</code>å¼€å§‹å­˜å–,è€Œä¸æ˜¯å†…å­˜ä¸­ä»»æ„åœ°å€éƒ½æ˜¯å¯ä»¥è¯»å–çš„ã€‚</p>
<p>å†…å­˜å¯¹é½ä¸ä»…<strong>ä¾¿äºCPUå¿«é€Ÿè®¿é—®</strong>ï¼ŒåŒæ—¶åˆç†çš„åˆ©ç”¨å­—èŠ‚å¯¹é½å¯ä»¥<strong>æœ‰æ•ˆçš„èŠ‚çœå­˜å‚¨ç©ºé—´</strong>ã€‚</p>
<p>èŠ±äº†ä¸€ç‚¹ç‚¹æ—¶é—´ææ‡‚äº†å†…å­˜å¯¹é½çš„å®ç°ä¸ç»†èŠ‚â€”â€”</p>
<span id="more"></span>
<h2 id="ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½">0.ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½ï¼Ÿ</h2>
<p>è®¡ç®—æœºä¸­å†…å­˜ç©ºé—´æ˜¯æŒ‰ç…§<code>byte</code>åˆ’åˆ†çš„ï¼Œä»ç†è®ºä¸Šè®²ä¼¼ä¹å¯¹ä»»ä½•ç±»å‹çš„å˜é‡çš„è®¿é—®å¯ä»¥ä»ä»»ä½•åœ°å€å¼€å§‹ï¼Œä½†å®é™…æƒ…å†µæ˜¯ï¼šåœ¨è®¿é—®<code>ç‰¹å®šç±»å‹å˜é‡</code>çš„æ—¶å€™é€šå¸¸åœ¨<code>ç‰¹å®šçš„å†…å­˜åœ°å€</code>è®¿é—®ï¼Œè¿™å°±éœ€è¦å¯¹è¿™äº›æ•°æ®åœ¨å†…å­˜ä¸­å­˜æ”¾çš„ä½ç½®æœ‰é™åˆ¶ï¼Œå„ç§ç±»å‹æ•°æ®æŒ‰ç…§ä¸€å®šçš„è§„åˆ™åœ¨ç©ºé—´ä¸Šæ’åˆ—ï¼Œè€Œä¸æ˜¯é¡ºåºçš„ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ’æ”¾ï¼Œè¿™å°±æ˜¯å¯¹é½ã€‚</p>
<p>å†…å­˜å¯¹é½æ˜¯ç¼–è¯‘å™¨çš„ç®¡è¾–èŒƒå›´ã€‚è¡¨ç°ä¸ºï¼šç¼–è¯‘å™¨ä¸ºç¨‹åºä¸­çš„æ¯ä¸ªâ€œæ•°æ®å•å…ƒâ€å®‰æ’åœ¨é€‚å½“çš„ä½ç½®ä¸Šã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦å†…å­˜å¯¹é½">1.ä¸ºä»€ä¹ˆè¦å†…å­˜å¯¹é½ï¼Ÿ</h2>
<p>å„ä¸ªç¡¬ä»¶å¹³å°å¯¹å­˜å‚¨ç©ºé—´çš„å¤„ç†ä¸Šæœ‰å¾ˆå¤§çš„ä¸åŒã€‚ä¸€äº›å¹³å°å¯¹æŸäº›<code>ç‰¹å®šç±»å‹çš„æ•°æ®</code>åªèƒ½ä»æŸäº›<code>ç‰¹å®šåœ°å€</code>å¼€å§‹å­˜å–,è€Œä¸æ˜¯å†…å­˜ä¸­ä»»æ„åœ°å€éƒ½æ˜¯å¯ä»¥è¯»å–çš„ã€‚</p>
<p><strong>æ¯”å¦‚æœ‰äº›æ¶æ„çš„CPUåœ¨è®¿é—®ä¸€ä¸ªæ²¡æœ‰è¿›è¡Œå¯¹é½çš„å˜é‡çš„æ—¶å€™ä¼šå‘ç”Ÿé”™è¯¯,é‚£ä¹ˆåœ¨è¿™ç§æ¶æ„ä¸‹ç¼–ç¨‹å¿…é¡»ä¿è¯å­—èŠ‚å¯¹é½.</strong></p>
<p>å…¶ä»–å¹³å°å¯èƒ½æ²¡æœ‰è¿™ç§æƒ…å†µï¼Œä½†æ˜¯æœ€å¸¸è§çš„æ˜¯å¦‚æœä¸æŒ‰ç…§é€‚åˆå…¶å¹³å°è¦æ±‚å¯¹æ•°æ®å­˜æ”¾è¿›è¡Œå¯¹é½ï¼Œä¼šåœ¨å­˜å–æ•ˆç‡ä¸Šå¸¦æ¥æŸå¤±ã€‚</p>
<p>å†…å­˜å¯¹é½ä¸ä»…<strong>ä¾¿äºCPUå¿«é€Ÿè®¿é—®</strong>ï¼ŒåŒæ—¶åˆç†çš„åˆ©ç”¨å­—èŠ‚å¯¹é½å¯ä»¥<strong>æœ‰æ•ˆçš„èŠ‚çœå­˜å‚¨ç©ºé—´</strong>ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼šhttps://juejin.cn/post/6870162226032934926</p>
<h2 id="æˆ‘çš„åˆ†æå®è·µ">2.æˆ‘çš„åˆ†æå®è·µ</h2>
<p><img src="/images/memory_align/MemoryAlign1.png" width="90%"></p>
<p><img src="/images/memory_align/MemoryAlign2.png" width="90%"></p>
]]></content>
      <tags>
        <tag>tech</tag>
        <tag>memory align</tag>
      </tags>
  </entry>
  <entry>
    <title>ADAS</title>
    <url>/2020/04/23/93_ADAS/</url>
    <content><![CDATA[<p>è‡ªåŠ¨é©¾é©¶æ±½è½¦å¯ä»¥å®ç°<code>é©¾é©¶å‘˜é©¾é©¶</code>ã€<code>ç³»ç»Ÿè¾…åŠ©é©¾é©¶å‘˜é©¾é©¶</code>ä»¥åŠ<code>ç³»ç»Ÿè‡ªåŠ¨é©¾é©¶</code>ã€‚è€Œæ— äººé©¾é©¶æ±½è½¦æ˜¯ä¸éœ€è¦é©¾é©¶å‘˜çš„ï¼Œå³ä¾¿åœ¨ç´§æ€¥æƒ…å†µæ—¶ä¹Ÿèƒ½è‡ªè¡Œå¤„ç†ã€‚</p>
<p>æœ€è¿‘è°ƒç ”äº†ä¸€ä¸‹ADASï¼Œæ„Ÿè§‰æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹å‘ã€‚ç„¶è€Œä¸ªäººè®¤ä¸ºè‡ªåŠ¨é©¾é©¶çš„<code>corner case</code>å¤ªå¤šï¼Œæœªæ¥å……æ»¡æŒ‘æˆ˜ã€‚</p>
<span id="more"></span>
<h2 id="è‡ªåŠ¨é©¾é©¶æ±½è½¦">è‡ªåŠ¨é©¾é©¶æ±½è½¦</h2>
<p><code>è‡ªåŠ¨é©¾é©¶æ±½è½¦(Autonomous vehicles; Self-piloting automobile)</code>æ˜¯ä¸€ç§é€šè¿‡ç”µè„‘ç³»ç»Ÿå®ç°æ— äººé©¾é©¶çš„æ™ºèƒ½æ±½è½¦ã€‚</p>
<p>è‡ªåŠ¨é©¾é©¶æ±½è½¦å¯ä»¥å®ç°<code>é©¾é©¶å‘˜é©¾é©¶</code>ã€<code>ç³»ç»Ÿè¾…åŠ©é©¾é©¶å‘˜é©¾é©¶</code>ä»¥åŠ<code>ç³»ç»Ÿè‡ªåŠ¨é©¾é©¶</code>ã€‚è€Œæ— äººé©¾é©¶æ±½è½¦æ˜¯ä¸éœ€è¦é©¾é©¶å‘˜çš„ï¼Œå³ä¾¿åœ¨ç´§æ€¥æƒ…å†µæ—¶ä¹Ÿèƒ½è‡ªè¡Œå¤„ç†ã€‚</p>
<p><img src="/images/adas/1.png" width="80%"></p>
<h2 id="è‡ªåŠ¨é©¾é©¶çš„äº”ä¸ªç­‰çº§">è‡ªåŠ¨é©¾é©¶çš„äº”ä¸ªç­‰çº§</h2>
<pre><code>NHTSAï¼šç¾å›½å›½å®¶äº¤é€šç®¡ç†å±€
SAEï¼šç¾å›½æ±½è½¦å·¥ç¨‹å¸ˆå­¦ä¼š</code></pre>
<p><img src="/images/adas/2.png" width="80%"></p>
<p>åœ¨è½¦ä¼ä»¬ä¸‡ä¼—ä¸€å¿ƒå‘L3çº§è‡ªåŠ¨é©¾é©¶å†²åˆºçš„å…³å£ï¼Œä»¥è‡ªåŠ¨é©¾é©¶ä¸ºæœ€ç»ˆç›®æ ‡çš„<code>ADASç³»ç»Ÿ</code>è‡ªç„¶è€Œç„¶çš„ç«äº†ã€‚</p>
<p>ç›®å‰ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†çš„æ±½è½¦ï¼Œéƒ½å¤„äº<code>L1</code>çº§åˆ«ï¼Œåªæœ‰å°‘æ•°æ±½è½¦ï¼Œæ¯”å¦‚<code>ç‰¹æ–¯æ‹‰</code>ï¼Œå·²ç»å¯ä»¥å¤„äº<code>L2</code>çº§åˆ«ï¼Œå¹¶åœ¨ä¸æ–­å®Œå–„å½“ä¸­ã€‚</p>
<p><code>ADAS</code>å®ç°çš„æ˜¯<code>ç¬¬3çº§</code>ï¼Œè€Œ<code>è‡ªåŠ¨é©¾é©¶</code>å®ç°çš„æ˜¯<code>ç¬¬4çº§</code>ã€‚æƒ³è¦ä»ç¬¬3çº§å‘å±•åˆ°ç¬¬4çº§ï¼Œè¿˜éœ€è¦æ›´å¤šçš„æ±½è½¦ä¸Šé…æœ‰è‡ªåŠ¨é©¾é©¶æŠ€æœ¯ï¼Œè€Œä¸”å¾—é…åˆé“è·¯åŸºç¡€è®¾æ–½å»ºè®¾ï¼ˆé“è·¯ä¸Šçš„æ‘„åƒå¤´ï¼Œæ¸…æ™°çš„è½¦é“çº¿ï¼‰ï¼Œä»¥åŠéœ€è¦æ±½è½¦äº’è”ï¼Œæ±½è½¦æ‰‹æœºäº’è”ç­‰ç­‰ï¼Œæ˜¯ä¸ªéå¸¸åºå¤§çš„å·¥ç¨‹.</p>
<h2 id="adas">ADAS</h2>
<p>é«˜çº§é©¾é©¶è¾…åŠ©ç³»ç»Ÿ<code>ADAS(Advanced Driver Assistance System)</code></p>
<blockquote>
<p>åˆ©ç”¨å®‰è£…åœ¨è½¦ä¸Šçš„å„å¼å„æ ·ä¼ æ„Ÿå™¨ï¼ˆæ¯«ç±³æ³¢é›·è¾¾ã€æ¿€å…‰é›·è¾¾ã€å•ï¼‰ï¼Œåœ¨æ±½è½¦è¡Œé©¶è¿‡ç¨‹ä¸­éšæ—¶æ¥æ„Ÿåº”å‘¨å›´çš„ç¯å¢ƒï¼Œæ”¶é›†æ•°æ®ï¼Œè¿›è¡Œé™æ€ã€åŠ¨æ€ç‰©ä½“çš„è¾¨è¯†ã€ä¾¦æµ‹ä¸è¿½è¸ªï¼Œå¹¶ç»“åˆå¯¼èˆªä»ªåœ°å›¾æ•°æ®ï¼Œè¿›è¡Œç³»ç»Ÿçš„è¿ç®—ä¸åˆ†æï¼Œä»è€Œé¢„å…ˆè®©é©¾é©¶è€…å¯Ÿè§‰åˆ°å¯èƒ½å‘ç”Ÿçš„å±é™©ï¼Œæœ‰æ•ˆå¢åŠ æ±½è½¦é©¾é©¶çš„<code>èˆ’é€‚æ€§</code>å’Œ<code>å®‰å…¨æ€§</code>ã€‚</p>
</blockquote>
<ul>
<li><p>ADASæ ¸å¿ƒæ˜¯<code>ç¯å¢ƒæ„ŸçŸ¥</code></p></li>
<li><p>è‡ªåŠ¨é©¾é©¶æ˜¯<code>äººå·¥æ™ºèƒ½</code></p></li>
<li><p>ADASå¯ä»¥è§†ä½œè‡ªåŠ¨é©¾é©¶æ±½è½¦çš„<code>å‰æ</code></p></li>
</ul>
<p><strong>è™½ç„¶ADASè¢«å¾ˆå¤šäººè§†ä½œè‡ªåŠ¨é©¾é©¶æ±½è½¦çš„å‰æï¼Œä½†å°±å…¶æœ¬è´¨è€Œè¨€ï¼ŒADASæ˜¯è¾…åŠ©é©¾é©¶ï¼Œæ ¸å¿ƒæ˜¯ç¯å¢ƒæ„ŸçŸ¥ï¼Œè€Œè‡ªåŠ¨é©¾é©¶æ˜¯äººå·¥æ™ºèƒ½ï¼Œä¸¤è€…ä½“ç³»æœ‰å¾ˆå¤§å·®åˆ«ã€‚</strong></p>
<hr />
<p>ADASæ˜¯æœ€æ¥è¿‘äºè‡ªåŠ¨é©¾é©¶çš„æ™ºèƒ½è¾…åŠ©ç³»ç»Ÿã€‚ä½†æ˜¯ç›®å‰ç”Ÿæ´»ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯<code>ADASé˜²ç¢°æ’é¢„è­¦</code>+<code>DSMé˜²ç–²åŠ³é©¾é©¶æ£€æµ‹ç³»ç»Ÿ</code>ã€‚</p>
<h2 id="adasåˆ†ç±»">ADASåˆ†ç±»</h2>
<p><img src="/images/adas/3.png" width="90%"></p>
<h3 id="adaså‰è½¦ç¢°æ’é¢„è­¦fcw">ADASâ€”â€”å‰è½¦ç¢°æ’é¢„è­¦FCW</h3>
<p><img src="/images/adas/4.png" width="30%"></p>
<p>ç”±å®‰è£…åœ¨è½¦å¤´çš„é›·è¾¾ï¼Œä¾¦æµ‹è‡ªè½¦å’Œå‰æ–¹è½¦è¾†çš„è·ç¦»åŠé€Ÿåº¦ï¼ŒåˆæœŸä¼šå‘å‡ºè­¦å‘Šå£°æ¥æé†’é©¾é©¶äººæ³¨æ„è½¦è·ï¼Œè‹¥è½¦è·ä¾ç„¶æŒç»­æ‹‰è¿‘ï¼Œè½¦è¾†ä¾¿ä¼šå…ˆè‡ªåŠ¨è½»è¸©åˆ¹è½¦ï¼Œå¹¶è½»æ‹‰å®‰å…¨å¸¦2-3æ¬¡ï¼Œè­¦å‘Šé©¾é©¶äººã€‚</p>
<p>è‹¥ç³»ç»Ÿåˆ¤å®šè¿½æ’æ˜¯æ²¡åŠæ³•é¿å…ï¼Œå¯åŠ¨è‡ªåŠ¨ç´§æ€¥åˆ¹è½¦ï¼ˆAEBï¼‰åï¼Œä¼šåŒæ—¶ç«‹åˆ»æ‹‰ç´§å®‰å…¨å¸¦å›ºå®šé©¾é©¶äººï¼Œé™ä½æ„å¤–å‘ç”Ÿåçš„ä¼¤å®³ã€‚</p>
<h3 id="adasç›²ç‚¹ä¾¦æµ‹ç³»ç»Ÿ">ADASâ€”â€”ç›²ç‚¹ä¾¦æµ‹ç³»ç»Ÿ</h3>
<p><img src="/images/adas/5.png" width="30%"></p>
<p>æ±½è½¦é©¾é©¶äººçš„ç›²ç‚¹æ˜¯æŒ‡ä¸‰é¢åè§†é•œï¼Œå·¦ã€å³ã€å†…çœ‹ä¸åˆ°çš„åŒºåŸŸ</p>
<p>ç›²ç‚¹ä¾¦æµ‹ç³»ç»Ÿå°±æ˜¯è¿ç”¨é›·è¾¾å’Œä¼ æ„Ÿå™¨ï¼Œæ¥ä¾¦æµ‹è½¦è¾†åæ–¹çš„ç›²ç‚¹åŒºï¼Œåœ¨ç›²ç‚¹åŒºä¾¦æµ‹åˆ°è½¦è¾†é è¿‘æ—¶ä¼šå‘é©¾é©¶å‘˜æä¾›è­¦ç¤ºï¼Œå¸®åŠ©é©¾é©¶äººå°†æ„å¤–çš„æœºç‡é™è‡³æœ€ä½ã€‚</p>
<h3 id="adasåœè½¦è¾…åŠ©ç³»ç»Ÿ">ADASâ€”â€”åœè½¦è¾…åŠ©ç³»ç»Ÿ</h3>
<p><img src="/images/adas/6.png" width="30%"></p>
<p>åœè½¦è¾…åŠ©ç³»ç»Ÿåˆåˆ†ä¸º 2ç§ï¼Œåˆ†åˆ«æ˜¯ä¸»åŠ¨å¼ä¸è¢«åŠ¨å¼ -
ä¸»åŠ¨å¼ç³»ç»Ÿè‡ªåŠ¨æ§åˆ¶æ–¹å‘ç›˜ä»¥å¸®åŠ©é©¾é©¶å®Œæˆåœè½¦ï¼Œå½“ç„¶æ²¹é—¨ã€åˆ¹è½¦ä¸æ¡£ä½åˆ‡æ¢è¿˜æ˜¯è¦è½¦ä¸»è‡ªè¡Œæ“æ§ã€‚
-
è¢«åŠ¨å¼æ˜¯ä»¥å½±åƒï¼ˆæ‘„å½±æœºï¼‰ä¸å½±éŸ³ï¼ˆè¶…éŸ³æ³¢ï¼‰ä¸ºæ„Ÿæµ‹å•å…ƒæ‰€ç»„æˆçš„ï¼Œæä¾›æ›´å¤šè½¦èº«å‘¨å›´ä¿¡æ¯ç»™è½¦ä¸»æŒæ¡ï¼Œå‡å°‘ç¢°æ’æœºä¼šã€‚</p>
<h3 id="adasè½¦é“åç¦»è­¦ç¤ºç³»ç»Ÿldw">ADASâ€”â€”è½¦é“åç¦»è­¦ç¤ºç³»ç»ŸLDW</h3>
<p><img src="/images/adas/7.png" width="30%"></p>
<p>ç”±æ‘„å½±æœºã€ä¼ æ„Ÿå™¨åŠæ§åˆ¶å™¨æ‰€ç»„æˆï¼ŒåŸç†æ˜¯è¿ç”¨åœ¨è½¦èº«ä¾§é¢æˆ–åè§†é•œçš„æ‘„å½±æœºï¼Œé‡‡æ ·ç›®å‰è¡Œé©¶è½¦é“çš„æ ‡è¯†çº¿ï¼Œå†é€šè¿‡å›¾åƒå¤„ç†å–å¾—å½“å‰æ±½è½¦åœ¨è½¦é“çš„ä½å­ï¼Œè¿™æ—¶åªè¦æ±½è½¦åç¦»è½¦é“ï¼Œæ§åˆ¶å™¨å°±ä¼šå‘å‡ºè­¦æŠ¥ä¿¡å·ã€‚</p>
<p>ä»æ„Ÿæµ‹åˆ°å‘å‡ºè­¦æŠ¥ï¼Œè¿‡ç¨‹åªéœ€çº¦0.5
ç§’çš„æ—¶é—´ï¼Œä»¥å®æ—¶æé†’ã€å«é†’é©¾é©¶ï¼Œé¿å…æ„å¤–çš„å‘ç”Ÿã€‚</p>
<h3 id="adasé€‚åº”æ€§è½¦ç¯ç³»ç»Ÿ">ADASâ€”â€”é€‚åº”æ€§è½¦ç¯ç³»ç»Ÿ</h3>
<p><img src="/images/adas/8.png" width="30%"></p>
<p>è¿™å¥—ç³»ç»Ÿå¯ä¾ç…§ä¸åŒçš„è·¯å†µã€ç¯å¢ƒã€è½¦é€ŸåŠå¤©æ°”çŠ¶å†µï¼Œè‡ªåŠ¨è°ƒæ•´è½¦ç¯çš„ç…§æ˜èŒƒå›´åŠè§’åº¦ï¼Œè®©è½¦ç¯ç…§å°„èŒƒå›´å¯ä»¥æ›´æ·±è¿œä¸‹ï¼Œåˆä¸ä¼šå½±åƒåˆ°å…¶ä»–ç”¨è·¯äººçš„è§†çº¿ï¼Œä»¥æä¾›é©¾é©¶äººä¸å¯¹å‘æ¥è½¦æ›´å®‰å…¨åŠèˆ’é€‚çš„ç…§æ˜ã€‚</p>
<p>ä»è¿‡å»çš„AFSä¸»åŠ¨è½¬å‘å¼å¤´ç¯ï¼Œåˆ°ç°åœ¨ç»“åˆä¼ æ„Ÿå™¨çš„å¤šé¢—LEDæ™ºèƒ½å‹å¤´ç¯ï¼Œéƒ½æ˜¯å±äºæ­¤ç³»ç»Ÿçš„èŒƒç•´ã€‚</p>
<h3 id="adaså¤œè§†ç³»ç»Ÿ">ADASâ€”â€”å¤œè§†ç³»ç»Ÿ</h3>
<p><img src="/images/adas/9.png" width="30%"></p>
<p>å¯å¸®åŠ©é©¾é©¶å¯ä»¥åœ¨è§†çº¿ä¸æ˜ã€çœ‹ä¸æ¸…æ¥šçš„å¤œæ™šæˆ–æ¶åŠ£å¤©æ°”æ—¶ï¼Œè‡ªåŠ¨è¯†åˆ«åŠ¨ç‰©æˆ–å¤§å‹å¼‚ç‰©ï¼ŒåŒæ—¶è­¦å‘Šé©¾é©¶å‰æ–¹è·¯å†µï¼Œä»¥é¿å…æ„å¤–çš„å‘ç”Ÿã€‚</p>
<p>è¾¨åˆ«æ–¹å¼ä¸ºä»¥çº¢å¤–çº¿æ¥æ„ŸçŸ¥çƒ­é‡çš„ä¸åŒï¼ŒåŒºåˆ†äººã€åŠ¨ç‰©ã€è½¦è¾†ä»¥åŠç¯å¢ƒçš„å·®å¼‚ï¼Œç»è¿‡å¤„ç†è½¬å˜æˆå›¾åƒï¼Œå°†åŸæœ¬çœ‹ä¸æ¸…æ¥šçš„ç‰©ä½“æ¸…æ¥šå‘ˆç°åœ¨é©¾é©¶çœ¼å‰ï¼Œä»¥é™ä½è¡Œè½¦é£é™©ã€‚</p>
<h3 id="adasä¸»åŠ¨è½¦è·æ§åˆ¶å·¡èˆªç³»ç»Ÿ-acc">ADASâ€”â€”ä¸»åŠ¨è½¦è·æ§åˆ¶å·¡èˆªç³»ç»Ÿ
ACC</h3>
<p><img src="/images/adas/10.png" width="30%"></p>
<p>é€šè¿‡å®‰è£…åœ¨è½¦è¾†å‰éƒ¨çš„è½¦è·ä¼ æ„Ÿå™¨ï¼ŒæŒç»­æ‰«æè½¦è¾†å‰æ–¹é“è·¯æ¥å¾—çŸ¥å‰è½¦çš„è½¦é€Ÿä¸ç›¸å¯¹è·ç¦»ï¼Œè¡Œé©¶ä¸­ä¼šè‡ªåŠ¨ä¾¦æµ‹è½¦é€Ÿï¼Œå½“ä¸å‰è½¦çš„è·ç¦»è¶Šæ¥è¶Šå°æ—¶ï¼Œä¼šå¯¹åº”è°ƒæ•´è‡ªèº«è½¦é€Ÿï¼Œä¸å‰æ–¹è½¦è¾†ä¿æŒå®‰å…¨è·ç¦»ï¼Œå‡å°‘ç¢°æ’æ„å¤–çš„å‘ç”Ÿï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„é«˜çº§ç‰ˆè‡ªåŠ¨å·¡èˆªç³»ç»Ÿã€‚</p>
<p>ç›®å‰è®¸å¤šè½¦æ¬¾ä¸Šéƒ½å·²å¯çœ‹è§æ­¤ç³»ç»Ÿçš„è¸ªå½±ã€‚</p>
<h3 id="adasé©¾é©¶äººç”Ÿç†çŠ¶æ€ç›‘è§†">ADASâ€”â€”é©¾é©¶äººç”Ÿç†çŠ¶æ€ç›‘è§†</h3>
<p><img src="/images/adas/11.png" width="30%"></p>
<p>ç›®å‰ç³»ç»Ÿå¤§å¤šéƒ½æ˜¯åˆ©ç”¨æ‘„å½±æœºä¾¦æµ‹é©¾é©¶è€…è„¸éƒ¨ï¼Œåˆ¤æ–­ä¸“æ³¨åŠ›ç¨‹åº¦ã€æ˜¯å¦æœ‰æ‰“çŒç¡çš„è±¡å¾ï¼Œè¿˜æœ‰ç³»ç»Ÿæ›´æ˜¯åˆ©ç”¨é©¾é©¶äººçœ¼ç›å¼€é—­é¢‘ç‡æƒ…å†µï¼Œæ¥è¾¨åˆ«å®‰å…¨ç­‰çº§ï¼Œæä¾›é€‚åˆçš„è­¦å‘Šæˆ–æ˜¯ååŠ©åŠ¨ä½œã€‚</p>
<p>å¦‚æœé©¾é©¶è€…çš„è„¸éƒ¨è¡¨æƒ…å˜åŒ–å‡å°‘ï¼Œç”šè‡³å‡ºç°é—­çœ¼çš„æƒ…å†µï¼Œè½¦è¾†å°±ä¼šé€è¿‡å£°å“ä¸ç¯å·æ¥è­¦ç¤ºè½¦ä¸»æ³¨æ„ï¼Œä»¥å‡å°‘æ„å¤–äº‹æ•…å‘ç”Ÿã€‚</p>
<h2 id="adaså…³é”®èŠ‚ç‚¹">ADASå…³é”®èŠ‚ç‚¹</h2>
<ul>
<li><p>æ„ŸçŸ¥</p>
<p>ç›®å‰ADASä¸»è¦é‡‡ç”¨çš„<code>ä¼ æ„Ÿå™¨</code>æœ‰æ‘„åƒå¤´ã€é›·è¾¾ã€æ¿€å…‰å’Œè¶…å£°æ³¢ç­‰ï¼Œå¯ä»¥æ¢æµ‹å…‰ã€çƒ­ã€å‹åŠ›æˆ–å…¶å®ƒç”¨äºç›‘æµ‹æ±½è½¦çŠ¶æ€çš„å˜é‡ï¼Œé€šå¸¸ä½äºè½¦è¾†çš„å‰åä¿é™©æ ã€ä¾§è§†é•œã€é©¾é©¶æ†å†…éƒ¨æˆ–è€…æŒ¡é£ç»ç’ƒä¸Šã€‚</p>
<p>å¤§éƒ¨ä»½ADASé‡‡ç”¨<code>æ‘„åƒå¤´</code>+<code>é›·è¾¾</code>çš„ç»„åˆæ–¹å¼ï¼Œä»¥å®ç°é›·è¾¾æµ‹è·ä¸æ‘„åƒå¤´å›¾åƒè¯†åˆ«åŠŸèƒ½çš„äº’è¡¥ã€‚ä¸»åŠ¨å¼ä¸è¢«åŠ¨å¼çº¢å¤–å¤œè§†ç³»ç»Ÿæ˜¯ä¸¤ç§ä¸»æµçš„æŠ€æœ¯è·¯çº¿ã€‚<code>ä¸»åŠ¨å¼</code>é€šè¿‡CCDæ¥å—ç‰©ä½“åå°„çš„å¯¹åº”æ•æ„Ÿé¢‘è°±æˆåƒï¼Œè€Œ<code>è¢«åŠ¨å¼</code>çš„çº¢å¤–ç„¦å¹³é¢æ¢æµ‹å™¨æ¥å—ç‰©ä½“çš„çº¢å¤–è¾å°„æˆåƒã€‚ä¸¤è€…å„æœ‰ä¼˜åŠ¿ï¼Œå°†åœ¨è¾ƒé•¿æ—¶é—´å†…å…±å­˜ã€‚</p>
<p>ä¸åŒçš„ç³»ç»Ÿéœ€è¦ä½¿ç”¨ä¸åŒç±»å‹çš„è½¦ç”¨ä¼ æ„Ÿå™¨ï¼ŒåŒ…å«æ¯«ç±³æ³¢é›·è¾¾ã€è¶…å£°æ³¢é›·è¾¾ã€çº¢å¤–é›·è¾¾ã€æ¿€å…‰é›·è¾¾ã€CCD
CMOSå½±åƒä¼ æ„Ÿå™¨åŠè½®é€Ÿä¼ æ„Ÿå™¨ç­‰ï¼Œæ¥æ”¶é›†æ•´è½¦çš„å·¥ä½œçŠ¶æ€åŠå…¶å‚æ•°å˜åŒ–æƒ…å½¢ï¼Œå¹¶å°†ä¸æ–­å˜åŒ–çš„æœºæ¢°è¿åŠ¨å˜æˆç”µå­å‚æ•°(ç”µå‹ã€ç”µé˜»åŠç”µæµ)ã€‚</p>
<ul>
<li>ä¸¾ä¾‹æ¥è¯´ï¼Œè½¦é“åç¦»è­¦å‘Šç³»ç»Ÿä½¿ç”¨CMOSå½±åƒä¼ æ„Ÿå™¨ã€å¤œè§†ç³»ç»Ÿåˆ™ä½¿ç”¨çº¢å¤–çº¿ä¼ æ„Ÿå™¨ã€é€‚åº”æ€§å®šé€Ÿæ§åˆ¶é€šå¸¸ä½¿ç”¨é›·è¾¾ã€åœè½¦è¾…åŠ©ç³»ç»Ÿåˆ™ä¼šä½¿ç”¨è¶…å£°æ³¢ç­‰ã€‚</li>
</ul></li>
<li><p>åˆ¤æ–­</p>
<p>ç®—æ³•æ˜¯ADASç³»ç»Ÿå¯é æ€§ã€å‡†ç¡®åº¦çš„<code>å†³å®šæ€§å› ç´ </code>ï¼Œä¸»è¦åŒ…æ‹¬æ‘„åƒå¤´/é›·è¾¾æµ‹è·ã€è¡Œäººè¯†åˆ«ã€é“è·¯äº¤é€šæ ‡å¿—è¯†åˆ«ç­‰ï¼Œé’ˆå¯¹å‰è£…åº”ç”¨çš„å¯é æ€§è¦æ±‚é«˜ï¼Œéœ€è¦è¿›è¡Œå¤§é‡çš„åœºæ™¯æµ‹è¯•ä¸æ ‡å®šã€‚å…¶ä¸­é›·è¾¾æ ‡å®šçš„é—¨æ§›æœ€é«˜ã€‚</p>
<p>ç”µå­æ§åˆ¶å•å…ƒ(ECU)ä¼šåœ¨é’ˆå¯¹ä¼ æ„Ÿå™¨æ‰€æ”¶é›†åˆ°çš„ä¿¡æ¯è¿›è¡Œåˆ†æå¤„ç†ï¼Œç„¶åå†å‘æ§åˆ¶çš„æ‰§è¡Œè£…ç½®ä¸‹è¾¾åŠ¨ä½œæŒ‡ä»¤ã€‚</p></li>
<li><p>æ‰§è¡Œ
åŒ…å«æ²¹é—¨ã€åˆ¹è½¦ã€ç¯å…‰ã€å£°å“ç­‰ç³»ç»Ÿéƒ½æ˜¯å±äºæ‰§è¡Œå™¨çš„èŒƒç•´å†…ï¼Œä¼šä¾æ®ECUè¾“å‡ºçš„è®¯å·ï¼Œæ¥æ‰§è¡Œå„ç§ååº”åŠ¨ä½œï¼Œè®©æ±½è½¦å®‰å…¨è¡Œé©¶äºé“è·¯ä¸Šã€‚</p>
<p>ADASç³»ç»Ÿé€šè¿‡ä¼ æ„Ÿå™¨è·å–æ•°æ®ï¼Œä¸»èŠ¯ç‰‡å®Œæˆåˆ¤æ–­åï¼Œåˆçº§åº”ç”¨é€šè¿‡å£°éŸ³ã€å›¾åƒã€æŒ¯åŠ¨å¯¹é©¾é©¶è€…è¿›è¡Œ<code>è­¦ç¤º</code>ã€‚</p>
<p>ä¸ç”µå­æ§åˆ¶åŠŸèƒ½ç»“åˆåï¼Œé€æ¸è¿›åŒ–åˆ°å¯¹è½¦è¾†çš„<code>è‡ªåŠ¨æ§åˆ¶</code>ã€‚</p></li>
</ul>
<h2 id="adasäº§ä¸šé“¾">ADASäº§ä¸šé“¾</h2>
<p><img src="/images/adas/12.png" width="60%"></p>
<p>åœ¨äº§ä¸šé“¾ä¸­ï¼Œ<code>ä¼ æ„Ÿå™¨æŠ€æœ¯</code>(æ‘„åƒå¤´ä¸é›·è¾¾)ã€<code>èŠ¯ç‰‡</code>ä¸<code>ç®—æ³•</code>æ˜¯å…¶ä¸­çš„å…³é”®ã€‚</p>
<ul>
<li><p>å…¶ä¸­ï¼Œæ‘„åƒå¤´æ ¸å¿ƒéƒ¨ä»¶CMOSæ„Ÿå…‰èŠ¯ç‰‡ä¸»è¦æŒæ¡åœ¨ä»¥ç´¢å°¼ã€ä¸‰æ˜Ÿä¸ºä»£è¡¨çš„æ—¥éŸ©ä¼ä¸šä¸­ã€‚</p></li>
<li><p>é›·è¾¾åˆ†ä¸ºè¶…å£°æ³¢é›·è¾¾ã€æ¯«ç±³æ³¢é›·è¾¾ã€æ¿€å…‰é›·è¾¾</p>
<ul>
<li>è¶…å£°æ³¢é›·è¾¾æŠ€æœ¯é—¨æ§›è¾ƒä½ï¼Œä¾›åº”å•†è¾ƒå¤šï¼›</li>
<li>æ¿€å…‰é›·è¾¾æˆæœ¬é«˜æ˜‚ï¼Œæœªå•†ä¸šåŒ–ï¼›</li>
<li>æ¯«ç±³æ³¢é›·è¾¾æˆæœ¬åœ¨ä¸¤è€…ä¹‹é—´ï¼ŒæŠ€æœ¯é—¨æ§›è¾ƒé«˜ï¼Œä¸»è¦æŒæ¡åœ¨ZF
TRWã€åšä¸–ç­‰è¡Œä¸šé¢†å…ˆå…¬å¸æ‰‹ä¸­ã€‚</li>
</ul></li>
<li><p>è€ŒèŠ¯ç‰‡ã€ç®—æ³•åœ¨ADASç³»ç»Ÿä¸­è‡³å…³é‡è¦ï¼Œè¡Œä¸šé›†ä¸­åº¦é«˜ï¼Œä¸»è¦æœ‰Mobileeyeã€ADIç­‰å…¬å¸</p></li>
</ul>
<h2 id="è§†è§‰adas">è§†è§‰ADAS</h2>
<ul>
<li><p>åŸç†</p>
<p>å›¾åƒå¤„ç†ï¼Œå°†å›¾ç‰‡è½¬æ¢ä¸º<code>äºŒç»´æ•°æ®</code></p>
<p>æ¨¡å¼è¯†åˆ«ï¼Œé€šè¿‡å›¾åƒåŒ¹é…è¿›è¡Œè¯†åˆ«ï¼Œå¦‚è½¦è¾†ã€è¡Œäººã€è½¦é“çº¿ã€äº¤é€šæ ‡å¿—</p>
<p>åˆ©ç”¨ç‰©ä½“çš„è¿åŠ¨æ¨¡å¼ï¼Œæˆ–åŒç›®å®šä½ï¼Œä¼°ç®—ç›®æ ‡ç‰©ä½“ä¸æœ¬è½¦çš„ç›¸å¯¹è·ç¦»å’Œç›¸å¯¹é€Ÿåº¦</p></li>
<li><p>ä¼˜ç‚¹</p>
<p>åƒç´ çº§åˆ«çš„é¢œè‰²ã€åç§»ã€è·ç¦»ç­‰ä¿¡æ¯</p>
<p>æˆæœ¬ä½ï¼Œä¿¡æ¯é‡ä¸°å¯Œã€ç‰¹å¾è¯†åˆ«å¥½</p></li>
<li><p>ç¼ºç‚¹</p>
<p>è·å–å‡†ç¡®<code>ä¸‰ç»´ä¿¡æ¯</code>éš¾åº¦å¤§</p>
<p>å—ç¯å¢ƒå…‰é™åˆ¶æ¯”è¾ƒå¤§ï¼Œé€Ÿåº¦ã€è·ç¦»åˆ†è¾¨ç‡å·®</p></li>
</ul>
<p>ç›®å‰åœ¨è¡Œè½¦è¾…åŠ©åŠŸèƒ½ä¸­ï¼Œæ‘„åƒå¤´å¯ç”¨æ¥å•ç‹¬å®ç°å¾ˆå¤šåŠŸèƒ½ï¼Œå¹¶ä¸”æŒ‰ç…§è‡ªåŠ¨é©¾é©¶å‘å±•è§„å¾‹é€æ¸æ¼”è¿›ã€‚</p>
<p><img src="/images/adas/13.png" width="60%"></p>
<p>è¿™äº›åŠŸèƒ½æ›´åŠ å¼ºè°ƒå¯¹è¾“å…¥å›¾åƒçš„å¤„ç†ï¼Œä»æ‹æ‘„çš„è§†é¢‘æµä¸­æå–<code>æœ‰æ•ˆç›®æ ‡è¿åŠ¨ä¿¡æ¯</code>åšè¿›ä¸€æ­¥åˆ†æï¼Œç»™å‡ºé¢„è­¦ä¿¡æ¯æˆ–ç›´æ¥è°ƒåŠ¨æ§åˆ¶æœºæ„ã€‚ç›¸æ¯”è§†é¢‘è¾“å‡ºç±»åŠŸèƒ½ï¼Œå¼ºè°ƒ<code>é«˜é€Ÿä¸‹çš„å®æ—¶æ€§</code>ï¼Œè¿™éƒ¨åˆ†æŠ€æœ¯æ­£å¤„åœ¨å‘å±•ä¸Šå‡æœŸã€‚</p>
<h2 id="è§†è§‰adasè½¯ç¡¬éœ€æ±‚">è§†è§‰ADASè½¯ç¡¬éœ€æ±‚</h2>
<ul>
<li><p>æ‘„åƒå¤´æ¨¡ç»„</p>
<p>éœ€è¦å®šåˆ¶åŒ–å¼€å‘ï¼Œä¸€èˆ¬è¦æ»¡è¶³å®½åŠ¨æ€ã€é«˜æ„Ÿå…‰ã€ä¸ä¸€å‘³è¿½æ±‚é«˜åƒç´ 
ADASçš„æ‘„åƒå¤´æ›´è®²ç©¶ä¸ºè¡Œè½¦æ—¶é¢„ç•™æ›´å¤šåˆ¤æ–­æ—¶é—´ï¼Œéœ€è¦çœ‹å¾—æ›´è¿œã€‚</p></li>
<li><p>æ ¸å¿ƒç®—æ³•èŠ¯ç‰‡</p>
<p>å¦‚æœåœ¨ç®—æ³•ä¸Šå åŠ æ·±åº¦å­¦ä¹ æ¥å¸®åŠ©è¯†åˆ«ç‡æå‡ï¼Œå¯¹ç¡¬ä»¶æ€§èƒ½çš„è¦æ±‚åªå¢ä¸å‡ï¼Œä¸»è¦è€ƒè™‘çš„æ€§èƒ½æŒ‡æ ‡æ˜¯è¿ç®—é€Ÿåº¦ã€åŠŸè€—ã€ä»¥åŠæˆæœ¬ã€‚</p></li>
<li><p>è½¯ä»¶ç®—æ³•</p>
<p>æºå¤´æ˜¯è®¡ç®—æœºè§†è§‰-&gt;æ·±åº¦å­¦ä¹ çš„æ¸—é€</p>
<p>åœ¨æ„ŸçŸ¥æ–¹é¢ï¼Œæ·±åº¦å­¦ä¹ å°†ä¼šå¼¯é“è¶…è½¦ä¼ ç»Ÿè§†è§‰ç®—æ³•</p>
<p>æ— è®ºå“ªç§ç®—æ³•ï¼Œæ•°æ®éƒ½æ˜¯ç”¨æ¥è®­ç»ƒæµ‹è¯•çš„å®è´µèµ„æºï¼Œè€Œä¸”ä¸æ˜¯å•çº¯çš„è¶Šå¤šè¶Šå¥½ï¼Œè€Œæ˜¯è¶Šæœ‰æ•ˆè¶Šå¥½ï¼ˆç¬¦åˆå®é™…ç”¨è½¦ç¯å¢ƒå¹¶ä¿è¯å¤šæ ·åŒ–ï¼‰ã€‚</p></li>
</ul>
<h2 id="å°ç»“">å°ç»“</h2>
<p>æœ¬æ¬¡è°ƒç ”å¯¹<code>ADAS</code>æœ‰äº†ä¸€ä¸ªç³»ç»Ÿçš„è®¤çŸ¥ï¼Œæ„Ÿè§‰æ˜¯<code>éå¸¸æœ‰æ½œåŠ›</code>ä»¥åŠ<code>éå¸¸æœ‰æŒ‘æˆ˜</code>çš„å‘å±•æ–¹å‘ã€‚</p>
<p>è§†è§‰ADASç›¸æ¯”äºæ¯«ç±³æ³¢é›·è¾¾è¯†åˆ«æ•ˆæœæ›´å¥½ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨<code>è§†è§‰ä¿¡æ¯</code>è¿›è¡Œè½¦è¾†ã€è·¯æ ‡ç­‰è¯†åˆ«ã€‚</p>
<p>æˆ‘ä»¬çš„é‡ç‚¹åœ¨äºåˆ©ç”¨<code>æ„ŸçŸ¥çš„ä¿¡æ¯</code>åšå†³ç­–ï¼Œå…¶ä¸­ç®—æ³•æ˜¯ADASç³»ç»Ÿå¯é æ€§ã€å‡†ç¡®åº¦çš„å†³å®šæ€§å› ç´ ï¼Œé«˜æ•ˆçš„éƒ¨ç½²ä¼šå½±å“å®æ—¶æ€§ã€‚</p>
<p>æ¥ä¸‹æ¥ä¼šå¯¹<code>FCW</code>åŠç›¸å…³ç®—æ³•è¿›è¡Œè¿›ä¸€æ­¥è°ƒç ”</p>
<h2 id="å‚è€ƒåšå®¢">å‚è€ƒåšå®¢</h2>
<p><a
href="https://blog.csdn.net/u010607947/article/details/70847028?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_source=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0">ä¸€ç¯‡æ–‡ç« çœ‹æ‡‚ADAS</a></p>
<p><a
href="https://blog.csdn.net/zhanshen112/article/details/80374815?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522158760398419195162559542%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=158760398419195162559542&amp;biz_id=0&amp;utm_source=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v25-6">ADASçš„å…«å¤§ç³»ç»Ÿ</a></p>
<p><a
href="https://blog.csdn.net/sinat_32970179/article/details/99833646?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522158760398419195162559542%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=158760398419195162559542&amp;biz_id=0&amp;utm_source=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v25-13">ç‰¹æ–¯æ‹‰ã€å‰åˆ©è½¦ä¸Šçš„é‚£äº›ADASç³»ç»Ÿä½ éƒ½ä¼šç”¨å—ï¼Ÿ</a></p>
<p><a
href="https://blog.csdn.net/wanzew/article/details/82828579?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_source=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-4">ADASåŠŸèƒ½ç›˜ç‚¹åŠå®ç°è¿‡ç¨‹è§£æ</a></p>
<p><a
href="https://blog.csdn.net/usstmiracle/article/details/95461183?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_source=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-3">ADASæ˜¯ä»€ä¹ˆï¼Ÿ</a></p>
<p><a
href="https://blog.csdn.net/weixin_42229404/article/details/82623742?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522158760398419195162559542%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=158760398419195162559542&amp;biz_id=0&amp;utm_source=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v25-1">ADASå„åŠŸèƒ½æ¨¡å—åŠADASè§£å†³æ–¹æ¡ˆæä¾›å•†è¯¦è§£</a></p>
<p><a
href="https://blog.csdn.net/Gary_Yan_cc/article/details/80717069?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522158760398419195162559542%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=158760398419195162559542&amp;biz_id=0&amp;utm_source=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v25-12">è½¦è½½æ‘„åƒå¤´åœ¨ADASä¸­çš„åº”ç”¨</a></p>
<p><a
href="https://blog.csdn.net/u011776903/article/details/72866442">ADASè§†è§‰æ–¹æ¡ˆç›˜ç‚¹ä¸Šç¯‡ï¼šæ‘„åƒå¤´ã€èŠ¯ç‰‡å’Œç®—æ³•</a></p>
<h2 id="å‚è€ƒè§†é¢‘">å‚è€ƒè§†é¢‘</h2>
<p><a
href="https://haokan.baidu.com/v?vid=6343999001934023106&amp;pd=bjh&amp;fr=bjhauthor&amp;type=video">ADASè‡ªåŠ¨è¾…åŠ©é©¾é©¶ç³»ç»Ÿä¸ºä½•å¦‚æ­¤å—é’çï¼Ÿçœ‹çœ‹å®ƒåˆ°åº•æœ‰å¤šå¼ºå¤§ï¼</a></p>
<p><a
href="https://haokan.baidu.com/v?vid=3780861684865301120&amp;pd=bjh&amp;fr=bjhauthor&amp;type=video">ADASæ™ºèƒ½é©¾é©¶è¾…åŠ©ç³»ç»Ÿ</a></p>
<p><a
href="https://haokan.baidu.com/v?vid=8288616481555786115&amp;tab=recommend">WEY
VV6æ™ºèƒ½é©¾é©¶è¾…åŠ©ç³»ç»Ÿæ·±åº¦ä½“éªŒ</a></p>
<p><a
href="https://v.qq.com/x/page/m0373fiwrvp.html?">ç¬¬ä¸€è§†è§’ä½“éªŒé€šç”¨è‡ªåŠ¨é©¾é©¶ç¬¬äºŒå¼¹</a></p>
]]></content>
      <tags>
        <tag>ADAS</tag>
        <tag>techï¼Œ research</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€æ–‡ææ‡‚è½¬ç½®å·ç§¯çš„å®šä¹‰ã€è®¡ç®—å’ŒåŠ é€Ÿ</title>
    <url>/2023/05/04/97_transposed-convolution/</url>
    <content><![CDATA[<p>æœ€è¿‘åšäº†ä¸€äº›è½¬ç½®å·ç§¯çš„ç›¸å…³éƒ¨ç½²å·¥ä½œï¼Œæœ€å¼€å§‹æçš„æ—¶å€™å…¶å®æœ‰ç‚¹æ™•å¤´è½¬å‘çš„ï¼Œæ€»æ˜¯è¯•å›¾åœ¨ç”¨å·ç§¯çš„è®¡ç®—æ–¹å¼åè¿‡æ¥ç†è§£è½¬ç½®å·ç§¯ï¼Œå°¤å…¶æ˜¯çœ‹åˆ°<code>padding</code>éƒ¨åˆ†å’Œ<code>stride</code>éƒ¨åˆ†ï¼Œæå¾—æˆ‘å¤´æ›´å¤§äº†ï¼Œå¿ƒæƒ³æ€ä¹ˆè¿™ä¹ˆåäººç±»ï¼Ÿï¼ˆåæ¥å‘ç°æ˜¯æˆ‘ç†è§£çš„é—®é¢˜ï¼Œå…¶å®ä¸€ç‚¹ä¹Ÿä¸åäººç±»ï¼‰</p>
<p>ç°åœ¨ä¹Ÿç®—æ˜¯äº†è§£äº†å…·ä½“å·¥ä½œæœºåˆ¶ä»¥åŠåŠ é€Ÿæ–¹å¼ï¼Œåœ¨è¿™é‡Œæ•´ç†æ€»ç»“ä¸€ä¸‹ã€‚æ¬¢è¿ç•™è¨€ã€æŒ‡æ­£
:)</p>
<span id="more"></span>
<h2 id="å‚è€ƒæ–‡æ¡£">0ã€å‚è€ƒæ–‡æ¡£</h2>
<p>å…ˆæ•¬ä¸Šå„ä½å¤§ä½¬çš„æ–‡æ¡£ï¼Œè¿™å¯¹æˆ‘éå¸¸éå¸¸æœ‰å¸®åŠ©ï¼</p>
<p><a
href="https://www.tensorflow.org/api_docs/python/tf/keras/layers/Conv2DTranspose">tf.keras.layers.Conv2DTranspose</a></p>
<p><a
href="https://towardsdatascience.com/what-is-transposed-convolutional-layer-40e5e6e31c11">What
is Transposed Convolutional Layer?</a></p>
<p><a
href="https://blog.csdn.net/LoseInVain/article/details/81098502">ä¸€æ–‡ææ‡‚åå·ç§¯ï¼Œè½¬ç½®å·ç§¯</a></p>
<p><a
href="https://naokishibuya.medium.com/up-sampling-with-transposed-convolution-9ae4f2df52d0">Up-sampling
with Transposed Convolution</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/115070523">è½¬ç½®å·ç§¯(Transpose
Convolution)</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/283091528">conv_transpose
depth-wiseä¼˜åŒ–æŠ€å·§</a></p>
<p>å›¾è§£è½¬ç½®å·ç§¯ï¼Œæˆ‘åˆ†åˆ«åœ¨<a
href="https://github.com/vdumoulin/conv_arithmetic">conv_arithmetic</a>å’Œ<a
href="https://towardsdatascience.com/what-is-transposed-convolutional-layer-40e5e6e31c11">What
is Transposed Convolutional Layer</a>é‡Œçœ‹åˆ°ï¼Œæ„Ÿè§‰åè€…æ›´å®¹æ˜“ç†è§£ã€‚</p>
<h2 id="è½¬ç½®å·ç§¯æ˜¯ä»€ä¹ˆ">1ã€è½¬ç½®å·ç§¯æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 id="å®šä¹‰">1.1 å®šä¹‰</h3>
<p><code>è½¬ç½®å·ç§¯</code>æœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸º<code>åå·ç§¯</code>ï¼Œæˆ‘ä¸ªäººè®¤ä¸º<code>åå·ç§¯</code>æœ‰å¾ˆå¼ºçš„è¯¯å¯¼æ€§ï¼Œå› ä¸ºè¿™å¹¶ä¸æ˜¯å·ç§¯çš„é€†è¿ç®—ï¼Œè¿˜æ˜¯å«<code>è½¬ç½®å·ç§¯</code>æ¯”è¾ƒå¥½ã€‚</p>
<p><code>è½¬ç½®å·ç§¯</code>åœ¨æ·±åº¦å­¦ä¹ ä¸­è¡¨ç¤ºä¸º<code>å·ç§¯</code>çš„ä¸€ä¸ªé€†å‘è¿‡ç¨‹ï¼Œå¯ä»¥æ ¹æ®å·ç§¯æ ¸å¤§å°å’Œè¾“å‡ºçš„å¤§å°ï¼Œæ¢å¤å·ç§¯å‰çš„<code>feature map</code>å°ºå¯¸ï¼Œè€Œä¸æ˜¯æ¢å¤åŸå§‹å€¼ã€‚</p>
<p>å¦‚æœå°†å·ç§¯è¡¨ç¤ºä¸ºy=Cx,è½¬ç½®å·ç§¯åˆ™æ˜¯å°†çš„è¾“å…¥è¾“å‡ºäº’æ¢ï¼šx =
C<sup>T</sup>y</p>
<p>å…¶ä¸­ï¼Œ C<sup>T</sup>è¡¨ç¤ºçŸ©é˜µè½¬ç½®ã€‚</p>
<p>è¯¦ç»†å®šä¹‰è¿™é‡Œå°±ä¸ä»”ç»†ä»‹ç»äº†,ä¸Šæ–‡é‡Œçš„å„ä¸ªå‚è€ƒæ–‡æ¡£é‡Œè¯´çš„éƒ½å¾ˆæ˜ç™½ã€‚</p>
<h3 id="éœ€è¦æ³¨æ„">1.2 éœ€è¦æ³¨æ„</h3>
<p>æ€»ç»“ä¸€ä¸‹æˆ‘è®¤ä¸ºçš„æœ€é‡è¦çš„ï¼ˆæœ€å¼€å§‹çº ç»“äº†å¾ˆä¹…çš„ï¼‰å‡ ä¸ªç‚¹ï¼š</p>
<ul>
<li><p>è½¬ç½®å·ç§¯ä¸æ˜¯æ¢å¤åŸå§‹å€¼ï¼Œè€Œæ˜¯æ¢å¤åŸå§‹å°ºå¯¸ï¼ˆæ‰€ä»¥ä¸è¦è¯•å›¾ä»å·ç§¯çš„é€†è¿ç®—è§’åº¦è€ƒè™‘ï¼‰</p></li>
<li><p><code>padding</code>æ–¹å¼å’Œå·ç§¯çš„paddingæ˜¯ä¸ä¸€æ ·çš„ï¼Œè½¬ç½®å·ç§¯çš„å®é™…paddingæ˜¯<code>k-p-1</code></p></li>
<li><p><code>stride</code>åœ¨è¿™é‡Œç”¨é€”ä¸æ˜¯è·³å‡ ä¸ªæ•°ï¼Œè€Œæ˜¯ç”¨äºåˆ¤æ–­å¡«å……å‡ ä¸ª0</p></li>
<li><p>ç”¨å…¬å¼æ³•ç›´æ¥è®¡ç®—çš„è¯ï¼Œé¦–å…ˆå¯¹å·ç§¯æ ¸åšä¸­å¿ƒå¯¹ç§°æ“ä½œ(çŸ©é˜µæ—‹è½¬180Â°)</p></li>
<li><p>ä¸è€ƒè™‘æ€§èƒ½çš„è¯ï¼Œç›´æ¥æŒ‰ç…§è½¬ç½®å·ç§¯å®šä¹‰å†™ã€‚åä¹‹ï¼Œä¸€å®šè¦ä¼˜åŒ–ï¼Œä¸ç„¶æ…¢å¾—å¾ˆã€‚</p></li>
</ul>
<p>The table below summarizes the two convolutions, standard and
transposed.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Conv Type</th>
<th style="text-align: center;">Operation</th>
<th style="text-align: center;">Zero Insertions</th>
<th style="text-align: center;">Padding</th>
<th style="text-align: center;">Stride</th>
<th style="text-align: center;">Output Size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Standard</td>
<td style="text-align: center;">Downsampling</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">p</td>
<td style="text-align: center;">s</td>
<td style="text-align: center;">(i+2p-k)/s+1</td>
</tr>
<tr class="even">
<td style="text-align: center;">Transposed</td>
<td style="text-align: center;">Upsampling</td>
<td style="text-align: center;">(s-1)</td>
<td style="text-align: center;">(k-p-1)</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">(i-1)*s+k-2p</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æ³¨æ„æ³¨æ„ï¼Œæœ‰æ²¡æœ‰è§‰å¾—è½¬ç½®å·ç§¯çš„<code>padding</code>å’Œ<code>stride</code>å¾ˆåäººç±»?è¿™å’Œæˆ‘ç†è§£çš„å®Œå…¨ä¸ä¸€æ ·å•Šï¼Ÿå…¶å®ä¸ç„¶ï¼Œè¿™é‡Œçš„<code>padding</code>å’Œ<code>stride</code>æŒ‡çš„å…¶å®æ˜¯è½¬ç½®å·ç§¯ç»“æœçš„<code>padding</code>å’Œ<code>stride</code>ã€‚å³ï¼Œé€†å‘æ¥çœ‹çš„æƒ…å†µä¸‹ï¼Œå·ç§¯çš„<code>padding</code>å’Œ<code>stride</code>ã€‚</p>
</blockquote>
<blockquote>
<p>ä¸ºäº†è¯´æ˜è½¬ç½®å·ç§¯å¦‚ä½•<code>æ¨ç†è®¡ç®—</code>ï¼Œæœ¬æ–‡ç¬¬äºŒç« èŠ‚ä¼šä½¿ç”¨è¡¨æ ¼æ‰€ç¤ºçš„å‚æ•°è®¡ç®—æ–¹å¼ï¼Œç›´åˆ°ç¬¬ä¸‰ç« èŠ‚æ‰ä¼šä»å·ç§¯çš„è§’åº¦æ¥çœ‹ï¼Œåˆ°æ—¶å€™ä½ ä¼šæç„¶å¤§æ‚Ÿï¼Œ<code>padding</code>å’Œ<code>stride</code>çš„å«ä¹‰ï¼ŒåŸæ¥å¦‚æ­¤ã€‚</p>
</blockquote>
<h2 id="è½¬ç½®å·ç§¯çš„è®¡ç®—">2ã€è½¬ç½®å·ç§¯çš„è®¡ç®—</h2>
<h3 id="ä»æœ€ç®€å•çš„å¼€å§‹">2.1 ä»æœ€ç®€å•çš„å¼€å§‹</h3>
<p>conv_transposeæœ‰ä¸€ç§æœ€ç›´æ¥çš„è®¡ç®—æ–¹å¼ï¼šé¦–å…ˆå¯¹å·ç§¯æ ¸åšä¸­å¿ƒå¯¹ç§°æ“ä½œ(çŸ©é˜µæ—‹è½¬180Â°)ï¼Œå¹¶å¯¹è¾“å…¥feature
mapè¿›è¡Œæ’0ï¼Œç„¶åæŠŠæ—‹è½¬åçš„å·ç§¯æ ¸å’Œæ’0åçš„feature mapè¿›è¡Œå·ç§¯æ“ä½œ</p>
<hr />
<p>ç°åœ¨å‡è®¾è¾“å…¥çš„<code>feature map</code>æ˜¯3x3å¤§å°ï¼Œ<code>kernel size</code>æ˜¯3x3å¤§å°ï¼Œ<code>stride</code>ä¸º1ï¼Œ
<code>padding</code>ä¸º0ï¼Œå³ï¼š</p>
<pre><code>input_sz:     3
kernel_sz =   3
stride =      1
padding_sz =  0</code></pre>
<p>å†™ä¸€æ®µtorchä»£ç è®¡ç®—ä¸€ä¸‹ï¼š <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">X = torch.Tensor([[[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]]])</span><br><span class="line">K = torch.Tensor([[[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]]])</span><br><span class="line">Y = torch.nn.functional.conv_transpose2d(X, K, stride=<span class="number">1</span>, padding=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(Y)</span><br></pre></td></tr></table></figure></p>
<p>å¾—åˆ°è¾“å‡ºç»“æœï¼š <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensor([[[[  1.,   4.,  10.,  12.,   9.],</span><br><span class="line">          [  8.,  26.,  56.,  54.,  36.],</span><br><span class="line">          [ 30.,  84., 165., 144.,  90.],</span><br><span class="line">          [ 56., 134., 236., 186., 108.],</span><br><span class="line">          [ 49., 112., 190., 144.,  81.]]]])</span><br></pre></td></tr></table></figure> è®¡ç®—è¿‡ç¨‹ï¼š</p>
<ol type="1">
<li>å¯¹è¾“å…¥<code>X</code>è¿›è¡Œå¤„ç†ï¼Œæ’å…¥<code>(s-1)</code>çš„0ï¼Œåš<code>(k-p-1)</code>çš„padding</li>
</ol>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>s=1</code>ï¼Œåˆ™æ— éœ€æ’å…¥0ï¼Œåªè¿›è¡Œ<code>(k-p-1)=(3-0-1)=2</code>çš„paddingã€‚è¾“å…¥<code>X</code>åˆ™è½¬åŒ–ä¸º</p>
<p><img src="/images/transposed_conv/x_s1p0.png" width="50%"></p>
<ol start="2" type="1">
<li>å¯¹å·ç§¯æ ¸<code>K</code>è¿›è¡Œä¸­å¿ƒå¯¹ç§°æ“ä½œ</li>
</ol>
<p>å·ç§¯æ ¸<code>K</code>åˆ™è½¬åŒ–ä¸º</p>
<p><img src="/images/transposed_conv/k_reverse.png" width="30%"></p>
<ol start="3" type="1">
<li>è¿›è¡Œå·ç§¯è®¡ç®—</li>
</ol>
<p><img src="/images/transposed_conv/s1p0.png" width="80%"></p>
<ol start="4" type="1">
<li>gifå›¾è§£</li>
</ol>
<p><img src="/images/transposed_conv/transposed_conv_S1P0.gif" width="70%"></p>
<h3 id="è€ƒè™‘stride">2.2 è€ƒè™‘stride</h3>
<p>æˆ‘ä¸ªäººå»ºè®®ä¸è¦ç”¨å·ç§¯çš„strideæ¥ç†è§£è½¬ç½®å·ç§¯çš„strideï¼Œ<code>stride</code>åœ¨è¿™é‡Œç”¨é€”ä¸æ˜¯è·³å‡ ä¸ªæ•°ï¼Œè€Œæ˜¯ç”¨äºåˆ¤æ–­å¡«å……å‡ ä¸ª0ã€‚</p>
<hr />
<p>ç°åœ¨å‡è®¾è¾“å…¥çš„<code>feature map</code>æ˜¯3x3å¤§å°ï¼Œ<code>kernel size</code>æ˜¯3x3å¤§å°ï¼Œ<code>stride</code>ä¸º2ï¼Œ
<code>padding</code>ä¸º0ï¼Œå³ï¼š</p>
<pre><code>input_sz:     3
kernel_sz =   3
stride =      2
padding_sz =  0</code></pre>
<p>åŒæ ·ï¼Œå†™ä¸€æ®µtorchä»£ç è®¡ç®—ä¸€ä¸‹ï¼š <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">X = torch.Tensor([[[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]]])</span><br><span class="line">K = torch.Tensor([[[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]]])</span><br><span class="line">Y = torch.nn.functional.conv_transpose2d(X, K, stride=<span class="number">2</span>, padding=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(Y)</span><br></pre></td></tr></table></figure></p>
<p>å¾—åˆ°è¾“å‡ºç»“æœï¼š <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensor([[[[  1.,   2.,   5.,   4.,   9.,   6.,   9.],</span><br><span class="line">          [  4.,   5.,  14.,  10.,  24.,  15.,  18.],</span><br><span class="line">          [ 11.,  16.,  40.,  26.,  60.,  36.,  45.],</span><br><span class="line">          [ 16.,  20.,  44.,  25.,  54.,  30.,  36.],</span><br><span class="line">          [ 35.,  46., 100.,  56., 120.,  66.,  81.],</span><br><span class="line">          [ 28.,  35.,  74.,  40.,  84.,  45.,  54.],</span><br><span class="line">          [ 49.,  56., 119.,  64., 135.,  72.,  81.]]]])</span><br></pre></td></tr></table></figure> è®¡ç®—è¿‡ç¨‹ï¼š</p>
<ol type="1">
<li>å¯¹è¾“å…¥<code>X</code>è¿›è¡Œå¤„ç†ï¼Œæ’å…¥<code>(s-1)</code>çš„0ï¼Œåš<code>(k-p-1)</code>çš„padding</li>
</ol>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>s=2</code>ï¼Œéœ€æ’å…¥1ä¸ª0ï¼Œè¿›è¡Œ<code>(k-p-1)=(3-0-1)=2</code>çš„paddingã€‚è¾“å…¥<code>X</code>åˆ™è½¬åŒ–ä¸º</p>
<p><img src="/images/transposed_conv/x_s2p0.png" width="50%"></p>
<ol start="2" type="1">
<li>å¯¹å·ç§¯æ ¸Kè¿›è¡Œä¸­å¿ƒå¯¹ç§°æ“ä½œ</li>
</ol>
<p>å·ç§¯æ ¸Kåˆ™è½¬åŒ–ä¸º</p>
<p><img src="/images/transposed_conv/k_reverse.png" width="30%"></p>
<ol start="3" type="1">
<li>è¿›è¡Œå·ç§¯è®¡ç®—</li>
</ol>
<p><img src="/images/transposed_conv/s2p0.png" width="80%"></p>
<ol start="4" type="1">
<li>gifå›¾è§£</li>
</ol>
<p><img src="/images/transposed_conv/transposed_conv_S2P0.gif" width="70%"></p>
<h3 id="è€ƒè™‘padding">2.3 è€ƒè™‘padding</h3>
<p>æˆ‘æœ€å¼€å§‹åœ¨<code>padding</code>è¿™é‡Œç–‘æƒ‘äº†å¥½ä¸€ä¼šå„¿ï¼Œè€æ˜¯åœ¨ä»å·ç§¯çš„è§’åº¦æƒ³è½¬ç½®å·ç§¯çš„<code>padding</code>ã€‚å°±å¾ˆç–‘æƒ‘ï¼Œæ€ä¹ˆ<code>padding</code>è¶Šå¤§ï¼Œè®¡ç®—ç»“æœçš„<code>feature map</code>è¶Šå°å‘¢ï¼Ÿ</p>
<p>åæ¥æš‚æ—¶ä¸æƒ³å…·ä½“ç‰©ç†å«ä¹‰äº†ï¼Œç›´æ¥è®¤ä¸ºè½¬ç½®å·ç§¯çš„å®é™…<code>padding</code>æ˜¯<code>k-p-1</code>ï¼Œä¸‡äº‹å¤§å‰ã€‚ï¼ˆç¬¬ä¸‰ç« èŠ‚ä¼šè§£<code>padding</code>è¿™ä¸ªå‚æ•°ï¼‰</p>
<hr />
<blockquote>
<p>å®é™…ä¸Šï¼Œtensorflowçš„paddingè®¡ç®—è¿˜æ˜¯æœ‰ç‚¹å·®å¼‚çš„ï¼Œé™¤äº†ä¸Šé¢æ‰€è¯´çš„è®¡ç®—ï¼Œåœ¨è®¡ç®—paddingçš„æ—¶å€™è¿˜æœ‰ä¸€ä¸ªä¸“é—¨é’ˆå¯¹è½¬ç½®å·ç§¯çš„<code>offset</code>ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´
å·¦å³/ä¸Šä¸‹ çš„paddingæ•°ä¸ä¸€è‡´ã€‚
ä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿä¸ªäººè®¤ä¸ºè¦ä»è½¬ç½®å·ç§¯çš„ç›®çš„æ¥çœ‹â€”â€”â€”â€”è¿˜åŸåŸå§‹<code>feature map</code>çš„å°ºå¯¸ã€‚
æœ¬æ–‡æš‚ä¸è€ƒè™‘è¿™ç§æƒ…å†µï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥çœ‹tensorflowæºç ã€‚</p>
</blockquote>
<hr />
<p>ç°åœ¨å‡è®¾è¾“å…¥çš„<code>feature map</code>æ˜¯3x3å¤§å°ï¼Œ<code>kernel size</code>æ˜¯3x3å¤§å°ï¼Œ<code>stride</code>ä¸º1ï¼Œ
<code>padding</code>ä¸º1ï¼Œå³ï¼š</p>
<pre><code>input_sz:     3
kernel_sz =   3
stride =      1
padding_sz =  1</code></pre>
<p>å†™ä¸€æ®µtorchä»£ç è®¡ç®—ä¸€ä¸‹ï¼š <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">X = torch.Tensor([[[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]]])</span><br><span class="line">K = torch.Tensor([[[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]]])</span><br><span class="line">Y = torch.nn.functional.conv_transpose2d(X, K, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(Y)</span><br></pre></td></tr></table></figure></p>
<p>å¾—åˆ°è¾“å‡ºç»“æœï¼š <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensor([[[[ 26.,  56.,  54.],</span><br><span class="line">          [ 84., 165., 144.],</span><br><span class="line">          [134., 236., 186.]]]])</span><br></pre></td></tr></table></figure> è®¡ç®—è¿‡ç¨‹ï¼š</p>
<ol type="1">
<li>å¯¹è¾“å…¥<code>X</code>è¿›è¡Œå¤„ç†ï¼Œæ’å…¥<code>(s-1)</code>çš„0ï¼Œåš<code>(k-p-1)</code>çš„padding</li>
</ol>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>s=1</code>ï¼Œåˆ™æ— éœ€æ’å…¥0ï¼Œåªè¿›è¡Œ<code>(k-p-1)=(3-1-1)=1</code>çš„paddingã€‚è¾“å…¥Xåˆ™è½¬åŒ–ä¸º</p>
<p><img src="/images/transposed_conv/x_s1p1.png" width="50%"></p>
<ol start="2" type="1">
<li>å¯¹å·ç§¯æ ¸<code>K</code>è¿›è¡Œä¸­å¿ƒå¯¹ç§°æ“ä½œ</li>
</ol>
<p>å·ç§¯æ ¸<code>K</code>åˆ™è½¬åŒ–ä¸º</p>
<p><img src="/images/transposed_conv/k_reverse.png" width="30%"></p>
<ol start="3" type="1">
<li>è¿›è¡Œå·ç§¯è®¡ç®—</li>
</ol>
<p><img src="/images/transposed_conv/s1p1.png" width="80%"></p>
<ol start="4" type="1">
<li>gifå›¾è§£</li>
</ol>
<p><img src="/images/transposed_conv/transposed_conv_S1P1.gif" width="70%"></p>
<h3 id="è€ƒè™‘dilation">2.4 è€ƒè™‘dilation</h3>
<p>è¿™é‡Œå°±ä¸è€ƒè™‘äº†ï¼Œå’Œå·ç§¯ä¸€æ ·çš„ï¼Œå¾ˆå®¹æ˜“ç†è§£ã€‚</p>
<h2 id="è½¬ç½®å·ç§¯çš„ç†è§£">3ã€è½¬ç½®å·ç§¯çš„ç†è§£</h2>
<p>åˆæ¬¡è§åˆ°è½¬ç½®å·ç§¯çš„æ—¶å€™ï¼Œæˆ‘çœ‹åˆ°<a
href="https://github.com/vdumoulin/conv_arithmetic">conv_arithmetic</a>å’Œ<a
href="https://towardsdatascience.com/what-is-transposed-convolutional-layer-40e5e6e31c11">What
is Transposed Convolutional
Layer</a>é‡Œé¢çš„åŠ¨å›¾è®¡ç®—æ˜¯å¾ˆå¼€å¿ƒçš„ï¼Œæ¯•ç«Ÿè¿™æœ‰åŠ©äºæˆ‘ç†è§£è½¬ç½®å·ç§¯æ˜¯å¦‚ä½•è®¡ç®—çš„ã€‚</p>
<p>ä½†åæ¥å‘ç°ï¼Œäº†è§£è®¡ç®—è¿‡ç¨‹çœ‹è¿™äº›åŠ¨å›¾æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œä½†æ˜¯è¦æ˜¯ç†è§£è½¬ç½®å·ç§¯ï¼Œè¿™äº›åŠ¨å›¾<strong>å¾ˆå®¹æ˜“è¯¯å¯¼</strong>ã€‚äºæ˜¯æˆ‘å†™ä»£ç ç”Ÿæˆäº†ä¸€äº›åŠ¨å›¾ï¼Œè™½ç„¶æœ‰ç‚¹ä¸‘ï¼Œä½†æ˜¯<code>padding</code>éƒ¨åˆ†å’Œ<code>stride</code>éƒ¨åˆ†ç«‹åˆ»æå¾—æ¸…æ¸…æ¥šæ¥šæ˜æ˜ç™½ç™½äº†ã€‚</p>
<hr />
<p>å…ˆæ¥ä¸ªæœ€ç®€å•çš„ï¼Œstride=1ï¼Œpadding=0.</p>
<p><img src="/images/transposed_conv/solution1_stride1_pad0.gif" width="70%"></p>
<ul>
<li>ä»inputçš„è§’åº¦æ¥çœ‹ï¼Œæ’å…¥<code>(s-1)</code>çš„0ï¼Œåš<code>(k-p-1)</code>çš„paddingã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>s=1</code>ï¼Œåˆ™æ— éœ€æ’å…¥0ï¼Œåªè¿›è¡Œ<code>(k-p-1)=(3-0-1)=2</code>çš„paddingã€‚</li>
</ul>
<p>æˆ‘ä»¬æ¥æ¢ä¸ªè§’åº¦çœ‹æ•´ä¸ªè®¡ç®—è¿‡ç¨‹ï¼š</p>
<p><img src="/images/transposed_conv/solution2_stride1_pad0.gif" width="55%"></p>
<ul>
<li><strong>ä»outputçš„è§’åº¦æ¥çœ‹ï¼Œstride=1ï¼Œpadding=0ï¼ˆä½ getåˆ°è¿™ä¸ªç‚¹äº†å—?!ï¼‰</strong></li>
</ul>
<hr />
<p>è¿›ä¸€æ­¥ï¼Œstride=1ï¼Œpadding=1.</p>
<p><img src="/images/transposed_conv/solution1_stride1_pad1.gif" width="60%"></p>
<ul>
<li>ä»inputçš„è§’åº¦æ¥çœ‹ï¼Œæ’å…¥<code>(s-1)</code>çš„0ï¼Œåš<code>(k-p-1)</code>çš„paddingã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>s=1</code>ï¼Œåˆ™æ— éœ€æ’å…¥0ï¼Œåªè¿›è¡Œ<code>(k-p-1)=(3-1-1)=1</code>çš„paddingã€‚</li>
</ul>
<p>åŒæ ·ï¼Œæˆ‘ä»¬æ¥æ¢ä¸ªè§’åº¦çœ‹æ•´ä¸ªè®¡ç®—è¿‡ç¨‹ï¼š</p>
<p><img src="/images/transposed_conv/solution2_stride1_pad1.gif" width="50%"></p>
<ul>
<li><strong>ä»outputçš„è§’åº¦æ¥çœ‹ï¼Œstride=1ï¼Œpadding=1</strong></li>
</ul>
<p>ç›¸ä¿¡ä½ å·²ç»æ˜ç™½ï¼Œæˆ‘åœ¨æœ€å¼€å§‹è¯´çš„ï¼Œ<strong><code>padding</code>å’Œ<code>stride</code>æŒ‡çš„å…¶å®æ˜¯è½¬ç½®å·ç§¯ç»“æœçš„<code>padding</code>å’Œ<code>stride</code></strong>è¿™å¥è¯äº†å§ï¼Ÿ</p>
<hr />
<p>å†çœ‹ä¸€ä¸ªstride=2çš„æƒ…å†µâ€”â€”</p>
<p>stride=2ï¼Œpadding=0.</p>
<p><img src="/images/transposed_conv/solution1_stride2_pad0.gif" width="70%"></p>
<ul>
<li>ä»inputçš„è§’åº¦æ¥çœ‹ï¼Œæ’å…¥<code>(s-1)</code>çš„0ï¼Œåš<code>(k-p-1)</code>çš„paddingã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>s=2</code>ï¼Œéœ€æ’å…¥1ä¸ª0ï¼Œç„¶åè¿›è¡Œ<code>(k-p-1)=(3-0-1)=2</code>çš„paddingã€‚</li>
</ul>
<p>æˆ‘ä»¬æ¥æ¢ä¸ªè§’åº¦çœ‹æ•´ä¸ªè®¡ç®—è¿‡ç¨‹ï¼š</p>
<p><img src="/images/transposed_conv/solution2_stride2_pad0.gif" width="50%"></p>
<ul>
<li><strong>ä»outputçš„è§’åº¦æ¥çœ‹ï¼Œstride=2ï¼Œpadding=0</strong></li>
</ul>
<p>å°¤å…¶æ˜¯åœ¨stride&gt;1çš„æƒ…å†µä¸‹ï¼Œç¬¬äºŒç§çš„è®¡ç®—é‡æ˜¯è¿œå°äºç¬¬ä¸€ç§çš„ï¼Œå› ä¸ºç¬¬ä¸€ç§æœ‰å¤§é‡çš„æ— æ•ˆ0è®¡ç®—ã€‚</p>
<hr />
<p>æœ€åï¼Œstride=2ï¼Œpadding=1.</p>
<p><img src="/images/transposed_conv/solution1_stride2_pad1.gif" width="70%"></p>
<ul>
<li>ä»inputçš„è§’åº¦æ¥çœ‹ï¼Œæ’å…¥<code>(s-1)</code>çš„0ï¼Œåš<code>(k-p-1)</code>çš„paddingã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>s=2</code>ï¼Œéœ€æ’å…¥1ä¸ª0ï¼Œç„¶åè¿›è¡Œ<code>(k-p-1)=(3-1-1)=1</code>çš„paddingã€‚</li>
</ul>
<p>outputçš„è§’åº¦çœ‹æ•´ä¸ªè®¡ç®—è¿‡ç¨‹ï¼š</p>
<p><img src="/images/transposed_conv/solution2_stride2_pad1.gif" width="50%"></p>
<ul>
<li><strong>ä»outputçš„è§’åº¦æ¥çœ‹ï¼Œstride=2ï¼Œpadding=1</strong></li>
</ul>
<hr />
<p>è‡³æ­¤ï¼Œå„ç§æƒ…å†µå±•ç¤ºçš„å·®ä¸å¤šäº†ï¼Œè½¬ç½®å·ç§¯çš„<code>padding</code>å’Œ<code>stride</code>çš„å«ä¹‰ï¼Œç›¸ä¿¡ä½ ä¹Ÿç†è§£äº†ã€‚å¤§å®¶è¿˜æ˜¯ä¹ æƒ¯ç”¨å·ç§¯é‚£å¥—å‚æ•°æ¥å®šä¹‰è½¬ç½®å·ç§¯ï¼Œç”šè‡³åœ¨å¾ˆå¤šæ¨ç†æ¡†æ¶ä¸­ï¼Œè½¬ç½®å·ç§¯è¿™ä¸ªç®—å­çš„inputæŒ‡çš„æ˜¯è®¡ç®—ç»“æœï¼ŒoutputæŒ‡çš„æ˜¯è¾“å…¥ï¼ˆè¿™åˆæ˜¯å¦ä¸€ä¸ªæ›¾è®©æˆ‘å›°æ‰°çš„åœ°æ–¹äº†hhhï¼‰ã€‚</p>
<h2 id="è½¬ç½®å·ç§¯çš„åŠ é€Ÿ">4ã€ è½¬ç½®å·ç§¯çš„åŠ é€Ÿ</h2>
<p>åœ¨ç¬¬ä¸‰ç« èŠ‚ï¼Œä»outputçš„è§’åº¦æ¥çœ‹çš„é‚£ç§è®¡ç®—æ–¹å¼ï¼Œå·²ç»é¿å…äº†å¤§é‡çš„æ— æ•ˆ0è®¡ç®—ï¼Œå…¶å®æ˜¯å·²ç»å¤§å¤§å‡å°<code>ä¹˜åŠ è®¡ç®—é‡</code>çš„ã€‚å› æ­¤å¯ä»¥ä»è¿™ä¸ªè§’åº¦åšåŠ é€Ÿï¼Œæ•ˆæœå¾ˆæ˜æ˜¾çš„ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å…¶ä»–çš„åŠ é€Ÿæ–¹å¼ï¼Œèƒ½å¤Ÿå¤§å¹…åº¦å¢åŠ æ¨ç†é€Ÿåº¦ã€‚</p>
<p>ç”±äºæŸäº›åŸå› ï¼Œè½¬ç½®å·ç§¯çš„è¿›ä¸€æ­¥åŠ é€Ÿå·¥ä½œæš‚ä¸åˆ—å‡ºã€‚ä»¥åå†æ›´æ–°å§</p>
<hr />
<p>æœ¬æ–‡ç”¨å›¾å‚è€ƒäº†<a
href="https://github.com/aqeelanwar/conv_layers_animation">aqeelanwar</a>çš„ä»£ç ï¼Œéå¸¸æ„Ÿè°¢ã€‚</p>
<p>å›¾åƒå‹ç¼©ç”¨äº†<a
href="https://www.iloveimg.com/zh-cn">iloveimg</a>ï¼Œéå¸¸å¥½ç”¨ï½</p>
]]></content>
      <tags>
        <tag>HPC</tag>
        <tag>tech</tag>
        <tag>engineering</tag>
        <tag>Transposed Convolution</tag>
      </tags>
  </entry>
  <entry>
    <title>Telegram bot</title>
    <url>/2024/02/17/98_Telegram_bot/</url>
    <content><![CDATA[<p>æœ€è¿‘å­¦ä¹ ä¸€äº›telegram botï¼Œè®°å½•ä¸€ä¸‹</p>
<span id="more"></span>
<h1 id="installing">Installing</h1>
<p>å®‰è£… python-telegram-bot åº“</p>
<p><code>pip install python-telegram-bot --upgrade</code></p>
<p>å®‰è£…å®Œæ¯• &gt; Successfully installed h11-0.14.0 httpcore-1.0.3
httpx-0.26.0 python-telegram-bot-20.8</p>
<h1 id="bot-ç”³è¯·">bot ç”³è¯·</h1>
<p>ç§èŠ<a href="https://t.me/BotFather">BotFather</a>,</p>
<ul>
<li>/start</li>
<li>/newbot</li>
<li>Alright, a new bot. How are we going to call it? Please choose a
name for your bot.</li>
<li>IngressHomogeneous</li>
<li>Good. Now let's choose a username for your bot. It must end in
<code>bot</code>. Like this, for example: TetrisBot or tetris_bot.</li>
<li>IngressHomogeneousBot</li>
<li>Done! Congratulations on your new bot. You will find it at
t.me/IngressHomogeneousBot. You can now add a description, about section
and profile picture for your bot, see /help for a list of commands. By
the way, when you've finished creating your cool bot, ping our Bot
Support if you want a better username for it. Just make sure the bot is
fully operational before you do this.</li>
</ul>
<p>å¦¥å–„ä¿å­˜æœ€åçš„ API Tokenã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">You can control me by sending these commands:</span><br><span class="line"></span><br><span class="line">/newbot - create a new bot</span><br><span class="line">/mybots - edit your bots</span><br><span class="line"></span><br><span class="line">Edit Bots</span><br><span class="line">/setname - change a bot&#x27;s name</span><br><span class="line">/setdescription - change bot description</span><br><span class="line">/setabouttext - change bot about info</span><br><span class="line">/setuserpic - change bot profile photo</span><br><span class="line">/setcommands - change the list of commands</span><br><span class="line">/deletebot - delete a bot</span><br><span class="line"></span><br><span class="line">Bot Settings</span><br><span class="line">/token - generate authorization token</span><br><span class="line">/revoke - revoke bot access token</span><br><span class="line">/setinline - toggle inline mode</span><br><span class="line">/setinlinegeo - toggle inline location requests</span><br><span class="line">/setinlinefeedback - change inline feedback settings</span><br><span class="line">/setjoingroups - can your bot be added to groups?</span><br><span class="line">/setprivacy - toggle privacy mode in groups</span><br><span class="line"></span><br><span class="line">Web Apps</span><br><span class="line">/myapps - edit your web apps</span><br><span class="line">/newapp - create a new web app</span><br><span class="line">/listapps - get a list of your web apps</span><br><span class="line">/editapp - edit a web app</span><br><span class="line">/deleteapp - delete an existing web app</span><br><span class="line"></span><br><span class="line">Games</span><br><span class="line">/mygames - edit your games</span><br><span class="line">/newgame - create a new game</span><br><span class="line">/listgames - get a list of your games</span><br><span class="line">/editgame - edit a game</span><br><span class="line">/deletegame - delete an existing game</span><br></pre></td></tr></table></figure>
<h1 id="è·å–æˆ‘çš„-id">è·å–æˆ‘çš„ id</h1>
<p>æ¯ä¸ª tg ç”¨æˆ·éƒ½æœ‰ä¸€ä¸²å”¯ä¸€æ ‡è¯†ï¼Œå³ä¸º user_idï¼Œå¯ä»¥ç§èŠ <a
href="https://t.me/kmuav2bot"><span class="citation"
data-cites="kmua">@kmua</span></a> å‘é€ /id æ¥è·å–å®ƒ</p>
<p>è·Ÿç€<a
href="https://github.com/python-telegram-bot/python-telegram-bot/wiki/Extensions---Your-first-Bot">Your-first-Bot</a>è¿™ä¸ªæ¥å°±å¥½äº†ï¼Œç†è§£çš„è¯å¯ä»¥å‚è€ƒ<a
href="https://krau.top/posts/tg-bot-dev-note-kmua">ä½¿ç”¨Pythonå†™ä¸€ä¸ªTelegram
botå§|Telegram botæ•™ç¨‹</a>ã€‚</p>
<p>æ„Ÿè§‰æ•´ä½“æ¯”è¾ƒå¥½ç†è§£ï¼Œæ¥ä¸‹æ¥å°±æ˜¯èµ‹äºˆå…¶çµé­‚äº†ï½</p>
<hr />
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<p><a
href="https://docs.python-telegram-bot.org/en/v20.8/">python-telegram-bot.org</a></p>
<p><a
href="https://github.com/python-telegram-bot/python-telegram-bot/wiki/Extensions---Your-first-Bot">Your-first-Bot</a></p>
<p><a
href="https://krau.top/posts/tg-bot-dev-note-kmua">ä½¿ç”¨Pythonå†™ä¸€ä¸ªTelegram
botå§|Telegram botæ•™ç¨‹</a></p>
]]></content>
      <tags>
        <tag>Telegram bot</tag>
        <tag>ingress</tag>
        <tag>Homogeneous</tag>
      </tags>
  </entry>
  <entry>
    <title>Homogeneous_ShangHai</title>
    <url>/2023/08/04/99_Homogeneous-ShangHai/</url>
    <content><![CDATA[<h1 id="èƒŒæ™¯">0ã€èƒŒæ™¯</h1>
<h2 id="å‰å¹´2021">0.0 å‰å¹´ï¼ˆ2021ï¼‰</h2>
<p>æˆ‘åœ¨åŒ—äº¬çš„æ ¡å›­é‡Œï¼Œè®¾è®¡å¹¶åˆ¶ä½œäº†ä¸€ä¸ªå…­é‡ç«¹ç¬‹ï¼Œ<a
href="https://mp.weixin.qq.com/s/O6tBVdg4Saa4KtITM-UNng">ã€Šå…­é‡è“ç¬‹æˆé•¿è®°ï¼ˆä¸Šï¼‰ã€‹</a>å’Œ<a
href="https://mp.weixin.qq.com/s/6t3HY1REaKn-AUS1TxTOdQ">ã€Šå…­é‡è“ç¬‹æˆé•¿è®°ï¼ˆä¸‹ï¼‰ã€‹</a>ï¼Œå¼€å§‹ä½“ä¼šåˆ°ç«¹ç¬‹çš„ä¹è¶£ï¼Œå¹¶ç«‹å¿—äºåšæ›´é«˜é‡çš„ç¬‹ã€‚</p>
<h2 id="å»å¹´2022">0.1 å»å¹´ï¼ˆ2022ï¼‰</h2>
<p>æˆ‘åœ¨ä¸Šæµ·çš„æŸä¸ªç‰¹æ®Šæ—¶æœŸï¼Œé—²å¾—å®åœ¨æ˜¯æ— èŠï¼Œåˆ¶ä½œäº† <a
href="https://mp.weixin.qq.com/s/cNCfhqoNB2wIC-5lAzIR3w">è§†é¢‘ï¼šä»å…¥é—¨åˆ°å¤ºç¬‹</a>ï¼Œä»¥ç¼“è§£ä¸èƒ½å‡ºå»ç©çš„éƒé—·ï¼Œå¹¶ç«‹å¿—äºåšæ›´é«˜é‡çš„ä¸ƒé‡(ä¸ƒè‰²å½©è™¹)ç«¹ç¬‹ã€‚</p>
<span id="more"></span>
<h2 id="ä»Šå¹´2023">0.2 ä»Šå¹´ï¼ˆ2023ï¼‰</h2>
<p>éšç€æˆ‘åšé«˜é‡è“ç¬‹çš„å¿µå¤´è¶Šæ¥è¶Šå¼ºçƒˆï¼Œä¾¿å¼€å§‹ç€æ‰‹å‡†å¤‡è¿™ä»¶äº‹æƒ…ã€‚</p>
<p>éå¸¸é‡è¦çš„é—®é¢˜æ¥äº†â€”â€”åšå‡ é‡ï¼Ÿ</p>
<p><img src="/images/ingress/homogeneous_table.png" width="60%"></p>
<ul>
<li><p>æˆ‘ä¸Šä¸€æ¬¡åšå•äººå…­é‡ï¼Œè€—æ—¶ 5 ä¸ªå°æ—¶ï¼Œè¡Œç¨‹ 31.37 å…¬é‡Œã€‚</p></li>
<li><p><code>@ALHDLIOX</code> ä¸Šä¸€æ¬¡åš<a
href="https://mp.weixin.qq.com/s/mqPZ0Rjx0QR3yCGgSz1Hxg">å•äººä¸ƒé‡</a>ï¼Œè€—æ—¶
35 å°æ—¶ï¼Œè¡Œç¨‹ 184.69 å…¬é‡Œ</p></li>
</ul>
<p>ç»è¿‡é²è½çš„æ€è€ƒï¼Œæˆ‘è§‰å¾—ä¹è¿™ä¸ªæ•°å­—å¾ˆå¥½ï¼Œä»£è¡¨æ•°ä¹‹æã€‚åšä¹é‡ï¼</p>
<p>æ­£æ‰€è°“ï¼š</p>
<blockquote>
<p><strong>ä¹é‡å¼€ï¼Œçµä¹‹æ–¿ï¼Œå‚æƒ æ©ï¼Œé¸¿ç¥œä¼‘ã€‚</strong></p>
</blockquote>
<p>ä¸å¯¹ï¼Œåšä¹é‡çš„ AP åªå¤Ÿæˆ‘è½¬ç”ŸåŠæ¬¡çš„ï¼Œæˆ‘è¦åé‡ï¼</p>
<h1 id="è·å–æ•°æ®">1ã€è·å–æ•°æ®</h1>
<h2 id="ä¸‰å¹´å‰çš„æ•°æ®">1.1 ä¸‰å¹´å‰çš„æ•°æ®</h2>
<p>æˆ‘æƒ³èµ· <code>@Nanoape</code> æ›¾åœ¨ <a
href="https://mp.weixin.qq.com/s/ewEHaY8gKo2o31ApP5T7GQ">æ¥åˆ·æ–°æ–°çš„ä¸ªäºº
Dronenet é£è¡Œè®°å½•å§</a> ä¸€æ–‡ä¸­æåˆ°ä»–æ‹¿åˆ°äº†å…¨çƒæ‰€æœ‰ Portal çš„æ•°æ®ã€‚å…±
1.31Gï¼ŒPortal æ€»æ•° 11,475,124ï¼Œæ•°æ®ç»Ÿè®¡æˆªæ­¢åˆ° 2020.06.12ã€‚</p>
<p>äºæ˜¯æˆ‘ä¸‹è½½äº†portalæ•°æ®<a
href="https://mega.nz/file/PsYnkCoD#ujlASFyomu1ZT8WZXi1_57ogH3pneGRXT2EC156u-lg">Mega</a>(è¿™ä¸ªç½‘ç›˜çœŸè‰¯å¿ƒå•Šï¼Œä¸é™é€Ÿï¼Œä¸å¼ºåˆ¶ç™»é™†)</p>
<p>ç„¶è€Œä¸‰å¹´è¿‡å»äº†ï¼Œè¿™ä¸€æ•°æ®å·²ç»è¿‡æ—¶ï¼Œæ¯”èµ·å¾—ä¸åˆ°æœ€ä¼˜è§£ï¼Œæˆ‘æ›´æ‹…å¿ƒçš„æ˜¯æœ‰çš„
portal ç§»åŠ¨äº†ä½ç½®ï¼Œè‡´ä½¿æ•´ä¸ªè®¡åˆ’å¤±è´¥ã€‚</p>
<h2 id="è·å–æ–°æ•°æ®">1.2 è·å–æ–°æ•°æ®</h2>
<p>æˆ‘æœ¬æƒ³é€šè¿‡æŸä¸ªè„šæœ¬æ¥æŠ“å–ä¸Šæµ·åŒºåŸŸçš„æ‰€æœ‰ portal
çš„ä¿¡æ¯ï¼Œä½†æ˜¯æŠ“åˆ°äº†è¿™ä¸ªä¿¡æ¯ï¼š</p>
<blockquote>
<p>{'message': 'Please, dont do so. Contact <span class="citation"
data-cites="Lanched">@Lanched</span> insted.'}</p>
</blockquote>
<p>è°¢å¤©è°¢åœ°ï¼Œè¿™ä¼¼ä¹åˆ¶æ­¢äº†æˆ‘è¿å<a
href="https://nianticlabs.com/terms">ToS</a>çš„è¡Œä¸ºã€‚</p>
<p>äºæ˜¯æˆ‘è”ç³»äº†
<code>@Lanched</code>ï¼Œåœ¨ä»–çš„çƒ­å¿ƒå¸®åŠ©ä¸‹ï¼Œæˆ‘é¡ºåˆ©æ‹¿åˆ°äº†ä¸€ä»½æ•´ä¸ªä¸Šæµ·portalçš„ä¿¡æ¯ã€‚</p>
<blockquote>
<p>æ•°æ®æˆªæ­¢åˆ° 2023-7-30 æ—¥ï¼ŒåŒºåŸŸèŒƒå›´æ˜¯åŒ—çº¬ 30.662225-31.879785ï¼Œä¸œç»
120.860389-121.969865ï¼ŒåŸºæœ¬åŒ…å«æ•´ä¸ªä¸Šæµ·åŒºåŸŸï¼Œä¸€å…± 30,179 ä¸ªpotalã€‚</p>
</blockquote>
<p>åœ¨ä¸ä»–çš„äº¤æµè¿‡ç¨‹ä¸­å¾—çŸ¥ï¼Œå…¨çƒ portal çš„æ•°é‡å·²ç»ä»2020å¹´çš„ 11,475,124
ä¸ªï¼Œ2023å¹´ä¸Šæ¶¨åˆ°äº† 18,284,480 ä¸ªï¼Œå¢é•¿ä¸ºåŸæ¥çš„
159%ã€‚çœ‹è¿™ä¸ªæ•°æ®å¾ˆå¯è§‚ï¼Œä¾ç¨€è¿˜æ˜¯èƒ½çœ‹åˆ°å®ƒèŒå£®æˆé•¿çš„å½±å­çš„ï¼ˆæ‹œæ‰˜æ‹œæ‰˜ï¼Œå†æ’‘åå¹´å§ï¼‰ã€‚</p>
<p>æœ€åï¼Œæˆ‘å‘ä»–è¡¨ç¤ºæ„Ÿè°¢ï¼Œå¹¶è¡¨ç¤º ä»¥åæœ‰éœ€è¦æˆ‘çš„åœ°æ–¹æˆ‘ä¼šå°½å…¨åŠ›å¸®å¿™ï¼Œ
å¾—åˆ°çš„å›å¤å´æ˜¯:</p>
<blockquote>
<p><code>I dont think, you can help me in ingress - anyway i cant play it anymore.</code></p>
</blockquote>
<p>æˆ‘çœ‹äº†ä»–çš„åå­—æ˜¯
<code>Alex Zverev</code>ï¼ŒçŒœæµ‹åˆ°ä»–çš„å›½ç±ï¼Œé¡¿æ—¶å¿ƒé‡Œäº”å‘³æ‚é™ˆï¼Œä½†æ„¿ä»¥åæ¸¸æˆå¯ä»¥æ›´çº¯ç²¹ä¸€äº›ã€‚</p>
<h1 id="åˆ†ææ•°æ®">2ã€åˆ†ææ•°æ®</h1>
<p>å†™äº†ä¸€äº›å°è„šæœ¬ï¼Œå¯¹æ‹¿åˆ°çš„æ•°æ®è¿›è¡Œäº†åˆ†æï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/images/ingress/shanghai_portals.gif" width="80%"></p>
<ul>
<li>ä¸Šæµ·çš„ç»çº¬åº¦æ˜¯ä¸œç»120Â°52â€²-122Â°12â€²ï¼ŒåŒ—çº¬30Â°40â€²-31Â°53â€²ä¹‹é—´ã€‚</li>
<li>æ•°æ®æˆªæ­¢åˆ°2023-7-30æ—¥ï¼ŒåŒºåŸŸèŒƒå›´æ˜¯åŒ—çº¬30.662225-31.879785ï¼Œä¸œç»120.860389-121.969865ï¼ŒåŸºæœ¬åŒ…å«æ•´ä¸ªä¸Šæµ·åŒºåŸŸ</li>
<li>å…±30179ä¸ªpotalã€‚</li>
</ul>
<p><img src="/images/ingress/part_of_shanghai.png" width="60%"></p>
<p>æˆ‘å–œæ¬¢å¯†é›†çš„åŒºåŸŸï¼äºæ˜¯è¿›ä¸€æ­¥å°†ç»çº¬åº¦é™åˆ¶åœ¨æ¯”è¾ƒå¯†é›†çš„
åŒ—çº¬30.988-31.430ï¼Œä¸œç»121.249-121.718ï¼Œä¸€å…±22431ä¸ªportal:</p>
<p><img src="/images/ingress/part_of_shanghai_gif.gif" width="80%"></p>
<pre><code>ä¸Šè¾¹é•¿ =  44472m, ä¸‹è¾¹é•¿ =  44679m
å·¦è¾¹é•¿ =  48716m, å³è¾¹é•¿ =  48716m</code></pre>
<h1 id="è®¡ç®—ç«¹ç¬‹çš„è§£">3ã€è®¡ç®—ç«¹ç¬‹çš„è§£</h1>
<h2 id="æ€è·¯ä¸€æ±‚åŠ©å¤§å‰å®³">3.1 æ€è·¯ä¸€ï¼šæ±‚åŠ©å¤§å‰å®³</h2>
<p>åˆä¸€æ¬¡ç¿»å‡ºäº† <code>@NanoApe</code> çš„<a
href="https://github.com/Konano/Ingress-Field-Design">å¤§å‰å®³</a>ï¼Œåˆä¸€æ¬¡æ„Ÿå¹é«˜ä¸‰çš„æ—¶å€™èƒ½å†™å‡ºè¿™ä»£ç å®åœ¨æ˜¯å¤ªå¤ªå¤ªå¼ºäº†ï¼</p>
<p>ç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿå…¼å®¹è¯»å–éjsonå½¢å¼çš„portalä¿¡æ¯ã€‚è¿™æ—¶æˆ‘çªç„¶æœ‰ä¸€ä¸ªå¤§èƒ†çš„æƒ³æ³•â€”â€”å¦‚æœä¸å¯¹ç«¹ç¬‹çš„è®¡ç®—é‡æ•°è¿›è¡Œé™åˆ¶ï¼Œå°†æ•´ä¸ªä¸Šæµ·çš„
potals é€è¿›ä»£ç ï¼Œçœ‹ä¸€çœ‹æ•´ä¸ªé­”éƒ½èƒ½å®¹çº³å‡ é‡ç¬‹ï¼Ÿ</p>
<p>å¯¹ä¸€äº›ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚ä»<code>æ ˆ</code>ä¸Šåˆ†é…å†…å­˜æ”¹ä¸ºä»<code>å †</code>ä¸Šåˆ†é…å†…å­˜ï¼Œå¢å¤§å¯¹<code>portal</code>å’Œ<code>field</code>æ•°é‡çš„é™åˆ¶ç­‰ï¼Œæœ€ç»ˆå‘ç°è¿™ä¸ªæ–¹æ¡ˆä¸å¤ªå¯è¡Œâ€”â€”</p>
<p>ä»¥ç­›é€‰å‡ºçš„ 22431 ä¸ªportalä¸ºä¾‹ï¼Œè¿™å¯ä»¥å½¢æˆ <span
class="math inline">\(C^3_{22431} = 1880773814095\)</span> ä¸ª
fieldï¼Œå¦‚æœå¯¹æ¯ä¸€ä¸ª field
éƒ½è¿›è¡Œä¿å­˜è®¡ç®—ï¼Œè¿™æ¯”ChatGPTçš„å‚æ•°é‡éƒ½å¤šä¸€ä¸ªé‡çº§ï¼Œç›´æ¥åŠé€€ã€‚</p>
<h2 id="æ€è·¯äºŒåˆ†è€Œæ²»ä¹‹">3.2 æ€è·¯äºŒï¼šåˆ†è€Œæ²»ä¹‹</h2>
<p>é‡‡ç”¨<code>åˆ†æ²»æ€æƒ³(Divide and Conquer)</code>ï¼Œå…ˆé€‰å‡ºè‹¥å¹²å°åŒºåŸŸï¼Œå¯¹æ¯ä¸ªå°åŒºåŸŸä½¿ç”¨å¤§å‰å®³è¿›è¡Œç«¹ç¬‹è®¡ç®—ï¼Œç„¶ååœ¨æ‰€æœ‰è®¡ç®—ç»“æœä¸­å¯»æ±‚é«˜é‡ç«¹ç¬‹çš„è§£ã€‚</p>
<p><img src="/images/ingress/divided_img.gif" width="80%"></p>
<p>å¦‚ä¸Šï¼Œæ¯ä¸€å°å—åŒºåŸŸåŒ…å«äº†1000ä¸ªportalï¼Œé€šè¿‡å¯¹æ¯ä¸ªå°åŒºåŸŸè®¡ç®—ç«¹ç¬‹çš„è§£ï¼Œç„¶åå¯¹æ‰€æœ‰çš„è§£è¿›è¡Œæ‹¼æ¥ï¼Œæ‹¼å‡ºä¸€ä¸ªå¤§ç«¹ç¬‹ã€‚</p>
<p>ç„¶åå°±æ˜¯å…´è‡´å‹ƒå‹ƒçš„å‡†å¤‡è¿›è¡Œæš´åŠ›æ±‚è§£ï¼Œè¾›è‹¦ç”µè„‘è·‘å‡ å¤©ï¼Œç„¶è€Œä»£ç è·‘èµ·æ¥çªç„¶æ„è¯†åˆ°è¿™æ¡è·¯å…¶å®æ˜¯è¡Œä¸é€šçš„ã€‚</p>
<p>å¤§è‡´åŸå› å°±æ˜¯ï¼Œç«¹ç¬‹ç¡®å®æ˜¯èƒ½è·å¾—å¾ˆå¤šè§£ï¼Œä½†æ˜¯æ²¡æ³•æ‹¼å¤§ç«¹ç¬‹å•Šã€‚äºæ˜¯ä¹Ÿæ”¾å¼ƒäº†ã€‚</p>
<p>ï¼ˆä¸è¿‡è¿™ä¸ªä»£ç åœ¨åé¢å‘æŒ¥äº†å¾ˆå¤§çš„ä½œç”¨ï¼‰</p>
<h2 id="æ€è·¯ä¸‰ä¸æ±‚ä¼˜è§£ä½†æ±‚æœ‰è§£">3.3 æ€è·¯ä¸‰ï¼šä¸æ±‚ä¼˜è§£ï¼Œä½†æ±‚æœ‰è§£</h2>
<p>çµæ„Ÿæ¥æºäºä»¥å‰èŠå¤©æ—¶ <code>@hydronephrosis</code> çš„æ’’è±†å­è¯´æ³•ï¼š</p>
<blockquote>
<p>æˆ‘å–œæ¬¢è¿™æ ·ç†è§£fieldçš„å½¢æˆï¼šç±»ä¼¼äºå­¦æ¦‚ç‡çš„æ—¶å€™å¾€æ¡Œå¸ƒä¸Šæ’’è±†å­çš„æ¨¡å¼ï¼Œåœ¨ä¸€å—ä¸‰è§’å½¢çš„å¸ƒä¸Šæ’’ä¸€é¢—è±†å­(po)ï¼Œè¿æ¥æ‰€åœ¨åŒºåŸŸçš„ä¸‰ä¸ªé¡¶ç‚¹ï¼ŒæŠŠå¸ƒåˆ†æˆä¸‰ä¸ªå°åŒºåŸŸï¼›ç„¶åå†æ’’ä¸‹ä¸€é¢—ï¼Œè¿æ¥æ‰€åœ¨å°åŒºåŸŸçš„ä¸‰ä¸ªé¡¶ç‚¹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰poéƒ½å›Šæ‹¬ï¼Œå½¢æˆå®Œç¾å¤šé‡ã€‚æ ¹æ®æ’’è±†å­é¡ºåºçš„ä¸åŒï¼ŒåŒæ ·çš„ä¸€ç»„poå¯ä»¥å½¢æˆæˆåƒä¸Šä¸‡ç§ä¸åŒçš„å®Œç¾å¤šé‡ï¼Œæ¯ä¸€ä¸ªå®Œç¾å¤šé‡ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§å½¢å¼è§£è¯»æˆå”¯ä¸€çš„ä¸€ç³»åˆ—poçš„é¡ºåºã€‚è¿™ç§å¤šæ ·æ€§æ­£æ˜¯å®Œç¾å¤šé‡çš„é­…åŠ›æ‰€åœ¨ã€‚å¦‚æœæ¯ä¸€æ¬¡ä¸æ­¢æ’’ä¸€é¢—ï¼Œè€Œæ˜¯æ ¹æ®ç°æœ‰åŒºåŸŸçš„æ•°é‡æ¥æ’’ç›¸åŒæ•°é‡çš„ä¸€æŠŠè±†å­ï¼Œä½¿å¾—åˆšå¥½æ¯ä¸ªåŒºåŸŸéƒ½è½ä¸‹ä¸€é¢—ï¼Œå°±æ˜¯ç«¹ç¬‹äº†ã€‚å¦‚æ­¤ç«Ÿä¸ä½ çœ‹fieldçš„ä¸‰ç»´è§†è§’æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚</p>
</blockquote>
<blockquote>
<p>æ¯æ’’ä¸€é¢—è±†å­éƒ½æ˜¯å¤šåŠ ä¸‰ä¸ªfieldå’Œä¸‰æ¡linkï¼Œä¹Ÿå¯ä»¥è§£é‡Šä¸ºä»€ä¹ˆå®Œç¾å¤šé‡çš„ç»“æ„æ”¹å˜ä¸å½±å“APå’Œfieldçš„æ•°é‡ã€‚</p>
</blockquote>
<p>ä»¥åŠ<code>@HesalTJ</code>çš„è¡¥å……ï¼š</p>
<blockquote>
<p>åœ¨æ¸¸æˆå†…å®ç°çš„è¯å°±æ˜¯ï¼Œåˆ©ç”¨åœ¨Fieldä¹‹ä¸‹è¿Linkçš„æ–°è§„åˆ™ï¼Œåœ¨å½¢æˆç¬¬ä¸€é‡ä¹‹åä¾æ¬¡æŠµè¾¾ä¸‹ä¸€çº§çš„å†…ç‚¹å°„3out
3out 3outâ€¦
å®é™…ä¸Šæ‰§è¡Œèµ·æ¥ä¼šç»•å¾ˆå¤šåœˆï¼Œä½†æ˜¯å®ƒçš„ç¾ä¸½åœ¨äºï¼Œå¦‚æœç”¨Intelæˆªäº†ä»…Fieldçš„å›¾ä¸€å¸§ä¸€å¸§åœ°åšæˆå½•åƒï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ°çš„æ˜¯ä¸€ä¸ªå¡«å……è‰²ç”±æµ…é€æ¸é€æ¸å˜æ·±çš„ä¸‰è§’å½¢ï¼Œæ¯ä¸€å¸§éƒ½æœ‰ä¸€ä¸ªå°ä¸‰è§’å½¢çš„æ·±åº¦+1é‡ï¼Œæ¯æ¬¡æå‡äº†é‡æ•°ä¹‹åæ–°çš„å°ä¸‰è§’å½¢é¢ç§¯å˜å°æ•°é‡Ã—3ï¼š
ä»ä¸€é‡+1å¸§å˜ä¸ºäºŒé‡ã€+3å¸§å˜ä¸ºä¸‰é‡ã€+9å¸§å˜ä¸ºå››é‡ã€+27å¸§å˜ä¸ºäº”é‡â€¦</p>
</blockquote>
<p>å¯æƒœçš„æ˜¯ï¼ŒæŒ‰ç…§è¿™ç§æ€è·¯å†™ä»£ç æ¯”è¾ƒéš¾æ‹¿åˆ°æœ€ä¼˜è§£ï¼Œåšç¬‹çš„æ—¶å€™ä¼šå¤šèµ°å¾ˆå¤šè·¯ã€‚ä¸è¿‡ï¼Œä¸æ±‚ä¼˜è§£ï¼Œä½†æ±‚æœ‰è§£å˜›:)</p>
<p>è€Œä¸”è¿™ç§è§£æ³•æ˜¯æˆ‘æœ€å–œæ¬¢çš„ç«¹ç¬‹å½¢çŠ¶ï¼Œæˆ‘å¿ƒç›®ä¸­çš„å®Œç¾ç«¹ç¬‹â€”â€”</p>
<p><strong>é«˜é‡çš„é¡¶ç‚¹ä½äºæ¬¡é«˜é‡fieldçš„é‡å¿ƒä½ç½®ï¼Œè¿™æ ·çš„ç«¹ç¬‹çœ‹èµ·æ¥æ›´åŠ è§„åˆ™ï¼Œéå¸¸å®Œç¾ï¼</strong></p>
<blockquote>
<p>å¤‡æ³¨ï¼šä¸‰æ¡ä¸­çº¿ç›¸äº¤çš„ç‚¹å«åšé‡å¿ƒã€‚</p>
</blockquote>
<p>é’ˆå¯¹è¿™ç§æ€è·¯ï¼Œpoåœºçš„åˆ†å¸ƒå‡åŒ€ç¨‹åº¦æ›´é‡è¦ï¼Œäºæ˜¯è¿›ä¸€æ­¥å°†ç»çº¬åº¦é™åˆ¶åœ¨åˆ†å¸ƒæ¯”è¾ƒå¯†é›†ä¸”å‡åŒ€çš„
åŒ—çº¬31.18-31.29ï¼Œä¸œç»121.40-121.54ï¼Œä¸€å…± 8704 ä¸ª portal.</p>
<pre><code>ä¸Šè¾¹é•¿ =  13296m, ä¸‹è¾¹é•¿ =  13312m
å·¦è¾¹é•¿ =  12226m, å³è¾¹é•¿ =  12226m</code></pre>
<p>äºæ˜¯ï¼Œæˆ‘å¾—åˆ°äº†ä¸Šæµ·çš„ä¸€ä¸ª<strong>å…«é‡ç«¹ç¬‹</strong>çš„è§£ï¼š</p>
<p><img src="/images/ingress/8_layer_homogeneous.gif" width="80%"></p>
<p>å½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡çš„ã€‚å®ƒç”šè‡³è¿ä¸€ä¸ª6é‡ç«¹ç¬‹éƒ½ä¸æ˜¯ã€‚</p>
<p>äºæ˜¯æ¢ä¸€ä¸ªæ€è·¯ï¼Œä¸å†å¯»æ‰¾ä¸‰è§’å½¢çš„é‡å¿ƒä½ç½®ï¼Œè€Œæ˜¯èƒ½å¤Ÿ
<strong>å°†poçš„æ•°é‡ä¸‰ç­‰åˆ†çš„ä½ç½®</strong>ã€‚è¿™é‡Œå°±ä¸å±•ç¤ºäº†ï¼Œå› ä¸ºè·‘å‡ºæ¥ä¸ªæ›´ä¸é è°±çš„ç»“æœã€‚</p>
<p><strong>æƒ³æ¥æƒ³å»ï¼Œè¿˜æ˜¯å¾—ä¾é  Nano çš„å¤§å‰å®³å•Šï¼</strong></p>
<p>å…¶å®ï¼Œ<strong>æ€è·¯äºŒï¼šåˆ†è€Œæ²»ä¹‹</strong>
çš„æ–¹æ³•å…¶å®æ˜¯å¯è¡Œçš„ï¼Œåªä¸è¿‡æˆ‘çš„é‚£ä¸ªæ–¹æ³•å®åœ¨æ˜¯è ¢åˆ°å®¶äº†ã€‚</p>
<p>è€Œä¸”ï¼Œè¦æƒ³è®¡ç®—é«˜é‡ç«¹ç¬‹ï¼Œåˆ†è€Œæ²»ä¹‹å¤§æ¦‚æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚</p>
<h1 id="æç½®">4ã€æç½®</h1>
<p>æš‚æ—¶æ²¡æœ‰å¾—åˆ°8é‡è§£ï¼Œè¿™ä»¶äº‹æƒ…å°±<strong>æç½®</strong>äº†ä¸¤ä¸ªæœˆã€‚</p>
<p>11æœˆçš„ä¸€å¤©æ—©ä¸Šï¼Œ<span class="citation"
data-cites="Hesal">@Hesal</span> å‘ç»™äº†æˆ‘ä¸€ä¸ªå…‘æ¢ç ï¼Œå…‘æ¢å‡ºæ¥ 800 ä¸ª
laï¼Œæˆ‘ç¬é—´ç‹‚å–œï¼Œå› ä¸ºè¿™å¯ä»¥é€šè¿‡è¿åŠ¨èƒ¶å›Šåˆæˆç«¹ç¬‹å…šæœ€çˆ±çš„
SBULï¼Œä¹Ÿå°±åœ¨æ­¤åˆ»ï¼Œä¸Šæµ·å¤§ç«¹ç¬‹è®¡åˆ’åˆä¸€æ¬¡è¢«æˆ‘è®°èµ·ã€‚</p>
<p>ç„¶åï¼Œè¿™ä»¶äº‹æƒ…åˆ<strong>æç½®</strong>äº†è¿‘ä¸¤ä¸ªæœˆã€‚</p>
<p>12æœˆåº•ï¼Œåœ¨ <code>@NanoApe</code> çš„é¢‘é“çœ‹åˆ°äº†è¿™ä¹ˆä¸€æ¡æ¶ˆæ¯â€”â€”</p>
<blockquote>
<p>å…­å¹´å‰çš„ 2017 å¹´ï¼Œ26 ååŒ—äº¬ Res Agents
åœ¨é‡‘èè¡—å®Œæˆäº†å…¨çƒæœ€å¿«å…­é‡è“ç«¹ç¬‹ï¼Œ12 æœˆ 24 æ—¥å‡Œæ™¨ 02 ç‚¹ 17 åˆ†åˆ°å‡Œæ™¨ 02
ç‚¹ 58 åˆ†ï¼Œè€—æ—¶ 39 åˆ†é’Ÿã€‚</p>
</blockquote>
<p><img src="/images/ingress/homogeneous_L6_2017.gif" width="80%"></p>
<p>æƒ³ä¸€æƒ³ï¼Œ26ä½ç©å®¶ï¼Œåœ¨å‡Œæ™¨ï¼Œé½å¿ƒååŠ›ç§å‡ºç«¹ç¬‹ï¼ŒçœŸæ˜¯ä¸€ä»¶æµªæ¼«çš„äº‹æƒ…å•Šï¼</p>
<p>ç„¶åï¼Œè¿™ä»¶äº‹æƒ…åˆ<strong>æç½®</strong>äº†è¿‘ä¸¤ä¸ªæœˆã€‚</p>
<p>2024å¹´2æœˆåº•ï¼Œæˆ‘ç»ˆäºç”¨å…‰äº†é‚£ 800 ä¸ª
laï¼Œä¸Šæµ·å¤§ç«¹ç¬‹è®¡åˆ’åˆä¸€æ¬¡è¢«æˆ‘è®°èµ·ï¼</p>
<h1 id="å¯è¡Œæ€§åˆ†æ">5ã€å¯è¡Œæ€§åˆ†æ</h1>
<h2 id="åœºå†…è¿çº¿æ˜¯å¦èƒ½å®ç°çœŸç«¹ç¬‹">5.1 åœºå†…è¿çº¿æ˜¯å¦èƒ½å®ç°çœŸç«¹ç¬‹ï¼Ÿ</h2>
<p>å¤§çº¦åœ¨2022å¹´5æœˆä»½çš„æ—¶å€™ï¼Œå·²ç»å…è®¸ field å†… 500ç±³ çš„ link
äº†ï¼Œé‚£æ—¶å€™æˆ‘äº§ç”Ÿè¿‡ç±»ä¼¼çš„ç–‘é—®ï¼Œäºæ˜¯åšè¿‡ç›¸å…³å®éªŒã€‚</p>
<p>ç»“è®ºæ˜¯ï¼šåœ¨fieldå†…å¾€é¡¶ç‚¹poå°„ï¼Œæ˜¯èƒ½å¤Ÿèµ·åˆ°é¡¶ç‚¹poå¾€é‡Œé¢å°„ä¸€æ ·çš„æ•ˆæœçš„ï¼ˆå³å±‚æ•°å¢åŠ ä¸€è‡´ï¼‰ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‹…å¿ƒè¿™ç§è§„åˆ™ä¸‹ä¼šåšä¸€ä¸ªå‡ç«¹ç¬‹ã€‚</p>
<p>ä»¥å‰å’Œå¹³å‘¨æ´»åŠ¨å¯ä»¥å…è®¸é•¿åº¦ä¸è¶…è¿‡ 8 å…¬é‡Œçš„ Link åœ¨ Field
ä¸‹é¢å»ºç«‹ï¼Œè¿™éå¸¸åˆ©å¥½7é‡ä»¥ä¸Šçš„ç«¹ç¬‹ã€‚ ä½†æ˜¯ä»ç„¶éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼š</p>
<ul>
<li>7é‡ç¬‹è¦ä¿è¯å°å£æ—¶æœ€è¿‘çš„ 65 - 40 - 2 = 23 æ¡ link å°äº 8 å…¬é‡Œ</li>
<li>8é‡ç¬‹è¦ä¿è¯å°å£æ—¶æœ€è¿‘çš„ 129 - 40 - 2 = 78 æ¡ link å°äº 8 å…¬é‡Œ</li>
<li>9é‡ç¬‹è¦ä¿è¯å°å£æ—¶æœ€è¿‘çš„ 257 - 40 - 2 = 215 æ¡ link å°äº 8 å…¬é‡Œ</li>
</ul>
<h2 id="ä¸Šæµ·èƒ½å¦å‡ºç°8é‡ç«¹ç¬‹">5.2 ä¸Šæµ·èƒ½å¦å‡ºç°8é‡ç«¹ç¬‹ï¼Ÿ</h2>
<p>ç›®å‰8é‡åº”è¯¥æ˜¯å¯ä»¥çš„ï¼Œå°¤å…¶æŒ‰ç…§æœ€è¿‘åŠå¹´æ¥ä¸Šæµ·portalè‚‰çœ¼å¯è§çš„å¢é•¿é€Ÿåº¦ï¼Œè¿™ä¸ªéš¾åº¦æ˜¯é™ä½çš„ã€‚</p>
<p>ä½†æ˜¯æŒ‰ç…§ç°åœ¨åŒæ–¹ç‰¹å·¥ä»¬çš„æ´»è·ƒç¨‹åº¦ä»¥åŠæä¸ªåˆ«çš„ä¸å’Œè°å› ç´ ï¼Œå‡ºç°é«˜é‡ç«¹ç¬‹çš„å›°éš¾åº¦è¿˜æ˜¯éå¸¸é«˜çš„ã€‚</p>
<h2 id="ç©å®¶å¤Ÿå¤šå—">5.3 ç©å®¶å¤Ÿå¤šå—ï¼Ÿ</h2>
<p>ä¸Šæµ·è¿™è¾¹åšç«¹ç¬‹å°¤å…¶éœ€è¦é€Ÿæˆ˜é€Ÿå†³ï¼Œè¿™å°±å¿…é¡»è¦å¤šäººåˆä½œå…±åŒå®Œæˆã€‚</p>
<p>æ¯”å¦‚8é‡ç«¹ç¬‹ï¼Œè¦æƒ³åœ¨å‡ ä¸ªå°æ—¶å†…å®Œæˆè‡³å°‘è¦åŠ¨ç”¨10åä»¥ä¸Šæœ‰ç«¹ç¬‹ç»éªŒçš„ç‰¹å·¥ï¼Œ</p>
<p>å¥½åœ¨ä¸Šæµ·è¿™è¾¹æ´»è·ƒç©å®¶æœ‰å¾ˆå¤šï¼Œä½†æ˜¯æœ‰ç«¹ç¬‹ç»éªŒçš„ç©å®¶æ¯”è¾ƒå°‘ä¸€äº›ã€‚å°¤å…¶è¿™ä¸¤å¹´ï¼Œæ„Ÿè§‰å·²ç»å¾ˆå°‘å¬åˆ°ç«¹ç¬‹çš„å¤§æ–°é—»äº†ï¼Œç«¹ç¬‹æ•™å¿«è¦æ²¡è½äº†å“‡ã€‚</p>
<h1 id="èµ·èˆª">6ã€èµ·èˆª</h1>
<p>éåœ°å¼€èŠ±</p>
<hr />
<p>è‡³äºä¸Šæµ·é«˜é‡ç«¹ç¬‹è®¡åˆ’ï¼Œå¤§æ¦‚ä¼šåœ¨æŸä¸ªæœˆé»‘é£é«˜å¤œé¡ºåˆ©å®Œæˆå§ã€‚</p>
]]></content>
      <tags>
        <tag>ingress</tag>
        <tag>Homogeneous</tag>
      </tags>
  </entry>
</search>
